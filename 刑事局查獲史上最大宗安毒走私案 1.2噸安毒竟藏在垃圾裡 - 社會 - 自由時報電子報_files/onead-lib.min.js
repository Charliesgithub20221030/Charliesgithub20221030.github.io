/*!
 *  onead-lib.min.js 2024-01-10 6:43:19 PM
 *
 */(()=>{"use strict";const e="creative.onead.com.tw",t="staging-occ.onead.tw",n="creative.dsp.com.tw",i="tw.nextapple",r="basketballtop5.com",o="www.foootball.cc",s="ftvnews.com.tw",a="ck101.com",l="cool3c.com",u="bc3ts.com",c="bc3ts.net",d="carnews.com",p="bbcommune.com",y="cheers.com.tw",h="carstuff.com.tw",m="www.brain.com.tw",E="bccnews.com.tw",T="www.beautimode.com",_="cool-style.com.tw",N="www.cava.tw",L="cava.tw",I="dcard.tw",M="ctee.com.tw",O="cw.com.tw",A="daybuy.tw",g="cnews.com.tw",C="news.cts.com.tw",w="ctinews.com",S="www.cmoney.tw",R="dailyview.tw",f="gq.com.tw",v="ddm.com.tw",D="buzzhand.com",j="www.foootball.cc",x="fullfenblog.tw",b="dramaqueen.com.tw",P="everylittled.com",B="harpersbazaar.com",k="utaggo.com.tw",U="icook.tw",F="how01.com",H="juksy.com",V="ifoodie.tw",z="linetv.tw",Y="inside.com.tw",G="helloyishi.com.tw",W="keelunghihi.com.tw",Q="wowlavie.com",q="mababy.com",X="mingweekly.com",K="mirrormedia.mg",Z="mombaby.com.tw",$="mamaclub.com",J="money-link.com.tw",ee="www.mnews.tw",te="niusnews.com",ne="thenewslens.com",ie="newtalk.tw",re="nocancers.net",oe="look-in.com.tw",se="opnews.sp88.tw",ae="pansci",le="popdaily.com.tw",ue="punchline.asia",ce="reurl.cc",de="www.starryeagle.com",pe="storm.mg",ye="sportsv.net",he="teepr.com",me="tel3c.tw",Ee="toy-people.com",Te="ttshow.tw",_e="ttvc.com.tw",Ne="u-car.com.tw",Le="www.walkerland.com",Ie="iwoman.sharelife.tw",Me="women-shuo.com",Oe="www.marieclaire.com.tw",Ae="zi.media",ge="forum.babyhome.com.tw",Ce="gamebase.com.tw",we="vogue.com.tw",Se="businesstoday.com.tw",Re="waynesan.com",fe="buzzorange.com",ve="tomorrowsci.com",De="www.kpopn.com",je="webmail.hinet.net",xe="m.life.tw",be="hiking.biji.co",Pe="running.biji.co",Be="basketball.biji.co",ke="meet.bnext.com.tw",Ue="www.bnext.com.tw",Fe="managertoday.com.tw",He="shoppingdesign.com.tw",Ve="www.businessweekly.com.tw",ze="wealth.businessweekly.com.tw",Ye="health.businessweekly.com.tw",Ge="www.chinatimes.com",We="truemii.chinatimes.com",Qe="wantrich.chinatimes.com",qe="club.commonhealth.com.tw",Xe="www.commonhealth.com.tw",Ke="womenshealthmag.com",Ze="www.elle.com",$e="cosmopolitan.com",Je="m.cnyes.com",et="news.cnyes.com",tt="ettoday.net",nt="www.ettoday.net",it="https://www.ettoday.net/events/ad-test/index.htm",rt="ebcbuzz.com",ot="house.ebc.net.tw",st="fnc.ebc.net.tw",at="news.ebc.net.tw",lt="sitemaji.com",ut="feebee.com.tw",ct="health.gvm.com.tw",dt="s-das.dna360.tw",pt="dev-adsv.svc.litv.tv",yt="ltn.com.tw",ht="www.nownews.com",mt="uat.nownews.com",Et="www.parenting.com.tw",Tt="iview.sina.com.tw",_t="www.techbang.com",Nt="mf.techbang.com",Lt="digiphoto.techbang.com",It="pixnet.net",Mt="pixnet.net/blog/post",Ot=[st,ot,N,L,T,o],At=[Ve,"zineblog.com.tw",v,"www.gbyhn.com.tw",de,"dennyli.com","www.85novel.com",Me,"www.cpbl.com.tw","tomchun.tw",x,E,"www.wowscreen.com.tw/",ae,W,"www.alberthsieh.com","wow-japan.com",ee,Be,"beauty-upgrade.tw","www.mook.com.tw","www.ctwant.com",H,Te,C,p,le,ce,ie,at,K,i,M,w];var gt;!function(e){e.CHINATIMES=".underlay-auto-scale",e.CHINATIMES2=".clip-container",e.PIXNET=".pixnet-ad",e.PIXNET_IR=".in-read-ad"}(gt||(gt={}));var Ct,wt,St;!function(e){e.DEFAULT="default",e.IR="inread",e.IC="incover",e.MIF="inflip",e.TD="text-drive",e.FD="flash-drive",e.APR="app-pre-roll",e.DSP="dsp-creative",e.MS="mobile-survey",e.MIT="mobile-intop",e.MIR="mobile-inread",e.IAB_VAST="iab-vast",e.AMP_IR="amp-inread",e.IN_STREAM="instream",e.DPF="desktop-frame",e.MIC="mobile-incover",e.MPR="mobile-pre-roll",e.DPR="desktop-pre-roll",e.MFS="mobile-fullscreen",e.MAIC="mobile-app-incover",e.MAIR="mobile-app-inread",e.SW="superwall",e.CTV_CREATIVE="ctv-creative"}(Ct||(Ct={})),function(e){e.TEXT_ONLY="TEXT_ONLY",e.FLASH_DRIVE_320="FLASH_DRIVE_320",e.FLASH_DRIVE_300="FLASH_DRIVE_300",e.IS_DF="HTML5_IS_DF",e.IS_INSYNC="HTML5_IS_INSYNC",e.IS_DF_BANNER="HTML5_IS_DF_BANNER",e.IS_FOLLOW_INSYNC="HTML5_IS_FOLLOW_INSYNC",e.IS_FOLLOW_DF="HTML5_IS_FOLLOW_DF",e.DOOR="DESKTOP_DOOR",e.DOOR_VIDEO="DESKTOP_DOOR_VIDEO",e.DOOR_PLUS="DESKTOP_DOOR_PLUS",e.MOBILE="MOBILE",e.INSTANT="INSTANT",e.TRANSFORMER="TRANSFORMER",e.TRANSFORMER_GALLERY="TRANSFORMER_GALLERY",e.TRANSFORMER_STICKY="TRANSFORMER_STICKY",e.TRANSFORMER_SOCIAL="TRANSFORMER_SOCIAL",e.TRANSFORMER_SWAP="TRANSFORMER_SWAP",e.SCRATCH="SCRATCH",e.SCRATCH_BNB="SCRATCH_BNB",e.VERTICAL_V2="VERTICAL_V2",e.VERTICAL_SHOW="VERTICAL_SHOW",e.VERTICAL_LOCK="VERTICAL_LOCK",e.VERTICAL_BANNER_V2="VERTICAL_BANNER_V2",e.VERTICAL_VIDEOBANNER="VERTICAL_VIDEOBANNER",e.LANDSCAPE_ENGAGEMENT="LANDSCAPE_ENGAGEMENT",e.FRAME_ENGAGEMENT="FRAME_ENGAGEMENT",e.PAGE_BANNER="PAGE_BANNER",e.PAGE_BANNER_V2="PAGE_BANNER_V2",e.PAGE_LINKTREE="PAGE_LINKTREE",e.STATIC="STATIC",e.POSTER="POSTER",e.POSTER_VIDEO="POSTER_VIDEO",e.SKIRT="SKIRT",e.FLASH="FLASH",e.STORY="STORY",e.PAGE_V2="PAGE_V2",e.PAGE="PAGE",e.SHOW="SHOW",e.TAG="TAG",e.BNB="BNB",e.BOTTOM="BOTTOM",e.BOTTOM_BANNER="BOTTOM_BANNER",e.BOTTOM_BANNER_640X273="BOTTOM_BANNER_640X273",e.BOTTOM_CLASSIC="BOTTOM_CLASSIC",e.BOTTOM_CUBE="BOTTOM_CUBE",e.BOTTOM_CUBE_BANNER_640X273="BOTTOM_CUBE_BANNER_640X273",e.BOTTOM_CUBE_BANNER="BOTTOM_CUBE_BANNER",e.BOTTOM_PEEK="BOTTOM_PEEK",e.BOTTOM_PEEK_BANNER="BOTTOM_PEEK_BANNER",e.BOTTOM_HIT="BOTTOM_HIT",e.BOTTOM_HIT_NF="BOTTOM_HIT_NF",e.BOTTOM_FLASH_CARD="BOTTOM_FLASH_CARD",e.BOTTOM_FLASH_CARD_NF="BOTTOM_FLASH_CARD_NF",e.BOTTOM_HIT_VIDEO="BOTTOM_HIT_VIDEO",e.BOTTOM_HIT_VIDEO_NF="BOTTOM_HIT_VIDEO_NF",e.BOTTOM_INSTANT="BOTTOM_INSTANT",e.BOTTOM_FLASH_V2="BOTTOM_FLASH_V2",e.BOTTOM_FLASH="BOTTOM_FLASH",e.BOTTOM_FLASH_BANNER="BOTTOM_FLASH_BANNER",e.BOTTOM_FLASH_BANNER_640X273="BOTTOM_FLASH_BANNER_640X273",e.BOTTOM_FLASH_V2_BANNER_640X273="BOTTOM_FLASH_V2_BANNER_640X273",e.BOTTOM_FLASH_VIDEO="BOTTOM_FLASH_VIDEO",e.BOTTOM_GALLERY="BOTTOM_GALLERY",e.BOTTOM_GALLERY_WEBGL="BOTTOM_GALLERY_WEBGL",e.BOTTOM_GALLERY_BANNER="BOTTOM_GALLERY_BANNER",e.BOTTOM_GALLERY_ZOOM="BOTTOM_GALLERY_ZOOM",e.BOTTOM_REEL="BOTTOM_REEL",e.BOTTOM_REELS_V2="BOTTOM_REELS_V2",e.BOTTOM_STAR="BOTTOM_STAR",e.BOTTOM_LOCATION="BOTTOM_LOCATION",e.BOTTOM_LOCATION_GALLERY="BOTTOM_LOCATION_GALLERY",e.BOTTOM_LOCATION_VIDEO="BOTTOM_LOCATION_VIDEO",e.BOTTOM_LOCATION_DOOR_VIDEO="BOTTOM_LOCATION_DOOR_VIDEO",e.BOTTOM_FLASH_LOCATION="BOTTOM_FLASH_LOCATION",e.BOTTOM_FLASH_LOCATION_V2="BOTTOM_FLASH_LOCATION_V2",e.BOTTOM_LINKTREE="BOTTOM_LINKTREE",e.VERTICAL="VERTICAL",e.SCROLLER="SCROLLER",e.SCROLLER_V2="SCROLLER_V2",e.VERTICAL_BANNER="VERTICAL_BANNER",e.SCROLLER_VERTICAL="SCROLLER_VERTICAL",e.FULLSCREEN_COVER="FULLSCREEN_COVER",e.FULLSCREEN_COVER_PLAY="FULLSCREEN_COVER_PLAY",e.FULLSCREEN_COVER_VIDEO="FULLSCREEN_COVER_VIDEO",e.FULLSCREEN_COVER_STORY="FULLSCREEN_COVER_STORY",e.FULLSCREEN_COVER_POSTER="FULLSCREEN_COVER_POSTER",e.FULLSCREEN_COVER_BANNER="FULLSCREEN_COVER_BANNER",e.FULLSCREEN_COVER_SCRATCH="FULLSCREEN_COVER_SCRATCH",e.FULLSCREEN_COVER_POSTER_VIDEO="FULLSCREEN_COVER_POSTER_VIDEO",e.FULLSCREEN_FLASH_DRIVE_320="FULLSCREEN_FLASH_DRIVE_320",e.FULLSCREEN_FLASH_DRIVE_300="FULLSCREEN_FLASH_DRIVE_300",e.BRAND_LIFT="BRAND_LIFT",e.BRAND_LIFT2="BRAND_LIFT2",e.BRAND_LIFT3="BRAND_LIFT3",e.SUPERWALL_SURVEY="SUPERWALL_SURVEY",e.CTV_LINKTREE="CTV_LINKTREE",e.CTV_MOVIE_SHOWTIME="CTV_MOVIE_SHOWTIME",e.CTV_LOCATION="CTV_LOCATION",e.WEATHER="WEATHER",e.WEATHER_FRAME="WEATHER_FRAME",e.DSP_300X250="300X250",e.H5_320X480="H5_320X480",e.H5_970X250="H5_970X250",e.H5_640X480="H5_640X480",e.DSP_PAGE_320X480="DSP_PAGE",e.STATIC_320X480="STATIC_320X480",e.H5_320X480_BANNER="H5_320X480_BANNER",e.TRANSFORMER_300X250="TRANSFORMER_300X250",e.TRANSFORMER_320X480="TRANSFORMER_320X480",e.DSP_PAGE_BANNER_ONLY="DSP_PAGE_BANNER_ONLY",e.DSP_VIDEO_ONLY_300X250="DSP_VIDEO_ONLY_300X250",e.H5_320X480_VIDEO_BANNER="H5_320X480_VIDEO_BANNER",e.TRANSFORMER_300X250_BNB="TRANSFORMER_300X250_BNB",e.TRANSFORMER_320X480_BNB="TRANSFORMER_320X480_BNB",e.DSP_BANNRT_ONLY_300X250="DSP_BANNER_ONLY_300X250",e.DSP_BANNRT_ONLY_320X480="DSP_BANNER_ONLY_320X480"}(wt||(wt={})),function(e){e[e.DIRECT=1]="DIRECT",e[e.SPEED=2]="SPEED",e[e.PD=3]="PD",e[e.RON=4]="RON",e[e.PG=5]="PG",e[e.SPEED_AGENCY=6]="SPEED_AGENCY"}(St||(St={}));const Rt=640,ft=950,vt="MIRT",Dt="MIRTG",jt="MIRT_ST",xt="MIRT_SP",bt="MIRT_SO",Pt="MIRSC",Bt="MIRSC_B",kt="MIRI",Ut="MIRSK",Ft="MIRS",Ht="MIRS_V2",Vt="MIRSV",zt="MIRV",Yt="MIRV_V2",Gt="MIRVB",Wt="MIRVB_V2",Qt="MIRVVB",qt="MIRVS",Xt="MIRM",Kt="MIRB",Zt="MIRP",$t="MIRP_V2",Jt="MIRPLT",en="MIRPB",tn="MIRPB_V2",nn="MIRPO",rn="MIRTS",on="MIRF",sn="MIRHTF",an="MIRTFB",ln="MIRHTFVB",un="MIRSH",cn="MIRTAG",dn="LANDSCAPEENGAGEMENT",pn="FRAMEENGAGEMENT",yn="MFSFC",hn="MFSFC_B",mn="MFSFC_V",En="MFS_PL",Tn="MFS_ST",_n="MFS_SC",Nn="MFS_PO",Ln="MFS_POV",In="MFSFD_320",Mn="MFSFD_300",On="MS_BL",An="MIRST",gn="MICB",Cn="MICBC",wn="MICBP",Sn="MICBPB",Rn="MICBCL",fn="MICBF_V2",vn="MICBF_VIDEO",Dn="MICBR",jn="MICBR_V2",xn="MICS",bn="MICBL",Pn="MICBLG",Bn="MICBLV",kn="MICBLDV",Un="MICBFL",Fn="MICBFL_V2",Hn="MICBH",Vn="MICBH_NF",zn="MICBH_V",Yn="MICBH_V_NF",Gn="MICBI",Wn="MICBG",Qn="MICBG_BANNER",qn="MICBF_BANNER",Xn="MICBG_GL",Kn="MICBG_Z",Zn="MICB_BANNER",$n="MICBC_BANNER",Jn="MICBF_V2_BANNER",ei="IPDF",ti="IPFOLLOWDF",ni="IPINSYNC",ii="IPFOLLOWINSYNC",ri="IRDF",oi="IRFOLLOWDF",si="desktop-pre-roll",ai="mobile-pre-roll",li="app-pre-roll",ui="DSP";var ci;!function(e){e[e.USE_FIRST_ONE=0]="USE_FIRST_ONE",e[e.CHANGE_ANOTHER_LAYOUT=1]="CHANGE_ANOTHER_LAYOUT"}(ci||(ci={}));const di=.5,pi=.5;var yi;!function(e){e[e.NONE=0]="NONE",e[e.BOTH=1]="BOTH",e[e.ONLY_REPLAY_BUTTON=2]="ONLY_REPLAY_BUTTON",e[e.ONLY_MORE_BUTTON=3]="ONLY_MORE_BUTTON"}(yi||(yi={}));const hi={TRA:"TRANSFORMER",TRG:"TRANSFORMER_GALLERY",TRST:"TRANSFORMER_STICKY",TRSO:"TRANSFORMER_SOCIAL",TRSW:"TRANSFORMER_SWAP",SC:"SCRATCH",SCB:"SCRATCH_BNB",INS:"INSTANT",VER:"VERTICAL",VV2:"VERTICAL_V2",VBV2:"VERTICAL_BANNER_V2",VVB:"VERTICAL_VIDEOBANNER",VS:"VERTICAL_SHOW",VL:"VERTICAL_LOCK",SH:"SHOW",PG:"PAGE",PGV2:"PAGE_V2",PGB:"PAGE_BANNER",PGBV2:"PAGE_BANNER_V2",PLT:"PAGE_LINKTREE",POS:"POSTER",POSV:"POSTER_VIDEO",BNB:"BNB",TAG:"TAG",SCR:"SCROLLER",SCV:"SCROLLER_VERTICAL",STO:"STORY",SKI:"SKIRT",FLA:"FLASH",STA:"STATIC",FRA:"FRAME_ENGAGEMENT",LAN:"LANDSCAPE_ENGAGEMENT",MOB:"MOBILE",HII:"HTML5_IS_INSYNC",HID:"HTML5_IS_DF",HFI:"HTML5_IS_FOLLOW_INSYNC",HFD:"HTML5_IS_FOLLOW_DF",BOT:"BOTTOM",BOI:"BOTTOM_INSTANT",BLC:"BOTTOM_CLASSIC",BCU:"BOTTOM_CUBE",BPK:"BOTTOM_PEEK",BFL:"BOTTOM_FLASH",BHT:"BOTTOM_HIT",BHTF:"BOTTOM_HIT_NF",BTV:"BOTTOM_HIT_VIDEO",HVNF:"BOTTOM_HIT_VIDEO_NF",BPKB:"BOTTOM_PEEK_BANNER",BLV2:"BOTTOM_FLASH_V2",BFV:"BOTTOM_FLASH_VIDEO",BNR:"BOTTOM_BANNER",BCUB:"BOTTOM_CUBE_BANNER",BFLB:"BOTTOM_FLASH_BANNER",BFLBV2:"BOTTOM_FLASH_V2_BANNER",BGA:"BOTTOM_GALLERY",BGB:"BOTTOM_GALLERY_BANNER",BGZ:"BOTTOM_GALLERY_ZOOM",BR:"BOTTOM_REEL",BRV2:"BOTTOM_REELS_V2",BS:"BOTTOM_STAR",WGB:"BOTTOM_GALLERY_WEBGL",BLO:"BOTTOM_LOCATION",BLOG:"BOTTOM_LOCATION_GALLERY",BLOV:"BOTTOM_LOCATION_VIDEO",BLOV2:"BOTTOM_LOCATION_DOOR_VIDEO",BFLO:"BOTTOM_FLASH_LOCATION",BFLOV2:"BOTTOM_FLASH_LOCATION_V2",BLT:"BOTTOM_LINKTREE",FC:"FULLSCREEN_COVER",FCV:"FULLSCREEN_COVER_VIDEO",FCS:"FULLSCREEN_COVER_STORY",FCB:"FULLSCREEN_COVER_BANNER",FCPL:"FULLSCREEN_COVER_PLAY",FCSC:"FULLSCREEN_COVER_SCRATCH",FCPO:"FULLSCREEN_COVER_POSTER",FCPOV:"FULLSCREEN_COVER_POSTER_VIDEO",BL:"BRAND_LIFT",HTF:"H5_320X480",HTFB:"H5_320X480_BANNER",HTFVB:"H5_320X480_VIDEO_BANNER",HNT:"H5_970X250",HSF:"H5_640X480",TXT:"300X250",SWS:"SUPERWALL_SURVEY",CTVL:"CTV_LOCATION",CTVMST:"CTV_MOVIE_SHOWTIME",CTVLT:"CTV_LINKTREE"},mi=12e4,Ei=window.location.href;function Ti(){return null===window.frameElement?parent.window:window}function _i(e,t){let n=!1;const i=t.parent;try{i.location.href}catch(i){n=!0,e.highestWin=t,e.inSafeFrame=!0}return n||(e.highestWin=i,i!==top&&_i(e,i)),e}function Ni(){const e=window.ONEAD_pubs.filter((function(e){let t;if(function(){const e=navigator.userAgent.toLowerCase();return{isMobile:-1!==e.indexOf("iphone")||-1!==e.indexOf("android")||-1!==e.toLowerCase().indexOf("ipad")||-1!==e.toLowerCase().indexOf("ipod")}}().isMobile)switch(e.pub.player_mode){case Ct.IN_STREAM:case Ct.IR:t=!1;break;default:t=!0}else switch(e.pub.player_mode){case Ct.MIC:case Ct.MIT:case Ct.MIR:case Ct.MFS:case Ct.MS:t=!1;break;default:t=!0}return t}));window.ONEAD_pubs=e}function Li(){let e;window._ONEAD&&window._ONEAD.pub&&(e=window._ONEAD.pub.player_type),Array.isArray(e)&&e.length>0&&(window._ONEAD.pub.player_type=e.map((function(e){return"string"==typeof e&&(e=function(e){return e=e.toUpperCase(),hi[e]?hi[e]:e}(e)),e})))}function Ii(e){const t=document.createElement("link"),n=document.getElementsByTagName("head")[0];t.href=e,t.as="script",t.rel="preload",n.appendChild(t)}function Mi(e,t){for(const n in e)window.ONEAD.pub.player_mode===e[n]&&(null==t?void 0:t.frameElement)&&(t.frameElement.style.display="")}function Oi(e){return void 0===e}function Ai(e){const t=e.pub.uid,n=e.pub.slotobj;let i,r;switch(e.pub.player_mode){case Ct.MIR:case Ct.IR:i="text-drive",r=2;break;case Ct.MFS:i="flash-drive",r=1}const o={pub:{uid:t,max_threads:r,category:"-1",slotobj:n,player_mode:i,queryAdCallback:window._ONEAD.pub.queryAdCallback,isPassback:!0}};window.ONEAD_text_pubs=window.ONEAD_text_pubs||[],window.ONEAD_text_pubs.push(o);const s=document.createElement("script");s.src="https://ad-specs.guoshipartners.com/static/js/ad-serv.min.js",s.async=!0;document.head.appendChild(s)}class gi{something(){}}class Ci{constructor(e){this.DEVICE={IPHONE:"iPhone",IPAD:"iPad",IPOD:"iPod",ANDROID:"Android",WINDOWS:"Windows"},this.BROWSER={CHROME:"Chrome",CHROME_IOS:"CriOS",IE6:"MSIE 6",WEBVIEW:" wv",LINE:" Line",FBAV:"FBAV",FBAN:"FBAN"},this.initDataByUserAgent(),this.initScopeByEnvironment(),this.initDataByDevice()}static getInstance(){return void 0===Ci._instance&&(Ci._instance=new Ci(new gi)),Ci._instance}initDataByUserAgent(){this.userAgent=window.navigator.userAgent,this.isIphone=this.checkWordInUserAgent(this.DEVICE.IPHONE),this.isIpad=this.checkWordInUserAgent(this.DEVICE.IPAD),this.isIpod=this.checkWordInUserAgent(this.DEVICE.IPOD),this.isIos=this.isIphone||this.isIpad||this.isIpod,this.isAndroid=this.checkWordInUserAgent(this.DEVICE.ANDROID),this.isMobile=this.isAndroid||this.isIos,this.isWindows=this.checkWordInUserAgent(this.DEVICE.WINDOWS),this.isWebView=this.checkWordInUserAgent(this.BROWSER.WEBVIEW),this.isChrome=this.checkWordInUserAgent(this.BROWSER.CHROME),this.isFB=this.checkWordInUserAgent(this.BROWSER.FBAN)||this.checkWordInUserAgent(this.BROWSER.FBAV),this.isChromeInIos=this.checkWordInUserAgent(this.BROWSER.CHROME_IOS),this.isIe6=this.checkWordInUserAgent(this.BROWSER.IE6),this.checkChromeVersionIsAbove=this.getVersionCompareFunction({regularEx:/Chrome\/[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+/g,firstStr:"Chrome/",splitStr:"."}),this.checkLineVersionIsAbove=this.getVersionCompareFunction({regularEx:/line\/[0-9]+\.[0-9]+\.[0-9]+/g,firstStr:"line/",splitStr:"."}),this.checkIosVersionIsAbove=this.getVersionCompareFunction({regularEx:/iPhone OS [0-9]+_[0-9]+(_[0-9])?/g,firstStr:"iPhone OS ",splitStr:"_"}),this.isSupportDASH=this.checkIfSupportDASH()}deviceIsHorizontal(){let e;try{e=window.screen.orientation.angle}catch(t){e=window.matchMedia("(orientation: landscape)").matches}return"90"==e||"-90"==e||!0===e}checkIfSupportDASH(){return!(!window.MediaSource||!("MediaSource"in window))}checkIfSupportHEVChls(){return!1}checkWordInUserAgent(e){let t;return t=this.userAgent.indexOf(e)>-1,t}getVersion(e){let t=e.regularEx,n=e.firstStr,i=e.splitStr;t.exec(this.userAgent);let r,o=t.lastIndex,s=this.userAgent.indexOf(n),a=o-s-n.length,l=this.userAgent.substr(s+n.length,a);return r=void 0!==i?l.split(i):[l],r}versionCompare(e,t,n,i){function r(e){return(o?/^\d+[A-Za-z]*$/:/^\d+$/).test(e)}const o=null==i?void 0:i.lexicographical,s=null==i?void 0:i.zeroExtend;let a=e.split(n),l=t.split(n);if(!a.every(r)||!l.every(r))return NaN;if(s){for(;a.length<l.length;)a.push("0");for(;l.length<a.length;)l.push("0")}o||(a=a.map(Number),l=l.map(Number));for(let e=0;e<a.length;++e){if(l.length===e)return 1;if(a[e]!==l[e])return a[e]>l[e]?1:-1}return a.length!==l.length?-1:0}isAboveBaseVersion(e){let t=e.baseVersionStr,n=e.options||{extendZero:!0},i=this.getVersion({regularEx:e.regularEx,firstStr:e.firstStr})[0];return this.versionCompare(i,t,e.splitStr,n)>=0}getVersionCompareFunction(e){return function(t){return this.isAboveBaseVersion({regularEx:e.regularEx,firstStr:e.firstStr,splitStr:e.splitStr,baseVersionStr:t,options:e.options})}}initDataByDevice(){const e=window.screen.height>window.screen.width,t=function(e){const t=document.getElementsByTagName("meta");for(const n of t)if(n.getAttribute("name")===e)return n.getAttribute("content");return""}("viewport").indexOf("device-width")>-1,n=e?window.screen.width:window.screen.height;this.deviceInfo={portraitHeight:e?window.screen.height:window.screen.width,portraitWidth:t?n:window.innerWidth,deviceHeight:this._scopeInfo.accessibleHighestWin.innerHeight},this.isCookieEnabled=this._checkIfCookieEnabled()}_checkIfCookieEnabled(){let e=navigator.cookieEnabled;return void 0!==navigator.cookieEnabled||e||(document.cookie="onevision_testcookie",e=-1!==document.cookie.indexOf("onevision_testcookie")),e}static detectHighestWindow(e,t=window){let n=!1,i=t.parent;try{i.location.href}catch(i){n=!0,e.accessibleHighestWin=t,e.isBlockedBySameOriginPolicy=!0}n||(2==++e.accessibleLayer&&(e.accessibleParentWin=i),e.accessibleHighestWin=i,i!==top&&Ci.detectHighestWindow(e,i))}initScopeByEnvironment(){this._scopeInfo={accessibleHighestWin:window,accessibleParentWin:window,accessibleLayer:1,isBlockedBySameOriginPolicy:!1},Ci.detectHighestWindow(this._scopeInfo)}get scopeInfo(){return this._scopeInfo}}const wi=(e,t)=>{let n,i;switch(typeof e){case"string":n=Number(e),isNaN(n)&&(n=0);break;case"number":n=e}return i=t?Math.round(n):Math.floor(n),i},Si={isip_index:-1},Ri={ONEAD_IAS_NESTLE:"onead_ias_nestle",ONEAD_IAS_TEST:"onead_ias_test",ONEAD_IAS_TEMPLATE_D:"onead_ias_templateD"},fi="DI_CENTER",vi="DATA_CENTER",Di="QUEUE_MANAGER";var ji;!function(e){e.MARGIN_LEFT="margin-left",e.MAX_HIGTH="max-height",e.CLIP_PATH_KIT="-ebkit-clip-path",e.CLIP_PATH="clip-path"}(ji||(ji={}));class xi{constructor(){this._componentPool={},this.register(fi,this)}register(e,t){const n=(e,t)=>{e&&""!==t&&(void 0===this._componentPool[t]?this._componentPool[t]=e:Array.isArray(this._componentPool[t])?this._componentPool[t].push(e):this._componentPool[t]=[this._componentPool[t],e])};Array.isArray(t)?t.forEach((t=>{n(t,e)})):n(t,e)}get(e){return void 0!==this._componentPool[e]?this._componentPool[e]:void 0}}class bi{constructor(){this._queueList=[]}enqueue(e){this._queueList.push(e),this._queueList.sort(((e,t)=>t.priority-e.priority))}dequeue(){let e;for(;e=this._queueList.shift();)e.action(e.param)}}const Pi={events:{UI_SKIP:"skip",UI_UNMUTE:"unmute",UI_MUTE:"mute",UI_REPLAY:"replay",UI_MORE:"more",UI_EXPAND:"expand",UI_MINIMIZE:"minimize",CREATE_VIEW:"cv",VIDEO_CLICK:"videoClick",BANNER_CLICK:"bannerClick",IMPRESSION:"impression",VIEWABILITY:"viewability",TRIGGER_BUTTON:"tb",CPE:"cpe",DISP:"disp",CLICK:"click",ENGAGEMENT:"eng",CLOSE:"close",SCROLL:"scorll",UENGAGE:"uengage",LEAVE_AD:"leave_ad",COMPVIEW:"compview",TO_BRIDGE:"to-birdge",EMOJI_CLICK:"emojiClick",BRIDGE_OPEN:"bridge-open",ATTENTION_ENG:"attentionEng"},viewEvents:{VIEW_2S:"view2s",VIEW_3S:"view3s",VIEW_5S:"view5s",VIEW_10S:"view10s",VIEW_30S:"view30s"},quarterEvents:{Q0:"q0",Q25:"q25",Q50:"q50",Q75:"q75",Q100:"q100"},playerEvents:{TIMEUPDATE:"timeupdate",VIDEOEND:"videoEnd",VPAID_READY:"vpaidReady",VPAID_CLOSE:"vpaidClose"},materialEvent:{CALL_VIDEO_PLAY:"callVideoPlay",CALL_VIDEO_PAUSE:"callVideoPause",CALL_IDENTITY_HIDE:"callIdentityHide",NEED_SYNC_BEFORE_CLOSE:"NEED_SYNC_BEFORE_CLOSE",SYNC_TRACKING_EVENT:"ONEAD_SYNC_TRACKING_EVENT",SEND_TRACKING_EVENT:"sendTrackingEvent",ONEAD_EXECUTE_CODE:"ONEAD_EXECUTE_CODE",SET_VIDEOCLICKAREA_TO_VIDEOSIZE:"setVideoClickAreaToVideoSize",ADJUST_ICON_CLICK_AREA:"adjustIdentityIconClickAreaSize",DISABLE_PLAYER_CONTROL:"disablePlayerControl",MATERIAL_TRACKING_EVENTS_SENT:"MATERIAL_TRACKING_EVENTS_SENT",SEND_BANNER_CLICK_TO_WARROOM:"sendBannerClickToWarroom",SEND_VIDEO_CLICK_AND_OPEN_URL:"sendVideoClickAndOpenUrl",SEND_CLICK_LANDING_PAGE:"sendClickLandingPage",SET_VIDEO_CLICK_URL:"setVideoClickUrl",ADD_TRACKING_ACCOUNT:"addTrackingAccount",INSERT_SCRIPT_IN_HEAD:"insertScriptInHead",REMOVE_BANNER_CLICK_AREA:"removeBannerClickArea",HIDE_UI_COMPONENT:"hideUiComponent",TOUCH_EVENT_SETUP:"TOUCH_EVENT_SETUP",TOUCH_EVENT_DISPATCH:"TOUCH_EVENT_DISPATCH",SEND_EVENT_ENG:"SEND_EVENT_ENG",SET_VIDEO_ZINDEX:"setVideoZindex",WAIT_FOR_EXPAND:"waitForExpand",DISPLAY_LAYOUT:"displayLayout",SEND_EVENT:"SEND_EVENT",GET_CUBE_CHANGE:"getCubeChange",SEND_IFRAME_READY:"sendIframeReady",VIDEO_TIME_UPDATE:"videoTimeUpdate",SETUP_TIME_EVENT:"setupTimeEvent",IS_FRAME_RUN_END:"isFrameRunEnd",MIRF_PLAY_DONE:"mirfPlayDone",SEND_NAMELIST_TO_SENTRY:"send_Namelist_ToSentry"},oneadLibEvent:{ADS_CONTENT_IS_EMPTY:"adsContentIsEmpty"},crossChannelEvent:{CLICK:"click"}};[Pi.events.VIDEO_CLICK,Pi.events.BANNER_CLICK].concat(Object.values(Pi.materialEvent));class Bi{constructor(e,t){this.priority=0,this.needExecute=!0,this.eventHandlerFunc=e,this.priority=t}}class ki{constructor(){this.eventCheckList=[Pi.events.CREATE_VIEW,Pi.events.IMPRESSION,Pi.quarterEvents.Q0,Pi.quarterEvents.Q25,Pi.quarterEvents.Q50,Pi.quarterEvents.Q75],ki._eventCenterArr.push(this),this._id=ki._produceId(),this.resetData()}static getInstance(e){return ki._eventCenterArr[e]}static _produceId(){const e=Math.floor(1e3*Math.random()).toString();return Date.now()+e}resetData(){this._eventHandlerMap={},this._eventCounter={},this._eventSendLimit={},this._dataCenter=new qr(this),this._queueManager=new bi,this._diCenter=new xi,this.diRegister(vi,this._dataCenter),this.diRegister(Di,this._queueManager)}subscribe(e,t,n=0){if(this._eventHandlerMap[e]||(this._eventHandlerMap[e]=[]),t.toString().indexOf(".dispatch(")>-1)throw new Error("please use dispatchLater in subscribe!");this._eventHandlerMap[e].push(new Bi(t,n)),this._eventHandlerMap[e].sort(((e,t)=>t.priority-e.priority))}unsubscribe(e,t){const n=this._eventHandlerMap[e];for(const e of n)e.eventHandlerFunc===t&&(e.needExecute=!1)}clearByEventName(e){this._eventHandlerMap[e]&&(this._eventHandlerMap[e]=[])}clearAll(){this.resetData()}dispatchLater(e,t){this.dispatch(e,t,!0)}isEmptyUrl(e){let t;if("string"==typeof e)t=e;else if("string"==typeof e.url)t=e.url;else if(t=this._dataCenter.bannerDataInXml[0].linkUrls[e.url],void 0===t)try{t=this._dataCenter.bannerDataInXml[1].linkUrls[e.url]}catch(e){}return"null"===t||""===t||void 0===t}dispatch(e,t,n){if((e!==Pi.events.VIDEO_CLICK&&e!==Pi.events.BANNER_CLICK||!this.isEmptyUrl(t))&&(this.eventCheckList=this.eventCheckList.filter((t=>t!==e)),this.checkEventLimit(e))){void 0===t&&(t=e);const i=this._eventHandlerMap[e];i&&i.forEach((e=>{e.needExecute&&this._queueManager.enqueue({action:e.eventHandlerFunc,param:t,priority:e.priority})})),void 0===n&&this._queueManager.dequeue()}}checkEventLimit(e){let t=this._eventCounter[e];const n=this._eventSendLimit[e];let i;return void 0===n?i=!0:(void 0===t?t=1:t++,this._eventCounter[e]=t,i=t<=n),i}setupEventSendLimitTimes(e){this._eventSendLimit[e.eventType]=e.limit}get dataCenter(){return this._dataCenter}get eventCounter(){return this._eventCounter}get id(){return this._id}sendErrorReport(e,t){this.dataCenter.reporting.sendErrorReporting(e,t)}diRegister(e,t){this._diCenter.register(e,t)}diGet(e){return this._diCenter.get(e)}}ki._eventCenterArr=[];const Ui="[EVENT]",Fi="[ERRORCODE]",Hi="[ERRORMSG]",Vi="[ERRORDESC]";class zi{constructor(e){this._value=e}setupEventName(e){return this._value=this._value.replace("[EVENT]",e),this}setupClickLabel(e){return this._value=this._value.replace("[CLICKLABEL]",e),this}setupBannerClickEng(e){return this._value=this._value.replace("eng=",`eng=${e}`),this}assignKeyValue(e,t){const n=new RegExp(`(\\?|\\&)${e}=([^&?]+|)`,"g");return this._value=this._value.replace(n,`$1${e}=${encodeURIComponent(t)}`),this}clearMarco(){return this._value=this._value.replace(/(\[\w+])/g,""),this}get value(){return this._value}}class Yi{constructor(e){this._trackUrl=e.trackUrl,this._errorReportingUrl=e.trackUrl,this._dataCenter=e}addCommonDataAndSendEvent(e,t){null!==this.pageHeightInformation&&void 0!==this.pageHeightInformation||(this.pageHeightInformation=eo.pageHeightInformation(this._dataCenter));const n=Math.round(this._dataCenter.currentTime).toString();let i;i=this._dataCenter.isEventImpSend?wi(this.pageHeightInformation.pageHeight):0;let r=this.checkAndGetUrlForAsync(e,{eventType:t,vs:n,ppx:i,spp:wi(this.pageHeightInformation.positionPercentage)});return this._dataCenter.exclude&&this._dataCenter.exclude>0&&(r+="&exclude="+this._dataCenter.exclude),this._dataCenter.sendByFetch?eo.sendRequestToServerByFetch(r):eo.sendHttpRequestToServer(r),r}checkAndGetUrlForAsync(e,t){return e.setupEventName(t.eventType).assignKeyValue("vs",t.vs).assignKeyValue("ppx",t.ppx.toString()).assignKeyValue("spp",t.spp.toString()).clearMarco().value}sendTrackingEvent(e,t){const n=new zi(this._trackUrl);if(this._trackUrl&&-1!==this._trackUrl.indexOf("//")){switch(e){case Pi.events.BANNER_CLICK:"string"==typeof t&&this.addCommonDataAndSendEvent(n,e),void 0!==t.eng&&n.setupBannerClickEng(t.eng),void 0!==t.clickLabel&&n.setupClickLabel(`${this._dataCenter.pid}_${t.bannerInfo}_${t.bannerIndex}_${t.clickLabel}`);break;case Pi.events.ENGAGEMENT:void 0!==t.buttonIndex?n.assignKeyValue("eng",t.buttonIndex):void 0!==t.engName?n.assignKeyValue("eng",t.engName):n.assignKeyValue("eng",JSON.stringify(t).replace(/"/g,""))}return this.addCommonDataAndSendEvent(n,e),n}}sendErrorReporting(e,t){if(e.errorCode&&e.errorDesc&&e.errorMsg&&this._errorReportingUrl&&-1!==this._errorReportingUrl.indexOf("//"))try{let n=this._errorReportingUrl.replace(Ui,"error").replace(Fi,e.errorCode).replace(Hi,encodeURIComponent(e.errorMsg));return t&&(e.errorDesc.extraDesc=t),n=n.replace(Vi,encodeURIComponent(JSON.stringify(e.errorDesc))),eo.sendHttpRequestToServer(n),n}catch(e){return}}sendThirdPartyTracking(e){const t=[];if(void 0!==e&&e.length>0){const n=String(+new Date);for(const i of e){let e=i;(null==e?void 0:e.indexOf("//"))>-1&&(e=e.replace("[timestamp]",n),eo.sendHttpRequestToServer(e),t.push(e))}}return t}}class Gi{constructor(e){this._minimizeAds=[],this._hasIrPlus=!1,this._envInfo=Ci.getInstance(),this._accessibleHighestWin=this._envInfo.scopeInfo.accessibleHighestWin}static getInstance(){const e=Ci.getInstance().scopeInfo.accessibleHighestWin;return e.ONEAD_PlayerCenter||(e.ONEAD_PlayerCenter=new Gi(new gi)),e.ONEAD_PlayerCenter}checkHasIrPlus(e,t){t!==Ct.IR||e!==wt.IS_FOLLOW_DF&&e!==wt.IS_FOLLOW_INSYNC||(this._hasIrPlus=!0)}get hasIrPlus(){return this._hasIrPlus}checkNeedToMinimizeAds(e){e.dataCenter.playerType.indexOf("FOLLOW")>-1&&(this._minimizeAds||(this._minimizeAds=[]),this._minimizeAds.push(e))}setCurrentMiniLayout(){if(this.currentMiniLayout){const e=this.filterCanUseLayoutArr();e&&(this.checkNeedToChangeMinimizeLayout(this.currentMiniLayout,e)&&(this.currentMiniLayout.isMinimize=!1,this.currentMiniLayout.resetMinimizeLayout(),e.isMinimize=!e.isAdVisible(),e.resetMinimizeLayout(),this.currentMiniLayout=e),this.currentMiniLayout.isExpand||(this.currentMiniLayout.isAdVisible()?this.currentMiniLayout.isMinimize=!1:e.adOffsetTop===this.currentMiniLayout.adOffsetTop||e.isAdVisible()?this.currentMiniLayout.isMinimize=!this.currentMiniLayout.isAdVisible():(this.currentMiniLayout.isMinimize=!1,this.currentMiniLayout.isCloseFollow=!0,e.beenSeen&&(this.currentMiniLayout=e,this.currentMiniLayout.isMinimize=!this.currentMiniLayout.isAdVisible()))))}else this.currentMiniLayout=this.filterCanUseLayoutArr(),this.currentMiniLayout.isMinimize=!this.currentMiniLayout.isAdVisible()}filterCanUseLayoutArr(){this._minimizeAds.sort(((e,t)=>e.dataCenter.desktopLayout.adOffsetTop-this._currentPosition>t.dataCenter.desktopLayout.adOffsetTop-this._currentPosition?1:-1)),this._currentPosition=this._accessibleHighestWin.document.body.scrollTop;let e=this._minimizeAds.filter((e=>e.dataCenter.desktopLayout.adOffsetTop<=this._currentPosition)).filter((e=>!e.dataCenter.desktopLayout.isCloseFollow)).filter((e=>!this.hasIrPlus||e.dataCenter.playMode===Ct.IR));return 0===e.length?(e=this._minimizeAds.filter((e=>e.dataCenter.desktopLayout.adOffsetTop>this._currentPosition)).filter((e=>!e.dataCenter.desktopLayout.isCloseFollow)).filter((e=>!this.hasIrPlus||e.dataCenter.playMode===Ct.IR)),e.length>0?e[0].dataCenter.desktopLayout:void 0):e[e.length-1].dataCenter.desktopLayout}checkNeedToChangeMinimizeLayout(e,t){return e.adOffsetTop>t.adOffsetTop}}var Wi;!function(e){e.HIDE_TIPS="hideTips",e.LANDSCAPE="landscape",e.ONLY_VIDEO="onlyVideo",e.ONLY_BANNER="onlybanner",e.MOAT_VIDEO="moatUseVideo",e.CUBE_CHATBOT="cubeChatbot",e.CROSS_BANNER="crossbanner",e.CUBE_NAMELIST="cubeNamelist",e.MOAT_DISPLAY="moatUseDisplay",e.CLOSE_AREA_SET="closeAreaSet",e.HIDE_FLASH_CLOSE_BTN="hideFlashCloseBtn",e.IAB_IMPRESSION="useIabImpression",e.USE_FIRST_BANNER="useFirstBanner",e.HIDE_REPLAY_MORE="hideReplayMore",e.USE_GALLERY_LITE="useGalleryLite",e.HIDE_PLAY_BUTTON="hidePlayButton",e.STOP_IN_LOOP_LAST="stopInLoopLast",e.HIDE_VOLUME_BUTTON="hideVolumeButton",e.IOS_USE_HYBRID_VIDEO="iosUseHybridVideo",e.OPEN_URL_WITH_ASSIGN="openUrlWithAssign",e.PREROAD_LANDINGPAGE="preloadLandingPage",e.PAGE_CLICK_IN_SIGHT_ONLY="pageClickInSightOnly",e.USE_OLD_STYLE_PLAY_BUTTON="useOldStylePlayButton",e.LISTEN_CLICK_ON_BANNER_IFRAME="listenClickOnBannerIframe",e.PAGE_CLICK_IN_SIGHT_AFTERWARD="pageClickInSightAfterward",e.SHOW_TEMP_INFO="showTempInfo",e.SHOW_TODAYTEMP_INFO="showTodayTempInfo",e.SHOW_HUMI_INFO="showHumiInfo",e.SHOW_AQI_INFO="showAqiInfo",e.SHOW_UVI_INFO="showUviInfo",e.MOAT_IP_TEST="moatIpTest",e.SEND_BY_FETCH="sendByFetch",e.NEW_UI="newUI",e.DOCUMENT_CLICK="documentClick",e.ADD_BANNER_CLICK_AREA="addBannerClickArea",e.USE_CPC_HEIGHT="useCpcHeight"}(Wi||(Wi={}));class Qi{setKeyword(e,t,n){const i=Object.keys(e),r=t.match(/(\w+\(.+?\))|(\w+)/g);if(r)for(const t of r)if(i.indexOf(t)>-1)e[t]=!0;else{const e=t.split("(");if(e[1]){const t=JSON.parse(e[1].split(")")[0]);"setUiPos"===e[0]?(n._funcParamMapForKeyWord[e[0]]||(n._funcParamMapForKeyWord[e[0]]=[]),n._funcParamMapForKeyWord[e[0]].push(t)):n._funcParamMapForKeyWord[e[0]]=t}}return e}}let qi=null;const Xi={data:{},length:0,getItem(e){return this.data[e]},setItem(e,t){this.data[e]=t,this.length=Object.keys(this.data).length},removeItem(e){delete this.data[e],this.length=Object.keys(this.data).length},clear(){this.data={},this.length=0}};class Ki{constructor(){this.storage=this.initStorage()}initStorage(){if(qi)return qi;try{qi="undefined"!=typeof window&&null!==window?window.localStorage||window.sessionStorage:null}catch(e){qi=null}return qi&&!this.isStorageDisabled(qi)||(qi=Xi,qi.clear()),qi}isStorageDisabled(e){const t="__VASTStorage__";try{if(e.setItem(t,t),e.getItem(t)!==t)return e.removeItem(t),!0}catch(e){return!0}return e.removeItem(t),!1}getItem(e){return this.storage.getItem(e)}setItem(e,t){return this.storage.setItem(e,t)}removeItem(e){return this.storage.removeItem(e)}clear(){return this.storage.clear()}}function Zi(e={}){return{id:e.id||null,adId:e.adId||null,sequence:e.sequence||null,apiFramework:e.apiFramework||null,universalAdIds:[],creativeExtensions:[]}}const $i=["ADCATEGORIES","ADCOUNT","ADPLAYHEAD","ADSERVINGID","ADTYPE","APIFRAMEWORKS","APPBUNDLE","ASSETURI","BLOCKEDADCATEGORIES","BREAKMAXADLENGTH","BREAKMAXADS","BREAKMAXDURATION","BREAKMINADLENGTH","BREAKMINDURATION","BREAKPOSITION","CLICKPOS","CLICKTYPE","CLIENTUA","CONTENTID","CONTENTPLAYHEAD","CONTENTURI","DEVICEIP","DEVICEUA","DOMAIN","EXTENSIONS","GDPRCONSENT","IFA","IFATYPE","INVENTORYSTATE","LATLONG","LIMITADTRACKING","MEDIAMIME","MEDIAPLAYHEAD","OMIDPARTNER","PAGEURL","PLACEMENTTYPE","PLAYERCAPABILITIES","PLAYERSIZE","PLAYERSTATE","PODSEQUENCE","REGULATIONS","SERVERSIDE","SERVERUA","TRANSACTIONID","UNIVERSALADID","VASTVERSIONS","VERIFICATIONVENDORS"];function Ji(e,t={},n={}){const i=[],r=nr(e);!t.ERRORCODE||n.isCustomCode||/^[0-9]{3}$/.test(t.ERRORCODE)||(t.ERRORCODE=900),t.CACHEBUSTING=sr(Math.round(1e8*Math.random()).toString()),t.TIMESTAMP=(new Date).toISOString(),t.RANDOM=t.random=t.CACHEBUSTING;for(const e in t)t[e]=or(t[e]);for(const e in r){const n=r[e];"string"==typeof n&&i.push(er(n,t))}return i}function er(e,t){const n=(e=tr(e,t)).match(/[^[\]]+(?=])/g);if(!n)return e;let i=n.filter((e=>$i.indexOf(e)>-1));return 0===i.length?e:(i=i.reduce(((e,t)=>(e[t]=-1,e)),{}),tr(e,i))}function tr(e,t){let n=e;for(const e in t){const i=t[e];n=n.replace(new RegExp(`(?:\\[|%%)(${e})(?:\\]|%%)`,"g"),i)}return n}function nr(e){return Array.isArray(e)?e.map((e=>e&&e.hasOwnProperty("url")?e.url:e)):e}function ir(e,t){for(let n=0;n<t.length;n++)if(rr(t[n],e))return!0;return!1}function rr(e,t){if(e&&t){const n=Object.getOwnPropertyNames(e),i=Object.getOwnPropertyNames(t);return n.length===i.length&&(e.id===t.id&&e.url===t.url)}return!1}function or(e){return encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16)}`))}function sr(e,t=8){const n=String(e);return n.length<t?ar(0,t-n.length,!1).map((()=>"0")).join("")+n:n}function ar(e,t,n){const i=[],r=e<t,o=n?r?t+1:t-1:t;for(let t=e;r?t<o:t>o;r?t++:t--)i.push(t);return i}const lr={track:function(e,t,n){Ji(e,t,n).forEach((e=>{if("undefined"!=typeof window&&null!==window){(new Image).src=e}}))},resolveURLTemplates:Ji,extractURLsFromTemplates:nr,containsTemplateObject:ir,isTemplateObjectEqual:rr,encodeURIComponentRFC3986:or,replaceUrlMacros:er,leftpad:sr,range:ar,isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},flatten:function e(t){return t.reduce(((t,n)=>t.concat(Array.isArray(n)?e(n):n)),[])},joinArrayOfUniqueTemplateObjs:function(e=[],t=[]){const n=Array.isArray(e)?e:[],i=Array.isArray(t)?t:[];return n.concat(i).reduce(((e,t)=>(ir(t,e)||e.push(t),e)),[])}};function ur(e){return-1!==["true","TRUE","True","1"].indexOf(e)}const cr={childByName:function(e,t){const n=e.childNodes;for(const e in n){const i=n[e];if(i.nodeName===t)return i}},childrenByName:function(e,t){const n=[],i=e.childNodes;for(const e in i){const r=i[e];r.nodeName===t&&n.push(r)}return n},resolveVastAdTagURI:function(e,t){if(!t)return e;if(0===e.indexOf("//")){const{protocol:t}=location;return`${t}${e}`}if(-1===e.indexOf("://")){return`${t.slice(0,t.lastIndexOf("/"))}/${e}`}return e},parseBoolean:ur,parseNodeText:function(e){return e&&(e.textContent||e.text||"").trim()},copyNodeAttribute:function(e,t,n){const i=t.getAttribute(e);i&&n.setAttribute(e,i)},parseAttributes:function(e){const t=e.attributes,n={};for(let e=0;e<t.length;e++)n[t[e].nodeName]=t[e].nodeValue;return n},parseDuration:function(e){if(null==e)return-1;if(lr.isNumeric(e))return parseInt(e);const t=e.split(":");if(3!==t.length)return-1;const n=t[2].split(".");let i=parseInt(n[0]);2===n.length&&(i+=parseFloat(`0.${n[1]}`));const r=60*parseInt(t[1]),o=60*parseInt(t[0])*60;return isNaN(o)||isNaN(r)||isNaN(i)||r>3600||i>60?-1:o+r+i},splitVAST:function(e){const t=[];let n=null;return e.forEach(((i,r)=>{if(i.sequence&&(i.sequence=parseInt(i.sequence,10)),i.sequence>1){const t=e[r-1];if(t&&t.sequence===i.sequence-1)return void(n&&n.push(i));delete i.sequence}n=[i],t.push(n)})),t},assignAttributes:function(e,t){if(e)for(const n in e){const i=e[n];if(i.nodeName&&i.nodeValue&&t.hasOwnProperty(i.nodeName)){let e=i.nodeValue;"boolean"==typeof t[i.nodeName]&&(e=ur(e)),t[i.nodeName]=e}}},mergeWrapperAdData:function(e,t){e.errorURLTemplates=t.errorURLTemplates.concat(e.errorURLTemplates),e.impressionURLTemplates=t.impressionURLTemplates.concat(e.impressionURLTemplates),e.extensions=t.extensions.concat(e.extensions),t.viewableImpression.length>0&&(e.viewableImpression=[...e.viewableImpression,...t.viewableImpression]),e.followAdditionalWrappers=t.followAdditionalWrappers,e.fallbackOnNoAd=t.fallbackOnNoAd;const n=(t.creatives.banner||[]).filter((e=>e&&"companion"===e.type)),i=n.reduce(((e,t)=>((t.variations||[]).forEach((t=>{(t.companionClickTrackingURLTemplates||[]).forEach((t=>{lr.containsTemplateObject(t,e)||e.push(t)}))})),e)),[]);e.creatives.banner=e.creatives.banner.concat(n);const r=t.videoClickTrackingURLTemplates&&t.videoClickTrackingURLTemplates.length,o=t.videoCustomClickURLTemplates&&t.videoCustomClickURLTemplates.length;e.creatives.banner.forEach((e=>{if(t.trackingEvents&&t.trackingEvents[e.type])for(const n in t.trackingEvents[e.type]){const i=t.trackingEvents[e.type][n];Array.isArray(e.trackingEvents[n])||(e.trackingEvents[n]=[]),e.trackingEvents[n]=e.trackingEvents[n].concat(i)}"linear"===e.type&&(r&&(e.videoClickTrackingURLTemplates=e.videoClickTrackingURLTemplates.concat(t.videoClickTrackingURLTemplates)),o&&(e.videoCustomClickURLTemplates=e.videoCustomClickURLTemplates.concat(t.videoCustomClickURLTemplates)),!t.videoClickThroughURLTemplate||null!==e.videoClickThroughURLTemplate&&void 0!==e.videoClickThroughURLTemplate||(e.videoClickThroughURLTemplate=t.videoClickThroughURLTemplate)),"companion"===e.type&&i.length&&(e.variations||[]).forEach((e=>{e.companionClickTrackingURLTemplates=lr.joinArrayOfUniqueTemplateObjs(e.companionClickTrackingURLTemplates,i)}))})),t.adVerifications&&(e.adVerifications=e.adVerifications.concat(t.adVerifications)),t.blockedAdCategories&&(e.blockedAdCategories=e.blockedAdCategories.concat(t.blockedAdCategories))}};function dr(e,t){const n=function(e={}){const{id:t,adId:n,sequence:i,apiFramework:r}=Zi(e);return{id:t,adId:n,sequence:i,apiFramework:r,type:"companion",required:null,variations:[]}}(t);return n.required=e.getAttribute("required")||null,n.variations=cr.childrenByName(e,"Companion").map((e=>{const t=function(e={}){return{id:e.id||null,adType:"companionAd",width:e.width||0,height:e.height||0,assetWidth:e.assetWidth||null,assetHeight:e.assetHeight||null,expandedWidth:e.expandedWidth||null,expandedHeight:e.expandedHeight||null,apiFramework:e.apiFramework||null,adSlotID:e.adSlotID||null,pxratio:e.pxratio||"1",renderingMode:e.renderingMode||"default",staticResources:[],htmlResources:[],iframeResources:[],adParameters:null,xmlEncoded:null,altText:null,companionClickThroughURLTemplate:null,companionClickThroughURLTemplates:[],companionClickTrackingURLTemplates:[],trackingEvents:{}}}(cr.parseAttributes(e));t.htmlResources=cr.childrenByName(e,"HTMLResource").reduce(((e,t)=>{const n=cr.parseNodeText(t);return n?e.concat(n):e}),[]),t.iframeResources=cr.childrenByName(e,"IFrameResource").reduce(((e,t)=>{const n=cr.parseNodeText(t);return n?e.concat(n):e}),[]),t.staticResources=cr.childrenByName(e,"StaticResource").reduce(((e,t)=>{const n=cr.parseNodeText(t);return n?e.concat({url:n,creativeType:t.getAttribute("creativeType")||null}):e}),[]),t.altText=cr.parseNodeText(cr.childByName(e,"AltText"))||null;const n=cr.childByName(e,"TrackingEvents");n&&cr.childrenByName(n,"Tracking").forEach((e=>{const n=e.getAttribute("event"),i=cr.parseNodeText(e);n&&i&&(Array.isArray(t.trackingEvents[n])||(t.trackingEvents[n]=[]),t.trackingEvents[n].push(i))})),t.companionClickTrackingURLTemplates=cr.childrenByName(e,"CompanionClickTracking").map((e=>({id:e.getAttribute("id")||null,url:cr.parseNodeText(e)}))),t.companionClickThroughURLTemplate=cr.parseNodeText(cr.childByName(e,"CompanionClickThrough"))||null,t.companionClickThroughURLTemplates=cr.childrenByName(cr.childByName(e,"CompanionClickThroughs"),"CompanionClickThrough").map((e=>cr.parseNodeText(e)));const i=cr.childByName(e,"AdParameters");return i&&(t.adParameters=cr.parseNodeText(i),t.xmlEncoded=i.getAttribute("xmlEncoded")||null),t})),n}function pr(e,t){let n;const i=function(e={}){const{id:t,adId:n,sequence:i,apiFramework:r}=Zi(e);return{id:t,adId:n,sequence:i,apiFramework:r,type:"linear",duration:0,skipDelay:null,mediaFiles:[],mezzanine:null,interactiveCreativeFile:null,closedCaptionFiles:[],videoClickThroughURLTemplate:null,videoClickTrackingURLTemplates:[],videoCustomClickURLTemplates:[],adParameters:null,icons:[],trackingEvents:{}}}(t);i.duration=cr.parseDuration(cr.parseNodeText(cr.childByName(e,"Duration")));const r=e.getAttribute("skipoffset");if(null==r)i.skipDelay=null;else if("%"===r.charAt(r.length-1)&&-1!==i.duration){const e=parseInt(r,10);i.skipDelay=i.duration*(e/100)}else i.skipDelay=cr.parseDuration(r);const o=cr.childByName(e,"VideoClicks");if(o){const e=cr.childByName(o,"ClickThrough");i.videoClickThroughURLTemplate=e?{id:e.getAttribute("id")||null,url:cr.parseNodeText(e)}:null,cr.childrenByName(o,"ClickTracking").forEach((e=>{i.videoClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:cr.parseNodeText(e)})})),cr.childrenByName(o,"CustomClick").forEach((e=>{i.videoCustomClickURLTemplates.push({id:e.getAttribute("id")||null,url:cr.parseNodeText(e)})}))}const s=cr.childByName(e,"AdParameters");return s&&(i.adParameters=cr.parseNodeText(s)),cr.childrenByName(e,"TrackingEvents").forEach((e=>{cr.childrenByName(e,"Tracking").forEach((e=>{let t=e.getAttribute("event");const r=cr.parseNodeText(e);if(t&&r){if("progress"===t){if(n=e.getAttribute("offset"),!n)return;t="%"===n.charAt(n.length-1)?`progress-${n}`:`progress-${Math.round(cr.parseDuration(n))}`}Array.isArray(i.trackingEvents[t])||(i.trackingEvents[t]=[]),i.trackingEvents[t].push(r)}}))})),cr.childrenByName(e,"MediaFiles").forEach((e=>{cr.childrenByName(e,"MediaFile").forEach((e=>{i.mediaFiles.push(function(e){const t={id:null,fileURL:null,fileSize:0,deliveryType:"progressive",mimeType:null,mediaType:null,codec:null,bitrate:0,minBitrate:0,maxBitrate:0,width:0,height:0,apiFramework:null,scalable:null,maintainAspectRatio:null};t.id=e.getAttribute("id"),t.fileURL=cr.parseNodeText(e),t.deliveryType=e.getAttribute("delivery"),t.codec=e.getAttribute("codec"),t.mimeType=e.getAttribute("type"),t.mediaType=e.getAttribute("mediaType")||"2D",t.apiFramework=e.getAttribute("apiFramework"),t.fileSize=parseInt(e.getAttribute("fileSize")||0),t.bitrate=parseInt(e.getAttribute("bitrate")||0),t.minBitrate=parseInt(e.getAttribute("minBitrate")||0),t.maxBitrate=parseInt(e.getAttribute("maxBitrate")||0),t.width=parseInt(e.getAttribute("width")||0),t.height=parseInt(e.getAttribute("height")||0);const n=e.getAttribute("scalable");n&&"string"==typeof n&&(t.scalable=cr.parseBoolean(n));const i=e.getAttribute("maintainAspectRatio");i&&"string"==typeof i&&(t.maintainAspectRatio=cr.parseBoolean(i));return t}(e))}))})),i}function yr(e){const t=[];return e.forEach((e=>{const n=hr(e);n&&t.push(n)})),t}function hr(e){if("#comment"===e.nodeName)return null;const t={name:null,value:null,attributes:{},children:[]},n=e.attributes,i=e.childNodes;if(t.name=e.nodeName,e.attributes)for(const e in n)if(n.hasOwnProperty(e)){const i=n[e];i.nodeName&&i.nodeValue&&(t.attributes[i.nodeName]=i.nodeValue)}for(const e in i)if(i.hasOwnProperty(e)){const n=hr(i[e]);n&&t.children.push(n)}if(0===t.children.length||1===t.children.length&&["#cdata-section","#text"].indexOf(t.children[0].name)>=0){const n=cr.parseNodeText(e);""!==n&&(t.value=n),t.children=[]}return null===(r=t).value&&0===Object.keys(r.attributes).length&&0===r.children.length?null:t;var r}function mr(e){const t={banner:[],video:[],isVpaid:!1,hasVideo:null,vpaidParam:null};return e.forEach((e=>{const n={id:e.getAttribute("id")||null,adId:Er(e),sequence:e.getAttribute("sequence")||null,apiFramework:e.getAttribute("apiFramework")||null},i=[];let r;cr.childrenByName(e,"UniversalAdId").forEach((e=>{const t={idRegistry:e.getAttribute("idRegistry")||"unknown",value:cr.parseNodeText(e)};i.push(t)}));const o=cr.childByName(e,"CreativeExtensions");o&&(r=yr(cr.childrenByName(o,"CreativeExtension")));for(const o in e.childNodes){const s=e.childNodes[o];let a;switch(s.nodeName){case"Linear":a=pr(s,n);break;case"CompanionAds":a=dr(s,n)}a&&(i&&(a.universalAdIds=i),r&&(a.creativeExtensions=r),"linear"===a.type?(a.mediaFiles[0]&&a.mediaFiles[0].apiFramework&&"VPAID"===a.mediaFiles[0].apiFramework.toUpperCase()&&(t.isVpaid=!0,t.vpaidParam=a.adParameters),t.video.push(a),t.hasVideo=!0):t.banner.push(a))}})),t}function Er(e){return e.getAttribute("AdID")||e.getAttribute("adID")||e.getAttribute("adId")||null}const Tr={Wrapper:{subElements:["VASTAdTagURI","Impression"]},BlockedAdCategories:{attributes:["authority"]},InLine:{subElements:["AdSystem","AdTitle","Impression","AdServingId","Creatives"]},Category:{attributes:["authority"]},Verification:{oneOfinLineResources:["JavaScriptResource","ExecutableResource"],attributes:["vendor"]},UniversalAdId:{attributes:["idRegistry"]},JavaScriptResource:{attributes:["apiFramework","browserOptional"]},ExecutableResource:{attributes:["apiFramework","type"]},Tracking:{attributes:["event"]},Creatives:{subElements:["Creative"]},Creative:{subElements:["UniversalAdId"]},Linear:{subElements:["MediaFiles","Duration"]},MediaFiles:{subElements:["MediaFile"]},MediaFile:{attributes:["delivery","type","width","height"]},Mezzanine:{attributes:["delivery","type","width","height"]},NonLinear:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"],attributes:["width","height"]},Companion:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"],attributes:["width","height"]},StaticResource:{attributes:["creativeType"]},Icons:{subElements:["Icon"]},Icon:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"]}};function _r(e,t){if(!Tr[e.nodeName]||!Tr[e.nodeName].attributes)return;const n=Tr[e.nodeName].attributes.filter((t=>!e.getAttribute(t)));n.length>0&&Ir({name:e.nodeName,parentName:e.parentNode.nodeName,attributes:n,subElements:void 0,oneOfResources:void 0},t)}function Nr(e,t,n){const i=Tr[e.nodeName],r=!n&&"Wrapper"!==e.nodeName;if(!i||r)return;if(i.subElements){const n=i.subElements.filter((t=>!cr.childByName(e,t)));n.length>0&&Ir({name:e.nodeName,parentName:e.parentNode.nodeName,subElements:n,attributes:void 0,oneOfResources:void 0},t)}if(!n||!i.oneOfinLineResources)return;i.oneOfinLineResources.some((t=>cr.childByName(e,t)))||Ir({name:e.nodeName,parentName:e.parentNode.nodeName,attributes:void 0,subElements:void 0,oneOfResources:i.oneOfinLineResources},t)}function Lr(e){return e.children&&0!==e.children.length}function Ir({name:e,parentName:t,attributes:n,subElements:i,oneOfResources:r},o){let s=`Element '${e}'`;s+=n?` missing required attribute(s) '${n.join(", ")}' `:i?` missing required sub element(s) '${i.join(", ")}' `:r?` must provide one of the following '${r.join(", ")}' `:" is empty",o("VAST-warning",{message:s,parentElement:t,specVersion:4.1})}const Mr={verifyRequiredValues:function e(t,n,i){if(t&&t.nodeName)if("InLine"===t.nodeName&&(i=!0),_r(t,n),Lr(t)){Nr(t,n,i);for(let r=0;r<t.children.length;r++)e(t.children[r],n,i)}else 0===cr.parseNodeText(t).length&&Ir({name:t.nodeName,parentName:t.parentNode.nodeName,attributes:void 0,subElements:void 0,oneOfResources:void 0},n)},hasSubElements:Lr,emitMissingValueWarning:Ir,verifyRequiredAttributes:_r,verifyRequiredSubElements:Nr};function Or(e,t,{followAdditionalWrappers:n}){n=n||void 0;const i=e.childNodes;for(const r in i){const o=i[r];if(-1!==["Wrapper","InLine"].indexOf(o.nodeName)&&("Wrapper"!==o.nodeName||!1!==n)){if(cr.copyNodeAttribute("id",e,o),cr.copyNodeAttribute("sequence",e,o),cr.copyNodeAttribute("adType",e,o),"Wrapper"===o.nodeName)return{ad:Cr(o,t),type:"WRAPPER"};if("InLine"===o.nodeName)return{ad:Ar(o,t),type:"INLINE"}}}}function Ar(e,t){return gr(e,t)}function gr(e,t){let n=[];t&&Mr.verifyRequiredValues(e,t);const i=e.childNodes,r=function(e={}){return{id:e.id||null,sequence:e.sequence||null,adType:e.adType||null,viewableImpression:[],system:null,title:null,description:null,advertiser:null,errorURLTemplates:[],impressionURLTemplates:[],creatives:{banner:[],video:[],isVpaid:!1,hasVideo:null,vpaidParam:null},extensions:[],adVerifications:[]}}(cr.parseAttributes(e));for(const e in i){const t=i[e];switch(t.nodeName){case"Error":r.errorURLTemplates.push(cr.parseNodeText(t));break;case"Impression":r.impressionURLTemplates.push({id:t.getAttribute("id")||null,url:cr.parseNodeText(t)});break;case"Creatives":r.creatives=mr(cr.childrenByName(t,"Creative"));break;case"Extensions":{const e=cr.childrenByName(t,"Extension");r.extensions=yr(e),r.adVerifications.length||(n=Rr(e));break}case"AdVerifications":r.adVerifications=Sr(cr.childrenByName(t,"Verification"));break;case"AdSystem":r.system={value:cr.parseNodeText(t),version:t.getAttribute("version")||null};break;case"AdTitle":r.title=cr.parseNodeText(t);break;case"ViewableImpression":r.viewableImpression.push(fr(t));break;case"Description":r.description=cr.parseNodeText(t);break;case"Advertiser":r.advertiser={id:t.getAttribute("id")||null,value:cr.parseNodeText(t)}}}return r}function Cr(e,t){const n=gr(e,t);e.getAttribute("followAdditionalWrappers"),e.getAttribute("fallbackOnNoAd");let i=cr.childByName(e,"VASTAdTagURI");i?n.nextWrapperURL=cr.parseNodeText(i):(i=cr.childByName(e,"VASTAdTagURL"),i&&(n.nextWrapperURL=cr.parseNodeText(cr.childByName(i,"URL"))));for(const e in n.creatives)n.creatives[e]&&"object"==typeof n.creatives[e]&&wr(n,n.creatives[e]);if(n.nextWrapperURL)return n}function wr(e,t){t.forEach((t=>{if(-1!==["linear","nonlinear"].indexOf(t.type)){if(t.trackingEvents){e.trackingEvents||(e.trackingEvents={}),e.trackingEvents[t.type]||(e.trackingEvents[t.type]={});for(const n in t.trackingEvents){const i=t.trackingEvents[n];Array.isArray(e.trackingEvents[t.type][n])||(e.trackingEvents[t.type][n]=[]),i.forEach((i=>{e.trackingEvents[t.type][n].push(i)}))}}t.videoClickTrackingURLTemplates&&(Array.isArray(e.videoClickTrackingURLTemplates)||(e.videoClickTrackingURLTemplates=[]),t.videoClickTrackingURLTemplates.forEach((t=>{e.videoClickTrackingURLTemplates.push(t)}))),t.videoClickThroughURLTemplate&&(e.videoClickThroughURLTemplate=t.videoClickThroughURLTemplate),t.videoCustomClickURLTemplates&&(Array.isArray(e.videoCustomClickURLTemplates)||(e.videoCustomClickURLTemplates=[]),t.videoCustomClickURLTemplates.forEach((t=>{e.videoCustomClickURLTemplates.push(t)})))}}))}function Sr(e){const t=[];return e.forEach((e=>{const n={resource:null,vendor:null,browserOptional:!1,apiFramework:null,type:null,parameters:null,trackingEvents:{}},i=e.childNodes;cr.assignAttributes(e.attributes,n);for(const e in i){const t=i[e];switch(t.nodeName){case"JavaScriptResource":case"ExecutableResource":n.resource=cr.parseNodeText(t),cr.assignAttributes(t.attributes,n);break;case"VerificationParameters":n.parameters=cr.parseNodeText(t)}}const r=cr.childByName(e,"TrackingEvents");r&&cr.childrenByName(r,"Tracking").forEach((e=>{const t=e.getAttribute("event"),i=cr.parseNodeText(e);t&&i&&(Array.isArray(n.trackingEvents[t])||(n.trackingEvents[t]=[]),n.trackingEvents[t].push(i))})),t.push(n)})),t}function Rr(e){let t=null,n=[];return e.some((e=>t=cr.childByName(e,"AdVerifications"))),t&&(n=Sr(cr.childrenByName(t,"Verification"))),n}function fr(e){const t={};t.id=e.getAttribute("id")||null;const n=e.childNodes;for(const e in n){const i=n[e],r=i.nodeName,o=cr.parseNodeText(i);if(("Viewable"===r||"NotViewable"===r||"ViewUndetermined"===r)&&o){const e=r.toLowerCase();Array.isArray(t[e])||(t[e]=[]),t[e].push(o)}}return t}const vr={get:function(e,t,n){n(new Error("Please bundle the library for node to use the node urlHandler"))}};function Dr(){try{const e=new window.XMLHttpRequest;return"withCredentials"in e?e:null}catch(e){return null}}function jr(e,t,n){const i=n?408:e.status,r=n?`XHRURLHandler: Request timed out after ${e.timeout} ms (${i})`:`XHRURLHandler: ${e.statusText} (${i})`;t(new Error(r),null,{statusCode:i})}const xr={get:function(e,t,n){if("https:"===window.location.protocol&&0===e.indexOf("http://"))return n(new Error("XHRURLHandler: Cannot go from HTTPS to HTTP."));try{const i=Dr();i.open("GET",e),i.timeout=t.timeout||mi,i.withCredentials=t.withCredentials||!1,i.overrideMimeType&&i.overrideMimeType("text/xml"),i.onload=()=>function(e,t){200===e.status?t(null,e.responseXML,{byteLength:e.response.length,statusCode:e.status}):jr(e,t,!1)}(i,n),i.onerror=()=>jr(i,n,!1),i.onabort=()=>jr(i,n,!1),i.ontimeout=()=>jr(i,n,!0),i.send()}catch(e){n(new Error("XHRURLHandler: Unexpected error"))}},supported:function(){return!!Dr()}};const br={get:function(e,t,n){return n||("function"==typeof t&&(n=t),t={}),e=function(e){let t=window.ONEAD;switch(!0){case e.indexOf(dt)>-1:case e.indexOf(pt)>-1:e=t.liadId&&""!==t.liadId?(e=e.replace("{LIADID}",t.liadId)).replace("[LIADID]",t.liadId):""}return e}(e),"undefined"==typeof window||null===window?vr.get(e,t,n):xr.supported()?xr.get(e,t,n):n(new Error("Current context is not supported by any of the default URLHandlers. Please provide a custom URLHandler"))}};let Pr=0,Br=0;const kr=(e,t)=>{if(!e||!t||e<=0||t<=0)return;Br=(Br*Pr+8*e/t)/++Pr},Ur={ERRORCODE:900,extensions:[]};class Fr extends class{constructor(){this._handlers=[]}on(e,t){if("function"!=typeof t)throw new TypeError("The handler argument must be of type Function. Received type "+typeof t);if(!e)throw new TypeError("The event argument must be of type String. Received type "+typeof e);return this._handlers.push({event:e,handler:t}),this}once(e,t){return this.on(e,function(e,t,n){const i={fired:!1,wrapFn:void 0};function r(...r){i.fired||(e.off(t,i.wrapFn),i.fired=!0,n.bind(e)(...r))}return i.wrapFn=r,r}(this,e,t))}off(e,t){return this._handlers=this._handlers.filter((n=>n.event!==e||n.handler!==t)),this}emit(e,...t){let n=!1;return this._handlers.forEach((i=>{"*"===i.event&&(n=!0,i.handler(e,...t)),i.event===e&&(n=!0,i.handler(...t))})),n}removeAllListeners(e){return e?(this._handlers=this._handlers.filter((t=>t.event!==e)),this):(this._handlers=[],this)}listenerCount(e){return this._handlers.filter((t=>t.event===e)).length}listeners(e){return this._handlers.reduce(((t,n)=>(n.event===e&&t.push(n.handler),t)),[])}eventNames(){return this._handlers.map((e=>e.event))}}{constructor(){super(),this.remainingAds=[],this.parentURLs=[],this.errorURLTemplates=[],this.rootErrorURLTemplates=[],this.maxWrapperDepth=null,this.URLTemplateFilters=[],this.fetchingOptions={},this.parsingOptions={}}addURLTemplateFilter(e){"function"==typeof e&&this.URLTemplateFilters.push(e)}removeURLTemplateFilter(){this.URLTemplateFilters.pop()}countURLTemplateFilters(){return this.URLTemplateFilters.length}clearURLTemplateFilters(){this.URLTemplateFilters=[]}trackVastError(e,t,...n){this.emit("VAST-error",Object.assign({},Ur,t,...n)),lr.track(e,t,{})}getErrorURLTemplates(){return this.rootErrorURLTemplates.concat(this.errorURLTemplates)}getEstimatedBitrate(){return Br}fetchVAST(e,t=0,n=null,i=null){return new Promise(((r,o)=>{this.URLTemplateFilters.forEach((t=>{e=t(e)})),this.parentURLs.push(e);const s=Date.now();this.emit("VAST-resolving",{url:e,previousUrl:n,wrapperDepth:t,maxWrapperDepth:this.maxWrapperDepth,timeout:this.fetchingOptions.timeout,wrapperAd:i}),this.urlHandler.get(e,this.fetchingOptions,((i,a,l={})=>{const u=Math.round(Date.now()-s),c=Object.assign({url:e,previousUrl:n,wrapperDepth:t,error:i,duration:u},l);this.emit("VAST-resolved",c),kr(l.byteLength,u),i?o(i):r(a)}))}))}initParsingStatus(e={}){this.errorURLTemplates=[],this.fetchingOptions={timeout:e.timeout||mi,withCredentials:e.withCredentials},this.maxWrapperDepth=e.wrapperLimit||10,this.parentURLs=[],this.remainingAds=[],this.rootErrorURLTemplates=[],this.rootURL="",this.urlHandler=e.urlHandler||e.urlhandler||br,this.vastVersion=null,kr(e.byteLength,e.requestDuration)}getRemainingAds(e){if(0===this.remainingAds.length)return Promise.reject(new Error("No more ads are available for the given VAST"));const t=e?lr.flatten(this.remainingAds):this.remainingAds.shift();return this.errorURLTemplates=[],this.parentURLs=[],this.resolveAds(t,{wrapperDepth:0,previousUrl:void 0,url:this.rootURL}).then((e=>this.buildVASTResponse(e)))}getAndParseVAST(e,t){return t=t||void 0,this.initParsingStatus(t),this.URLTemplateFilters.forEach((t=>{e=t(e)})),this.rootURL=e,this.fetchVAST(e).then((n=>(t.previousUrl=e,t.isRootVAST=!0,t.url=e,this.parse(n,t).then((e=>this.buildVASTResponse(e))))))}parseVAST(e,t){return this.initParsingStatus(t),(t=t||{}).isRootVAST=!0,this.parse(e,t).then((e=>this.buildVASTResponse(e)))}buildVASTResponse(e){const t=function({ads:e,errorURLTemplates:t,version:n}){return{ads:e||[],errorURLTemplates:t||[],version:n||null}}({ads:e,errorURLTemplates:this.getErrorURLTemplates(),version:this.vastVersion});return this.completeWrapperResolving(t),t}parseVastXml(e,{isRootVAST:t=!1,url:n=null,wrapperDepth:i=0,followAdditionalWrappers:r}){if(!e||!e.documentElement||"VAST"!==e.documentElement.nodeName)throw this.emit("VAST-ad-parsed",{type:"ERROR",url:n,wrapperDepth:i}),new Error("Invalid VAST XMLDocument");const o=[],s=e.documentElement.childNodes,a=e.documentElement.getAttribute("version");t&&a&&(this.vastVersion=a);for(const e in s){const l=s[e];if("Error"===l.nodeName){const e=cr.parseNodeText(l);t?this.rootErrorURLTemplates.push(e):this.errorURLTemplates.push(e)}else if("Ad"===l.nodeName){const e=Or(l,this.emit.bind(this),{followAdditionalWrappers:r});e.ad?(o.push(e.ad),this.emit("VAST-ad-parsed",{type:e.type,url:n,wrapperDepth:i,adIndex:o.length-1,vastVersion:a})):this.trackVastError(this.getErrorURLTemplates(),{ERRORCODE:101})}}return o}parse(e,{url:t=null,resolveAll:n=!0,wrapperSequence:i=null,previousUrl:r=null,wrapperDepth:o=0,isRootVAST:s=!1,followAdditionalWrappers:a,allowMultipleAds:l}={}){let u=[];try{u=this.parseVastXml(e,{isRootVAST:s,url:t,wrapperDepth:o,followAdditionalWrappers:a})}catch(e){return Promise.reject(e)}return 1===u.length&&null!=i&&(u[0].sequence=i),!1===n&&(this.remainingAds=cr.splitVAST(u),u=this.remainingAds.shift()),this.resolveAds(u,{wrapperDepth:o,previousUrl:r,url:t})}resolveAds(e=[],{wrapperDepth:t,previousUrl:n,url:i}){const r=[];return e.forEach((e=>{const n=this.resolveWrappers(e,t,i);r.push(n)})),Promise.all(r).then((e=>{const r=lr.flatten(e);if(!r&&this.remainingAds.length>0){const e=this.remainingAds.shift();return this.resolveAds(e,{wrapperDepth:t,previousUrl:n,url:i})}return r}))}resolveWrappers(e,t,n){return new Promise((i=>{if(t++,!e.nextWrapperURL)return delete e.nextWrapperURL,i(e);if(t>=this.maxWrapperDepth||-1!==this.parentURLs.indexOf(e.nextWrapperURL))return e.errorCode=302,delete e.nextWrapperURL,i(e);e.nextWrapperURL=cr.resolveVastAdTagURI(e.nextWrapperURL,n),this.URLTemplateFilters.forEach((t=>{e.nextWrapperURL=t(e.nextWrapperURL)}));const r=e.sequence;this.fetchVAST(e.nextWrapperURL,t,n,e).then((o=>this.parse(o,{url:e.nextWrapperURL,previousUrl:n,wrapperSequence:r,wrapperDepth:t,followAdditionalWrappers:e.followAdditionalWrappers}).then((t=>{if(delete e.nextWrapperURL,0===t.length)return e.creatives={},i(e);t.forEach((t=>{t&&cr.mergeWrapperAdData(t,e)})),i(t)})))).catch((t=>{e.errorCode=301,e.errorMessage=t.message,i(e)}))}))}completeWrapperResolving(e){if(0===e.ads.length)this.trackVastError(e.errorURLTemplates,{ERRORCODE:303});else for(let t=e.ads.length-1;t>=0;t--){const n=e.ads[t];(n.errorCode||0===n.creatives.banner.length&&0===n.creatives.video.length)&&(this.trackVastError(n.errorURLTemplates.concat(e.errorURLTemplates),{ERRORCODE:n.errorCode||303},{ERRORMESSAGE:n.errorMessage||""},{extensions:n.extensions},{system:n.system}),e.ads.splice(t,1))}}}class Hr{constructor(e,t,n){this.cappingFreeLunch=e||0,this.cappingMinimumTimeInterval=t||0,this.defaultOptions={withCredentials:!1,timeout:0},this.vastParser=new Fr,this.storage=n||new Ki,void 0===this.lastSuccessfulAd&&(this.lastSuccessfulAd=0),void 0===this.totalCalls&&(this.totalCalls=0),void 0===this.totalCallsTimeout&&(this.totalCallsTimeout=0)}getParser(){return this.vastParser}get lastSuccessfulAd(){return this.storage.getItem("vast-client-last-successful-ad")}set lastSuccessfulAd(e){this.storage.setItem("vast-client-last-successful-ad",e)}get totalCalls(){return this.storage.getItem("vast-client-total-calls")}set totalCalls(e){this.storage.setItem("vast-client-total-calls",e)}get totalCallsTimeout(){return this.storage.getItem("vast-client-total-calls-timeout")}set totalCallsTimeout(e){this.storage.setItem("vast-client-total-calls-timeout",e)}hasRemainingAds(){return this.vastParser.remainingAds.length>0}getNextAds(e){return this.vastParser.getRemainingAds(e)}get(e,t={}){const n=Date.now();return(t=Object.assign({},this.defaultOptions,t)).hasOwnProperty("resolveAll")||(t.resolveAll=!1),this.totalCallsTimeout<n?(this.totalCalls=1,this.totalCallsTimeout=n+36e5):this.totalCalls++,new Promise(((i,r)=>{if(this.cappingFreeLunch>=this.totalCalls)return r(new Error(`VAST call canceled – FreeLunch capping not reached yet ${this.totalCalls}/${this.cappingFreeLunch}`));const o=n-this.lastSuccessfulAd;if(o<0)this.lastSuccessfulAd=0;else if(o<this.cappingMinimumTimeInterval)return r(new Error(`VAST call canceled – (${this.cappingMinimumTimeInterval})ms minimum interval reached`));this.vastParser.getAndParseVAST(e,t).then((e=>i(e))).catch((e=>r(e)))}))}}var Vr=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};function zr(e,t){switch(e){case Ct.IN_STREAM:return function(e){switch(e){case wt.IS_DF:return ei;case wt.IS_INSYNC:return ni;case wt.IS_FOLLOW_DF:return ti;case wt.IS_FOLLOW_INSYNC:return ii;default:return null}}(t);case Ct.IR:return function(e){switch(e){case wt.IS_DF:return ri;case wt.IS_FOLLOW_DF:return oi;default:return null}}(t);case Ct.MIR:return function(e){switch(e){case wt.INSTANT:return kt;case wt.TRANSFORMER:return vt;case wt.TRANSFORMER_STICKY:return jt;case wt.TRANSFORMER_SWAP:return xt;case wt.TRANSFORMER_SOCIAL:return bt;case wt.SCRATCH:return Pt;case wt.SCRATCH_BNB:return Bt;case wt.PAGE:return Zt;case wt.PAGE_V2:return $t;case wt.PAGE_BANNER:return en;case wt.PAGE_BANNER_V2:return tn;case wt.PAGE_LINKTREE:return Jt;case wt.POSTER:return nn;case wt.SCROLLER:return Ft;case wt.SCROLLER_V2:return Ht;case wt.VERTICAL_VIDEOBANNER:return Qt;case wt.VERTICAL_SHOW:return qt;case wt.SHOW:return un;case wt.SCROLLER_VERTICAL:return Vt;case wt.MOBILE:return Xt;case wt.VERTICAL:return zt;case wt.VERTICAL_V2:return Yt;case wt.VERTICAL_BANNER:return Gt;case wt.VERTICAL_BANNER_V2:return Wt;case wt.SKIRT:return Ut;case wt.STATIC:return rn;case wt.LANDSCAPE_ENGAGEMENT:return dn;case wt.FRAME_ENGAGEMENT:return pn;case wt.BNB:return Kt;case wt.STORY:return An;case wt.TRANSFORMER_GALLERY:return Dt;case wt.TAG:return cn;case wt.FLASH:return on;case wt.H5_320X480:return sn;case wt.H5_320X480_BANNER:return an;case wt.H5_320X480_VIDEO_BANNER:return ln;default:return null}}(t);case Ct.MIC:return function(e){switch(e){case wt.BOTTOM:return gn;case wt.BOTTOM_CLASSIC:return Rn;case wt.BOTTOM_CUBE:return Cn;case wt.BOTTOM_PEEK:return wn;case wt.BOTTOM_PEEK_BANNER:return Sn;case wt.BOTTOM_BANNER_640X273:return Zn;case wt.BOTTOM_CUBE_BANNER_640X273:return $n;case wt.BOTTOM_FLASH_V2:return fn;case wt.BOTTOM_FLASH_V2_BANNER_640X273:return Jn;case wt.BOTTOM_FLASH_BANNER:return qn;case wt.BOTTOM_GALLERY:return Wn;case wt.BOTTOM_GALLERY_BANNER:return Qn;case wt.BOTTOM_GALLERY_WEBGL:return Xn;case wt.BOTTOM_INSTANT:return Gn;case wt.BOTTOM_HIT:return Hn;case wt.BOTTOM_HIT_NF:return Vn;case wt.BOTTOM_GALLERY_ZOOM:return Kn;case wt.BOTTOM_HIT_VIDEO:return zn;case wt.BOTTOM_HIT_VIDEO_NF:return Yn;case wt.BOTTOM_FLASH_VIDEO:return vn;case wt.BOTTOM_REEL:return Dn;case wt.BOTTOM_REELS_V2:return jn;case wt.BOTTOM_STAR:return xn;case wt.BOTTOM_LOCATION:return bn;case wt.BOTTOM_LOCATION_GALLERY:return Pn;case wt.BOTTOM_LOCATION_VIDEO:return Bn;case wt.BOTTOM_LOCATION_DOOR_VIDEO:return kn;case wt.BOTTOM_FLASH_LOCATION:return Un;case wt.BOTTOM_FLASH_LOCATION_V2:return Fn;default:return null}}(t);case Ct.DPR:return si;case Ct.MPR:return ai;case Ct.APR:return li;case Ct.DSP:return ui;case Ct.MFS:return function(e){switch(e){case wt.FULLSCREEN_COVER:return yn;case wt.FULLSCREEN_COVER_BANNER:return hn;case wt.FULLSCREEN_COVER_VIDEO:return mn;case wt.FULLSCREEN_COVER_STORY:return Tn;case wt.FULLSCREEN_COVER_PLAY:return En;case wt.FULLSCREEN_COVER_SCRATCH:return _n;case wt.FULLSCREEN_COVER_POSTER:return Nn;case wt.FULLSCREEN_COVER_POSTER_VIDEO:return Ln;case wt.FULLSCREEN_FLASH_DRIVE_320:return In;case wt.FULLSCREEN_FLASH_DRIVE_300:return Mn;default:return null}}(t);case Ct.MS:return function(e){switch(e){case wt.BRAND_LIFT:case wt.BRAND_LIFT2:case wt.BRAND_LIFT3:return On;default:return null}}(t);default:return null}}function Yr(e,t,n,i){return`${e.replace(".zip","/index.html")}?isipIndex=${t}&uid=${n}&pid=${i}`}var Gr,Wr,Qr=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};class qr{constructor(e){this.hasMraid=!1,this.hasVideo=!1,this.appearOpening=!1,this.isVpaid=!1,this.isJson=!1,this.isIR_DF=!1,this.isDesktop=!1,this._adTotalTime=0,this.trackingCodes=[],this._jsonSource={},this.adDisplayTimeParam={slope:1,adjust:0},this._volume=0,this._isEventImpSend=!1,this._isStoryUserClick=!1,this._isSafeFramePreview=!1,this.autoReplay=!1,this._adIsExposed=!1,this._adIsVisible=!1,this.keywords={},this.oneadVastTest=!1,this._videoSource={src:[],poster:"",click_link:"",cid:"",video_type:"",duration:0},this._emojiParam={title:"",icon:"",animate:""},this._eventCenter=e,this._envInfo=Ci.getInstance(),this._playerCenter=Gi.getInstance(),this._initData(),this._addListeners()}_initData(){this._materialHasTrackingEvent=!1,this.gotBannerClickTriggeredFromMaterial=!1,this._funcParamMapForKeyWord={}}_addListeners(){this._eventCenter.subscribe(Pi.materialEvent.NEED_SYNC_BEFORE_CLOSE,(()=>{this._materialHasTrackingEvent=!0,this._eventCenter.subscribe(Pi.materialEvent.SEND_BANNER_CLICK_TO_WARROOM,(()=>{this.gotBannerClickTriggeredFromMaterial=!0}),1)}))}initDataByExternalParam(e){var t,n,i;return Qr(this,void 0,void 0,(function*(){this.oneadVastTest=window.ONEAD?window.ONEAD.VastTest:e.VastTest,this.pid=e.pid,this.uid=e.uid,this._ctid=e.ct_id,this._pmId=e.pm_id,this._advId=e.adv_id,this._campId=e.camp_id,this._exclude=e.exclude,this._oneadObj=e.oneadObj,this.isipIndex=e.isip_index,this._isSafeFrame=e.isSafeFrame,this.isVast="true"===e.is_vast,this.isJson=void 0!==e.l_json,this.appearOpening=e.appearOpening,this._isRon=e.ct_id===St.RON,this.trackUrl=this.oneadVastTest?e.tracking:e.trackUrl,this.engCountUrl=void 0!==e.l_json?e.l_json.eng:"",this._hasSfGeomApi=null===(n=null===(t=window.$sf)||void 0===t?void 0:t.ext)||void 0===n?void 0:n.geom(),this.reporting=new Yi(this),this.isDesktop=function(e){switch(e){case Ct.IN_STREAM:case Ct.IR:case Ct.DPF:return!0;default:return!1}}(e.play_mode),this._adFormat=zr(e.play_mode,e.player_type),this.returnControlToPublish=e.returnControlToPublish,this._videoEndWrapperDisplayType=function(e,t){let n;return n=e?yi.BOTH:yi.NONE,n}(this.isDesktop,this.isVast),qr.oid=e.oid,qr.isSafeFrame=e.isSafeFrame,qr.dataCenterArr_[e.isip_index]=this,Si.isip_index=this.isipIndex,e.clientSetupParam&&(this._slotId=e.clientSetupParam.slotId,this._dfpConfig=e.clientSetupParam.dfpConfig,this._acc=e.clientSetupParam.acc),this._slotElement=(null===(i=null==e?void 0:e.clientSetupParam)||void 0===i?void 0:i.slotElement)?e.clientSetupParam.slotElement:this._getSlotElement(e.play_mode),this._isSafeFramePreview=e.clientSetupParam?void 0!==e.clientSetupParam.noExternal:this.isSafeFramePreview,this._setupLocationHref(e.clientSetupParam),this._playerCenter.checkHasIrPlus(e.player_type,e.play_mode)}))}setKeyWordsStytem(){let e="";e=this.lXml?function(e,t,n){if(e.querySelector(t)){const i=e.querySelector(t);return n?eo.isValid(i.getAttribute(n)).value:eo.isValid(i.textContent).value}}(this.lXml,"body")||"":this.lJson.xml.linkXml.body||"",this.keywords={[Wi.HIDE_TIPS]:!1,[Wi.LANDSCAPE]:!1,[Wi.ONLY_VIDEO]:!1,[Wi.ONLY_BANNER]:!1,[Wi.HIDE_FLASH_CLOSE_BTN]:!1,[Wi.CLOSE_AREA_SET]:!1,[Wi.IAB_IMPRESSION]:!1,[Wi.USE_GALLERY_LITE]:!1,[Wi.HIDE_PLAY_BUTTON]:!1,[Wi.HIDE_REPLAY_MORE]:!1,[Wi.STOP_IN_LOOP_LAST]:!1,[Wi.HIDE_VOLUME_BUTTON]:!1,[Wi.PREROAD_LANDINGPAGE]:!1,[Wi.IOS_USE_HYBRID_VIDEO]:!1,[Wi.OPEN_URL_WITH_ASSIGN]:!1,[Wi.PAGE_CLICK_IN_SIGHT_ONLY]:!1,[Wi.USE_OLD_STYLE_PLAY_BUTTON]:!1,[Wi.LISTEN_CLICK_ON_BANNER_IFRAME]:!1,[Wi.PAGE_CLICK_IN_SIGHT_AFTERWARD]:!1,[Wi.SHOW_TEMP_INFO]:!1,[Wi.SHOW_TODAYTEMP_INFO]:!1,[Wi.SHOW_HUMI_INFO]:!1,[Wi.SHOW_AQI_INFO]:!1,[Wi.SHOW_UVI_INFO]:!1,[Wi.SEND_BY_FETCH]:!1,[Wi.NEW_UI]:!1,[Wi.DOCUMENT_CLICK]:!1,[Wi.USE_CPC_HEIGHT]:!1};const t=new Qi;this.keywords=t.setKeyword(this.keywords,e,this)}vastSetupData(e){return Qr(this,void 0,void 0,(function*(){const t=e.vast_list[0].vast_url;if(this.vastAdInfo=yield function(e){return Vr(this,void 0,void 0,(function*(){return(new Hr).get(e).then((e=>{if(0===e.ads.length)throw new Error("vast ad is empty");return e.ads[0]})).catch((e=>{var t;const n=window._ONEAD;return(null===(t=null==n?void 0:n.pub)||void 0===t?void 0:t.queryAdCallback)&&n.pub.queryAdCallback({param:null}),{errorMessage:e.toString()}}))}))}(t),this.vastAdInfo.errorMessage)return;let n=this.vastAdInfo.creatives,i={},r={linkXml:{tracking_code:void 0}};if(this.vastAdInfo.creatives.isVpaid){const e=this.vastAdInfo.creatives.vpaidParam,t=JSON.parse(e);i=t.xml,r=t.xml,n=this.vastAdInfo.creatives}else{for(const e of this.vastAdInfo.creatives.video)if("linear"===e.type){i={linkXml:{defaultURL:void 0,clickURL:e.videoClickThroughURLTemplate?e.videoClickThroughURLTemplate.url:""},videos:{video:{videoURL_mp4:{content:"","-format":e.mediaFiles[0].mimeType},videoURL_mp4_1200k:"",duration:e.duration}}};for(const e of this.vastAdInfo.creatives.video[0].mediaFiles)1200===e.bitrate?i.videos.video.videoURL_mp4_1200k=e.fileURL:i.videos.video.videoURL_mp4.content=e.fileURL}const e=this.vastAdInfo.impressionURLTemplates;if(0===e.length)r.linkXml.tracking_code="";else{r.linkXml.tracking_code={code:[]};for(const t of e){const e={"#content":t.url,event_type:"impression","-format":"pixel"};r.linkXml.tracking_code.code.push(e)}}}e.l_json&&this._setupShowIdentity(e.l_json.xml),this._setupBannerData(n),this.playMode!==Ct.MS&&this._setupImpPixelCodes(r),this._setupVideoSource(i)}))}static getInstanceByIsipIndex(e){return qr.dataCenterArr_[e]}dataSetup(e){var t;return Qr(this,void 0,void 0,(function*(){if(this.guid=e.guid,this.lJson=e.l_json,this._playMode=e.play_mode,this._playerType=e.player_type,this.isipIndex=e.isipIndex||e.isip_index,this.isIR_DF=e.play_mode===Ct.IR,this.fp=e.oneadObj?e.oneadObj.fp:"",this.enc=e.oneadObj?e.oneadObj.enc:(null===(t=window._ONEAD.pub)||void 0===t?void 0:t.enc)||"",this._isDF=this._playerType.indexOf("DF")>-1,this.oneadVastTest||!this.lJson||this.isVast)if(this.oneadVastTest||this.isVast){if(yield this.vastSetupData(e),this.vastAdInfo.errorMessage)return}else yield this.xmlSetupData(e);else{const t=e.l_json.xml;this.playerType!==wt.FULLSCREEN_FLASH_DRIVE_320&&this.playerType!==wt.FULLSCREEN_FLASH_DRIVE_300||this.setupTextData(t),this._setupBannerData(t),this._setupShowIdentity(t),this._setupVideoSource(t),this.playMode!==Ct.MS&&this._setupImpPixelCodes(t)}this.autoReplay=this.hasVideo,this.setKeyWordsStytem(),this.isDesktop&&(this.adWrapper=this.slotElement.firstChild,this._videoSize=function(e){const{_isDF:t,isLandscape:n,isOnlyBanner:i}=e,r={width:0,height:0};return r.width=t||!n&&!i?Rt:ft,r}({_isDF:this._isDF,isLandscape:this.isLandscape,isOnlyBanner:this.isOnlyBanner}),this._playerCenter.checkNeedToMinimizeAds(this._eventCenter))}))}xmlSetupData(e){return Qr(this,void 0,void 0,(function*(){yield fetch(e.l_url).then((e=>e.text())).then((e=>(new window.DOMParser).parseFromString(e,"text/xml"))).then((e=>{this.lXml=e;const t=e.querySelectorAll("companions")[0].children,n={companions:void 0};if(t.length>0){n.companions={companion:1===t.length?{}:[]};for(const e of t){const t={cid:e.querySelector("cid").textContent,imgURL:e.querySelector("imgURL").textContent,linkURLs:{linkURL:[]}},i=e.querySelector("linkURLs").children;for(const e of i){const n={"#content":e.textContent};t.linkURLs.linkURL.push(n)}"number"==typeof n.companions.companion.length?n.companions.companion.push(t):n.companions.companion=t}}const i=e.querySelector("videoURL_mp4");let r={};i&&(r={linkXml:{defaultURL:e.querySelector("defaultURL").textContent,clickURL:e.querySelector("clickURL").textContent},videos:{video:{videoURL_mp4:{content:e.querySelector("videoURL_mp4_800k").textContent,"-format":i.getAttribute("format")||"video"},videoURL_mp4_1200k:e.querySelector("videoURL_mp4_1200k").textContent,duration:e.querySelector("duration").textContent}}});const o=e.querySelectorAll("tracking_code code"),s={linkXml:{tracking_code:void 0}};if(0===o.length)s.linkXml.tracking_code="";else{s.linkXml.tracking_code={code:[]};for(const e of o){const t={"#content":e.textContent,event_type:e.getAttribute("event_type"),"-format":e.getAttribute("format")};s.linkXml.tracking_code.code.push(t)}}const a={linkXml:{show_identity:e.querySelectorAll("show_identity")[0].textContent}};this.playerType!==wt.FULLSCREEN_FLASH_DRIVE_320&&this.playerType!==wt.FULLSCREEN_FLASH_DRIVE_300||this.setupTextData(e),this._setupBannerData(n),this._setupVideoSource(r),this.playMode!==Ct.MS&&this._setupImpPixelCodes(s),this._setupShowIdentity(a)}))}))}setupTextData(e){const t={content:[]},n=[];if(this.isJson){if(e.text_contents.text_content.length)for(const t of e.text_contents.text_content)n.push(t);else{const t=e.text_contents.text_content;n.push(t)}t.content=n}else{for(let t=0;t<e.querySelectorAll("content").length;t++){const i={content:e.querySelectorAll("content")[t].textContent,countDown:{dueDayTime:"0",unit:""},linkURL:e.querySelectorAll("linkURL")[t].textContent,tid:e.querySelectorAll("tid")[t].textContent,title:e.querySelectorAll("title")[t].textContent};n.push(i)}t.content=n}this.textData=t}_setupBannerData(e){let t;if(!this.bannerDataInXml){let n,i,r,o,s,a;if(this.bannerDataInXml=[],this.isVast)for(const t of e.banner){const e=t.variations;for(const t of e){if(t.htmlResources[0]||t.iframeResources[0]||t.staticResources[0]){let e=(t.htmlResources[0]||t.iframeResources[0]||t.staticResources[0]).url;e=Yr(e,this.isipIndex,this.uid,this.pid);const n=t.companionClickThroughURLTemplate,i=[];for(const e of this.vastAdInfo.creatives.banner[0].variations[0].companionClickThroughURLTemplates)i.push(e);this.bannerDataInXml=this.bannerDataInXml||[],this.bannerDataInXml.push({cid:"-1",sourceUrl:e,isHtml:e.indexOf(".html")>-1,hasLink:"string"!=typeof n,width:t.width,height:t.height,linkUrls:i})}}}else if(t=e,n=t.companions,n){if(1===(void 0!==t.companions.companion[1]?Object.keys(t.companions.companion).length:1)){if(i=t.companions.companion.cid,o=[],t.companions.companion.linkURL)o.push(t.companions.companion.linkURL);else if(void 0===t.companions.companion.linkURLs.linkURL.length)o.push(t.companions.companion.linkURLs.linkURL["#content"]);else for(const e of t.companions.companion.linkURLs.linkURL)o.push(e["#content"]);r=t.companions.companion.imgURL,r.indexOf(".zip")>-1||r.indexOf(".html")>-1?(r=Yr(r,this.isipIndex,this.uid,this.pid),s=!0):(r=`${r}?uid=${this.uid}&pid=${this.pid}`,s=!1),a=!!eo.checkUrlIsAvaliable(o),this.bannerDataInXml.push({cid:i,sourceUrl:r,linkUrls:o,isHtml:s,hasLink:a,width:void 0,height:void 0})}else for(const e of t.companions.companion){if(i=e.cid,r=e.imgURL,o=[],void 0===e.linkURLs.linkURL.length)o.push(e.linkURLs.linkURL["#content"]);else for(const t of e.linkURLs.linkURL)o.push(t["#content"]);r.indexOf(".zip")>-1||r.indexOf(".html")>-1?(r=Yr(r,this.isipIndex,this.uid,this.pid),s=!0):(r=`${r}?uid=${this.uid}&pid=${this.pid}`,s=!1),a=!!eo.checkUrlIsAvaliable(o[0]),this.bannerDataInXml.push({cid:i,sourceUrl:r,linkUrls:o,isHtml:s,hasLink:a,width:void 0,height:void 0})}}}}setTaskCenter(e){this._taskCenter=e}getBannerDataByIndex(e){return e>=0?this.bannerDataInXml[e]:null}_setupShowIdentity(e){const t=e.linkXml.show_identity;this.identity="true"===t}_setupImpPixelCodes(e){let t;if(t=""===e.linkXml.tracking_code?[]:void 0!==e.linkXml.tracking_code.code.length?e.linkXml.tracking_code.code:[e.linkXml.tracking_code.code],t.length>0)for(const e of t)e["#content"].indexOf("http")>-1&&this.trackingCodes.push(e["#content"])}computeAdDisplayTime(){return new Promise(((e,t)=>{qr.adDisplayTime?e(qr.adDisplayTime):this._eventCenter.subscribe(Pi.events.CREATE_VIEW,(()=>{const n=performance.now(),i=.55*n/1e4,r=this.lXml.querySelector("body")?this.lXml.querySelector("body").textContent:"";""!==r&&(r.indexOf("display_s")>-1&&(this.adDisplayTimeParam.slope=parseFloat(r.split("display_s=")[1].split(",")[0])),r.indexOf("display_a")>-1&&(this.adDisplayTimeParam.adjust=1e3*parseFloat(r.split("display_a=")[1].split(",")[0]))),qr.adDisplayTime=n*i*this.adDisplayTimeParam.slope+this.adDisplayTimeParam.adjust,qr.adDisplayTime<1e3&&(qr.adDisplayTime=1e3),"number"==typeof qr.adDisplayTime?e(qr.adDisplayTime):t(new Error("[Error] Compute display time error."))}))}))}_setupVideoSource(e){try{if(e.videos){const t=e.linkXml,n=e.videos,i=t.defaultURL,r=t.clickURL,o=n?n.video.duration:0,s=[],a=n.video.videoURL_mp4_1200k,l=n.video.videoURL_mp4["#content"],u="video"===n.video.videoURL_mp4["-format"]?"video":"html";a&&s.push(a),s.push(l),this._videoSource={src:s,poster:i,click_link:r,cid:"-1",video_type:u,duration:o}}this.hasVideo=this.videoSource.src.length>0,this._adTotalTime=this._videoSource.duration}catch(e){}}getJsonSource(){return new Promise(((e,t)=>{this._jsonSource.files_index?e(this._jsonSource):(this._jsonSource.videoSrc=this.videoSource.src[0],this._jsonSource.videoSrc?eo.getJSON(this._jsonSource.videoSrc.replace("mp4","json")).then((t=>{for(const e in t)this._jsonSource[e]=t[e];e(this._jsonSource)})).catch((e=>t(e))):t(new Error("no mp4")))}))}vpaidSetupDataFromJson(e){switch(this._vpaidParam=e,this.guid=e.linkXml.guid,this.uid=+e.linkXml.UID,this.pid=+e.linkXml.PID,this._pmId=+e.linkXml.PmID,this._advId=+e.linkXml.AdvID,this._campId=+e.linkXml.CampID,this._playMode=e.linkXml.playerMode,this._playerType=e.linkXml.playerType,this.duration=+e.videos.video.duration,this._adTotalTime=this.duration,this._playMode){case Ct.MPR:this._adFormat=ai;break;case Ct.DPR:this._adFormat=si;break;case Ct.APR:this._adFormat=li}const t=this._vpaidParam.linkXml.body;t.indexOf("showTempInfo")>-1&&(this._showTempInfo=!0),t.indexOf("showTodayTempInfo")>-1&&(this._showTodayTempInfo=!0),t.indexOf("showHumiInfo")>-1&&(this._showHumiInfo=!0),t.indexOf("showAqiInfo")>-1&&(this._showAqiInfo=!0),t.indexOf("showUviInfo")>-1&&(this._showUviInfo=!0),"string"!=typeof e.linkXml.emojis&&(this._emojiParam.title=e.linkXml.emojis.emoji.name,this._emojiParam.icon=e.linkXml.emojis.emoji.button,this._emojiParam.animate=e.linkXml.emojis.emoji.animate)}_setupLocationHref(e){(null==e?void 0:e.locationHref)?this._locationHref=e.locationHref:this._locationHref=this._envInfo.scopeInfo.accessibleHighestWin.location.href}_getSlotElement(e){var t;const n=this._envInfo.scopeInfo.accessibleHighestWin,i=(null===(t=this.oneadObj)||void 0===t?void 0:t.slot_id[e])||this._slotId||"div-onead-ad";return n.document.getElementById(i)||document.getElementById(i)}_setProp(e,t){this[e]=t}_getProp(e){return this[e]}set params(e){this._params=e}get params(){return this._params}get materialHasTrackingEvent(){return this._materialHasTrackingEvent}get playerType(){return this._playerType}get playMode(){return this._playMode}get adTotalTime(){return this._adTotalTime}get videoSource(){return this._videoSource}get envInfo(){return this._envInfo}get adFormat(){return this._adFormat}get bannerSizeErrorRule(){return this.keywords[Wi.USE_FIRST_BANNER]}get taskCenter(){return this._taskCenter}get isOnlyBanner(){return this.keywords[Wi.ONLY_BANNER]||0===this.videoSource.src.length}get isCrossBanner(){return this.keywords[Wi.CROSS_BANNER]}get isOnlyVideo(){return this.keywords[Wi.ONLY_VIDEO]}get currentTime(){return this._currentTime=this._taskCenter._timeEventHandler._currentTime,this._currentTime<0&&(this._currentTime=0),this._currentTime}get videoEndWrapperDisplayType(){return this._videoEndWrapperDisplayType}get displayVideoEndWrapper(){return this._videoEndWrapperDisplayType>0}get useOldStylePlayButton(){return this.keywords[Wi.USE_OLD_STYLE_PLAY_BUTTON]}get advId(){return this._advId}get campId(){return this._campId}get pmId(){return this._pmId}get isDF(){return this._isDF}get isLandscape(){return this.keywords[Wi.LANDSCAPE]}get videoSize(){return this._videoSize}get libCustomSetting(){let e;try{e=this._envInfo.scopeInfo.accessibleHighestWin.ONEADs[this.isipIndex].customSetting}catch(t){e=void 0}return e}get slotElement(){return this._slotElement}get isRon(){return this._isRon}get isHideVolumeButton(){return this.keywords[Wi.HIDE_VOLUME_BUTTON]}get isHidePlayButton(){return this.keywords[Wi.HIDE_PLAY_BUTTON]}get _isipIndex(){return this.isipIndex}get dfpConfig(){return this._dfpConfig}get oneadObj(){return this._oneadObj}get isSafeFrame(){return this._isSafeFrame}get hasSfGeomApi(){return this._hasSfGeomApi}get acc(){return this._acc||""}get locationHref(){return this._locationHref}get isHideReplayMore(){return this.keywords[Wi.HIDE_REPLAY_MORE]}get volume(){return this.isOnlyBanner?0:this._volume}set volume(e){this._volume=e}get isIabImpression(){return this.keywords[Wi.IAB_IMPRESSION]}get preloadLandingPage(){return this.keywords[Wi.PREROAD_LANDINGPAGE]}get isBigCloseArea(){return this.keywords[Wi.CLOSE_AREA_SET]}get isNewUI(){return this.keywords[Wi.NEW_UI]}get isDocumentClick(){return this.keywords[Wi.DOCUMENT_CLICK]}set isStoryUserClick(e){this._isStoryUserClick=e}get isStoryUserClick(){return this._isStoryUserClick}set isEventImpSend(e){this._isEventImpSend=e}get isEventImpSend(){return this._isEventImpSend}get useNativePlayer(){return this.playMode!==Ct.DSP}get hideFlashCloseBtn(){return this.keywords[Wi.HIDE_FLASH_CLOSE_BTN]}get useHybridPlayer(){return this.keywords[Wi.IOS_USE_HYBRID_VIDEO]}get isCubeChatbotType(){return this.keywords[Wi.CUBE_CHATBOT]}get cubeChatbotId(){return this._cubeChatbotId}get isCubeNamelistType(){return this.keywords[Wi.CUBE_NAMELIST]}get isVpaidParam(){return void 0!==this._vpaidParam}get funcParamMapForKeyWord(){return this._funcParamMapForKeyWord}get campaignTypeID(){return this._ctid}get isUseAssign(){return this.keywords[Wi.OPEN_URL_WITH_ASSIGN]}get isListenClickOnBannerIframe(){return this.keywords[Wi.LISTEN_CLICK_ON_BANNER_IFRAME]}get exclude(){return this._exclude}get hasBanner(){return this.bannerDataInXml.length>0}get isSafeFramePreview(){return this._isSafeFramePreview}get vpaidParam(){return this._vpaidParam}get emojiParam(){return this._emojiParam}get engCounts(){return this._engCounts}set engCounts(e){this._engCounts=e}get adIsExposed(){return this._adIsExposed}set adIsExposed(e){this._adIsExposed=e}get adIsVisible(){return this._adIsVisible}set adIsVisible(e){this._adIsVisible=e}get hideTips(){return this.keywords[Wi.HIDE_TIPS]}get stopInLoopLast(){return this.keywords[Wi.STOP_IN_LOOP_LAST]}get videoSourceObj(){return this._videoSource}get _useGalleryLite(){return this.keywords[Wi.USE_GALLERY_LITE]}get pageClickInSightOnly(){return this.keywords[Wi.PAGE_CLICK_IN_SIGHT_ONLY]}get pageClickInSightAfterward(){return this.keywords[Wi.PAGE_CLICK_IN_SIGHT_AFTERWARD]}get showTempInfo(){return this.keywords[Wi.SHOW_TEMP_INFO]||this._showTempInfo}get showTodayTempInfo(){return this.keywords[Wi.SHOW_TODAYTEMP_INFO]||this._showTodayTempInfo}get showHumiInfo(){return this.keywords[Wi.SHOW_HUMI_INFO]||this._showHumiInfo}get showAqiInfo(){return this.keywords[Wi.SHOW_AQI_INFO]||this._showAqiInfo}get showUviInfo(){return this.keywords[Wi.SHOW_UVI_INFO]||this._showUviInfo}get sendByFetch(){return this.keywords[Wi.SEND_BY_FETCH]}get useCpcHeight(){return this.keywords[Wi.USE_CPC_HEIGHT]}}qr.dataCenterArr_=[],qr.isSafeFrame=!1;class Xr{constructor(){this.ready=!1,this.data={},this.on_complete=function(){}}complete(e){this.ready=!0,this.data=e,this.on_complete()}then(e){this.on_complete=e}}!function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"}(Gr||(Gr={}));class Kr{constructor(e){if(Kr._promiseArr.push(this),this._id=Kr._promiseArr.length,this._status=Gr.PENDING,this._value=void 0,this._onFulfilledActions=[],this._onFailedActions=[],this._resolve=this._resolve.bind(this),this._reject=this._reject.bind(this),e)try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}get status(){return this._status}get value(){return this._value}get id(){return this._id}_resolve(e){this._status===Gr.PENDING&&(this._status=Gr.RESOLVED,this._value=e,this._onFulfilledActions.forEach((e=>{e(this._value)})))}_reject(e){this._status===Gr.PENDING&&(this._status=Gr.REJECTED,this._value=e,this._onFailedActions.forEach((e=>{e(this._value)})))}then(e,t){const n=new Kr,i=t=>{try{let i;i=e?e(t):t,n._resolve(i)}catch(e){n._reject(e)}};switch(this.status){case Gr.PENDING:this._onFulfilledActions.push(i);break;case Gr.RESOLVED:i(this.value)}const r=e=>{try{let i;i=t?t(e):e,n._reject(i)}catch(e){n._reject(e)}};switch(this._status){case Gr.PENDING:this._onFailedActions.push(r);break;case Gr.REJECTED:r(this.value)}return n}catch(e){return this.then(void 0,e)}static all(e){const t=e.length;let n=0;return new Kr(((i,r)=>{e.forEach((e=>{e.then((e=>{++n===t&&i()})).catch((e=>{r(e)}))}))}))}}Kr._promiseArr=[];class Zr{static toParam(e){const t=[];if(void 0===e.length)for(const n in e)if(void 0!==e[n]&&e[n].constructor===Array)for(const i of e[n]){let e=i;isNaN(e)&&(e=encodeURIComponent(i)),t[t.length]=encodeURIComponent(n+"[]")+"="+e}else t[t.length]=`${encodeURIComponent(n)}=${encodeURIComponent(e[n])}`;return t.join("&").replace(/%20/g,"+")}static assign(e,...t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");let n=Object(e);for(const e of t){const t=e;if(null!=t)for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&n[e]!==t[e]&&("object"==typeof t[e]?(n[e]=n[e]||{},Zr.assign(n[e],t[e])):n[e]=t[e])}return n}}class $r{constructor(e){this._props=$r.setPropertyReadOnly(e),this._state={}}get props(){return this._props}get state(){return this._state}setState(e){let t=this._state;null!=t&&(this._state=Zr.assign({},t,e))}static setPropertyReadOnly(e){for(let t in e)Object.defineProperty(e,t,{writable:!1});return e}}!function(e){e.EXPANDED="expanded",e.COLLAPSED="collapsed",e.FAILED="failed",e.GEOM_UPDATE="geom-update",e.FOCUS_CHANGE="focus-change"}(Wr||(Wr={}));class Jr extends $r{constructor(e){if(Jr._instance)throw new Error("already new");super(e),this._state={isExpanded:!1,isSlotInited:!1,currentWidth:0},this._sf=window.$sf;const t=this.sf.ext.geom();this.sf.ext.register(t.win.w,Math.ceil(t.win.w*e.collapseWidth/e.collapseHeight),((e,t)=>{switch(e){case Wr.GEOM_UPDATE:if(!this.state.isSlotInited){let e=this._sf.ext.geom().self.w;this.state.currentWidth!==e&&(this.setState({currentWidth:e,isSlotInited:!0}),this.props.resizeCallback())}break;case Wr.EXPANDED:case Wr.COLLAPSED:this.props.resizeCallback();case Wr.FAILED:}})),Jr._instance=this}static getInstance(){if(!Jr._instance)throw new Error("no sf handler");return Jr._instance}get sf(){return this._sf}}class eo{static exec_array_of_functions(e){let t="";if("object"!=typeof e)throw new Error("funcs not an array object");for(const n of e)t+=n();return t}static to_js_style(e){let t=e.toLowerCase();t=t.split("-");let n=t[0];for(let e=1;e<t.length;e++){const i=t[e];n+=i[0].toUpperCase()+i.substr(1)}return n}static createElement(e){const t=document.createElement(e.type);if(t.id=e.id,eo.apply_css(t,e.styles),e.attr){const n=e.attr;for(const e in n)t.setAttribute(e,n[e])}return t}static apply_css(e,t){for(const n in t)"width"===n||"height"===n||"margin"===n||"text-align"===n||"max-width"===n||"background"===n||"border"===n||"min-width"===n?e.style.setProperty(n,t[n],"important"):e.style.setProperty(n,t[n])}static get_css(e){const t={},n=e.style;for(const e of n)t[e]=n[eo.to_js_style(e)];return t}static applyImgInitCss(e){const t={width:"100% ",height:"100%",left:"0",top:"0","max-width":"none",margin:"initial",padding:"initial",border:"0px",background:"none"};for(const n in t)e.style.setProperty(n,t[n],"important")}static ajax(e){const t=new Xr,n=new XMLHttpRequest,i=void 0===e.async||e.async,r=e.method||"get",o=e.success||function(){},s=e.url;let a,l=e.parameters||null;if("string"!=typeof s)throw new Error("AJAX url error");if(n.onreadystatechange=function(){if(4===n.readyState&&200===n.status){const e=new DOMParser;a=e.parseFromString(n.responseText,"text/xml"),t.complete(a),o(a)}},null!==l){l="";for(const t in e.parameters)l+=`${t}=${e.parameters[t]}&`;l=l.substr(l,l.length-1)}return n.open(r,s,i),"post"===r&&n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send(l),t}static post(e,t,n){eo.ajax({url:e,method:"post",parameters:t,success:n})}static get_script(e,t){const n=document,i=new Xr,r=n.createElement("script");if(r.async=!0,r.type="text/javascript",r.src=e,r.onload=function(){i.complete(e+"_ready")},void 0===t){const e=n.getElementsByTagName("script")[0];e.parentNode.insertBefore(r,e.nextSibling)}else t.appendChild(r);return i}static checkSpriteSheetFileExist(e,t,n){const i=e.replace("http://","").replace("https://","").replace("www.","").split(/[/?#]/)[0],r=new XMLHttpRequest,o=t.files_index.split("/"),s=`//${i}/sites/default/files/video_converted/${t.hash}/${o[o.length-1]}_001.jpeg`;r.open("HEAD",s,!0),r.onload=function(){let e;e=200===r.status,n(e)},r.send()}static getMobileSizeCheckerParams(e,t){return{elements:[e.layout.container?e.layout.container:e.layout.underlayContainer],playMode:t.play_mode,playerType:t.player_type,hasBanner:e.layout.banner}}static getCustomClientElement(e){switch(e.type){case"id":return document.getElementById(e.name);case"class":return document.getElementsByClassName(e.name)[0];case"tag":return document.getElementsByTagName(e.name)[0];default:return null}}static checkUrlIsAvaliable(e){return null!==e&&"null"!==e&&""!==e&&void 0!==e&&e.indexOf("//")>-1}static isPopupBlocked(e){return!e||void 0===e||void 0===e.closed||e.closed}static openUrl(e,t){let n;if(e)if(t.isUseAssign)window.location.assign(e);else if(Ci.getInstance().isMobile)if(/^http/.exec(e)){if(t.isSafeFrame||t.isVpaidParam||[ut,lt].some((e=>location.host.includes(e))))n=window.open(e,"_blank");else if(1000470===t.uid){n=-1!==navigator.userAgent.toLowerCase().indexOf("iphone")?window.open(e,"_top"):window.open(e,"_blank")}else n=window.open(e,"_parent");eo.isPopupBlocked(n)&&!qr.isSafeFrame&&window.location.assign(e)}else window.location.assign(e);else if(t.isVpaidParam)window.open(e,"_blank");else try{top.open(e,"_blank")}catch(t){window.open(e,"_blank")}}static throttle(e,t=10,n=!0,i=!0){let r;const o=()=>{r=null,i&&e()};return()=>{r||(n&&e(),r=setTimeout(o,t))}}static setAutoClearInterval(e,t){const n=window.setInterval((()=>{try{e(n)}catch(e){clearInterval(n)}}),t)}static getJSON(e){return e&&""!==e?new Kr(((t,n)=>{const i=new XMLHttpRequest;i.open("GET",e,!0),i.addEventListener("load",(()=>{if(i.readyState===i.DONE&&200===i.status){const e=JSON.parse(i.response);t(e)}})),i.addEventListener("error",(()=>n(new Error("poster json request fail")))),i.send()})):null}static isValid(e){return"null"===e||null==e||""===e?{valid:!1}:{valid:!0,value:e}}static getSlotCheckFunctionWithPercentage(e){return t=>{const n=t.getBoundingClientRect().top,i=t.getBoundingClientRect().bottom,r=t.clientHeight*e;return Math.abs(n)<=window.innerHeight-r&&i>=r}}static pageHeightInformation(e){let t=0,n=0,i=0;if(Ci.getInstance().scopeInfo.isBlockedBySameOriginPolicy){if(e.isSafeFrame&&e.hasSfGeomApi){const e=Jr.getInstance().sf.ext.geom();t=e.self.t,n=e.self.t+e.self.h+e.self.b}}else{const i=top.document.body,r=top.document.documentElement;let o;n=Math.max(i.scrollHeight,i.offsetHeight,i.clientHeight,r.scrollHeight,r.offsetHeight,r.clientHeight),e.playMode===Ct.MIC||e.playMode===Ct.MFS||e.playMode===Ct.CTV_CREATIVE?t=e.layout.container.parentElement.offsetTop:(o=e.slotElement,t=eo.slotOffsetTop(o))}return i=t>0&&n>0?Math.round(t/n*100):0,{slotHeight:t,pageHeight:n,positionPercentage:i}}static slotOffsetTop(e){let t=e.offsetTop,n=0;for(;e&&e!==top.document.body&&n<=10;)n++,t=(e=e.offsetParent)?t+e.offsetTop:t;return null==t&&(t=0),t}static getElementExposureRatio(e,t,n){let i;return i=e<=n?e/t:1-(e-n)/t,(i>1||i<0)&&(i=i>1?1:0),i}static setBaseStyles(e){eo.apply_css(e,{border:"0",margin:"0",padding:"0",display:"initial","margin-bottom":"0"})}static verifyTop(e){const t=this.dataCenter.funcParamMapForKeyWord.showAdsLatency;let n;(null==t?void 0:t.time)&&(this.latency=!0);let i=10;const r=window.location.host;if(r.indexOf(tt)>-1&&(i=600),this.dataCenter.playerType===wt.BOTTOM||this.dataCenter.playerType===wt.BOTTOM_CLASSIC)i=150;else if(this.dataCenter.playMode===Ct.MFS)switch(!0){case r.indexOf(at)>-1:case r.indexOf(st)>-1:case r.indexOf(rt)>-1:case r.indexOf(ot)>-1:case 1000470===this.dataCenter.uid:case r.indexOf(ce)>-1:i=0;break;case r.indexOf(Tt)>-1:i=.33*eo.pageHeightInformation(this.dataCenter).pageHeight;break;default:i=1}else if(this.dataCenter.playerType===wt.BOTTOM_FLASH_V2||this.dataCenter.playerType===wt.BOTTOM_FLASH_BANNER||this.dataCenter.playerType===wt.BOTTOM_FLASH_VIDEO||this.dataCenter.playerType===wt.BOTTOM_FLASH_CARD||this.dataCenter.playerType===wt.BOTTOM_HIT||this.dataCenter.playerType===wt.BOTTOM_HIT_VIDEO)switch(!0){case r.indexOf(at)>-1:case r.indexOf(st)>-1:case r.indexOf(rt)>-1:i=450}(this.dataCenter.appearOpening||this.dataCenter.playMode===Ct.CTV_CREATIVE)&&(i=0),eo.setAutoClearInterval(function(t){switch(!0){case r.indexOf(le)>-1:n=document.getElementById("__next")||document.getElementsByClassName("content")[0]||document.getElementById("headerMenuRoot");break;case r.indexOf(Me)>-1:n=document.getElementsByClassName("jeg_navbar_mobile_wrapper")[0];break;case r.indexOf(nt)>-1:n=document.getElementsByClassName("article-container")[0];break;case r.indexOf(W)>-1:n=document.getElementsByClassName("jeg_viewport")[0];break;default:n=top.document.firstElementChild}n||(n=top.document.firstElementChild);const o=-1*n.getBoundingClientRect().top;let s;Math.abs(o)>=i?this.latency?setTimeout((()=>{this.latency=!1}),this.dataCenter.funcParamMapForKeyWord.showAdsLatency.time):s=!0:s=!1,e(s,t)}.bind(this),500)}static setPixnetMeasure(e){const t=e.tagName;"DIV"===t?e.setAttribute("data-falcon-ad-container",""):"VIDEO"===t||"CANVAS"===t?e.setAttribute("data-falcon-ad-video",""):e.setAttribute("data-falcon-ad","")}static createObserver(e,t,n){n=n||{root:null,rootMargin:"0px 0px 0px 0px",threshold:[0,.05,.1,.15,.2,.25,.3,.35,.4,.45,.5,.55,.6,.65,.7,.75,.8,.85,.86,.87,.88,.89,.9,.91,.92,.93,.94,.95,.96,.97,.98,.99,1]};const i=new IntersectionObserver(t,n);return i.observe(e),i}static checkObserverSupport(){let e=!1;return window.IntersectionObserver&&window.IntersectionObserverEntry&&(e=!0),e}static slideDirection(e,t,n,i,r){e.addEventListener("touchstart",(function(t){e!==window&&t.preventDefault();const i=function(e){return e.touches||e.originalEvent.touches}(t)[0];a=i.clientX,l=i.clientY,null==n||n(s,o)}),!1),e.addEventListener("touchmove",(function(e){if(!a||!l)return;const t=e.touches[0].clientX,n=e.touches[0].clientY,r=a-t,u=l-n;Math.abs(r)>Math.abs(u)?(r>.35&&(s.isRight=!1,s.isLeft=!0),r<-.35&&(s.isLeft=!1,s.isRight=!0)):u>.1?(s.isUp=!1,s.isDown=!0):(s.isUp=!0,s.isDown=!1);a=null,l=null,null==i||i(s,o)}),!1),e.addEventListener("touchend",(function(t){e!==window&&t.preventDefault();null==r||r(s,o)}),!1);const o=t,s={isLeft:!1,isRight:!1,isUp:!1,isDown:!1};let a=null,l=null}static thoroughHideElement(e){e.css({display:"none","pointer-events":"none",opacity:"0"})}static setIframeScale(e,t,n,i,r){return e===Ct.IR?(n.width=0!==t.offsetWidth?Math.min(t.offsetWidth,n.width||i.width):n.width||i.width,r=Math.min(n.width/i.width,n.height/i.height)):r=Math.min(n.width/i.width,n.width/i.height),r}static assignEventKeyValue(e,t,n){const i=new RegExp(`(\\?|\\&)${t}=([^&?]+|)`,"g");return e=e.replace(i,`$1${t}=${encodeURIComponent(n)}`)}static usePlayerComponents(e){switch(e){case wt.TRANSFORMER_300X250:case wt.TRANSFORMER_320X480:case wt.DSP_VIDEO_ONLY_300X250:return!1;default:return!0}}static getIrTagAbsTop(e){try{return Math.abs(top.document.getElementById(e.id).getBoundingClientRect().top+top.scrollY)}catch(t){return Math.abs(e.getBoundingClientRect().top+top.scrollY)}}static send(e,t,n){t=JSON.stringify(t);let i="https://onead.onevision.com.tw/v2/push?"+eo.to_param({host:"https://onead.onevision.com.tw",event:"7000",dt:(new Date).getTime()||"",p1:e.uid||"",p2:e.guid||"",p3:window.location.href||"",p4:document.title||"",p5:document.referrer||"",p6:e.fp||"",p7:"",pub:"",acc:"",vendor:"",action:"ent",eng:t,enc:e.enc,adid:"",cu1:"",cu2:"",cu3:"",cu4:"",utm_source:"",utm_medium:"",utm_campaign:"",utm_term:"",utm_content:"",ssid:eo.getSSId()});1===n&&(i+="&exclude=1"),eo.sendHttpRequestToServer(i)}static getSSId(){const e=new Date,t=e.getMilliseconds();return(100*(3600*e.getHours()+60*e.getMinutes()+e.getSeconds())+t).toString(36)}static to_param(e){const t=[];if(void 0===e.length)for(const n in e)if(e[n]&&e[n].constructor===Array)for(const i of e[n]){let e=i;isNaN(e)&&(e=encodeURIComponent(i)),t[t.length]=`${encodeURIComponent(n+"[]")}=${e}`}else t[t.length]=`${encodeURIComponent(n)}=${encodeURIComponent(e[n])}`;return t.join("&").replace(/%20/g,"+")}static sendHttpRequestToServer(e,t){if(void 0!==e&&""!==e&&e.indexOf("//")>-1){(new Image).src=e}else t&&"function"==typeof t&&t("reporting url error: "+e)}static sendRequestToServerByFetch(e,t){void 0!==e&&""!==e&&e.indexOf("//")>-1?fetch(e).then((e=>e)).catch((e=>{})):t&&"function"==typeof t&&t("reporting url error: "+e)}static isPhoneModel(e){const t={IPhone11:{width:414,height:896},IPhone11Pro:{width:375,height:812},IPhone11ProMax:{width:414,height:896},IPhone12:{width:390,height:844},IPhone12Mini:{width:360,height:780},IPhone12Pro:{width:390,height:844},IPhone12ProMax:{width:428,height:926},IPhone13:{width:390,height:844},IPhone13Mini:{width:360,height:780},IPhone13Pro:{width:390,height:844},IPhone13ProMax:{width:428,height:926},IPhone14:{width:390,height:844},IPhone14Plus:{width:428,height:926},IPhone14Pro:{width:393,height:852},IPhone14ProMax:{width:430,height:932}}[e],{innerWidth:n,innerHeight:i}=top.window;return n===t.width&&i===t.height}static buildIasWrapper(e,t,n){var i,r;let o;if(o=n===Ri.ONEAD_IAS_NESTLE?{id:e[1],width:"100px",height:"100px",positionType:t.dataCenter.playMode===Ct.MIC?"bottom":"top",range:t.dataCenter.playMode===Ct.MIC?"10%":"50%",left:"50%",imgWidth:"100px",imgHeight:"100px"}:{id:e[1],width:e[2],height:t.dataCenter.playerType.indexOf(wt.TRANSFORMER)>-1?"100%":e[3],positionType:e[4],range:e[5],left:e[6],imgWidth:e[7],imgHeight:t.dataCenter.playerType.indexOf(wt.TRANSFORMER)>-1?"100%":e[8]},!document.getElementById(n+t.dataCenter.isipIndex)){const e=document.createElement("div");e.id=n+t.dataCenter.isipIndex;const s={position:"absolute",width:o.width,height:o.height,left:o.left,top:"",bottom:"",opacity:"0","z-index":"-1"};"top"===o.positionType?s.top=o.range:s.bottom=o.range,eo.apply_css(e,s);const a=document.createElement("img");a.src="https://ad-specs.guoshipartners.com/static/images/1x1_pixel.png",a.id="ias-imp"+t.dataCenter.isipIndex;const l={width:o.imgWidth,height:o.imgHeight,opacity:"0"};eo.apply_css(a,l),e.appendChild(a);const u=document.createElement("script");u.type="application/javascript",u.async=!0,u.src=o.id,e.appendChild(u),(null===(i=t.dataCenter.layout.fixedContainer)||void 0===i?void 0:i.appendChild(e))||null===(r=t.dataCenter.layout.container)||void 0===r||r.appendChild(e)}}}eo.checkSlotWithRateOfViewable=eo.getSlotCheckFunctionWithPercentage(di),eo.checkSlotWithRateOfVideoStart=eo.getSlotCheckFunctionWithPercentage(pi);function to(e){return e.includes("VERTICAL")||e.includes("SCROLLER")||e.includes(wt.POSTER)||e.includes(wt.PAGE)||e.includes(wt.SHOW)||e.includes(wt.TAG)}function no(e){switch(e){case wt.FULLSCREEN_FLASH_DRIVE_320:case wt.FULLSCREEN_FLASH_DRIVE_300:return!0;default:return!1}}function io(e){return e===wt.IS_FOLLOW_INSYNC||e===wt.IS_FOLLOW_DF}class ro{constructor(e,t,n,i,r,o){this.url=e,this.MIRcustomFunc=t,this.MIBcustomFunc=n,this.MFScustomFunc=i,this.MScustomFunc=r,this.DesktopcustomFunc=o}}function oo(e){var t,n,i,r,o,s,a,l,u,c,d,p,y,h,m;let E;switch(null===(t=e.layout.slotTag.closest(".position-container"))||void 0===t||t.style.setProperty("transform","unset","important"),null===(n=e.layout.slotTag.closest(".position-container"))||void 0===n||n.style.setProperty("width","100vw","important"),null===(i=e.layout.slotTag.closest(gt.CHINATIMES))||void 0===i||i.style.setProperty("overflow","visible","important"),null===(r=e.layout.slotTag.closest(gt.CHINATIMES))||void 0===r||r.style.setProperty("display","flex","important"),null===(o=e.layout.slotTag.closest(gt.CHINATIMES))||void 0===o||o.style.setProperty("justify-content","center","important"),null===(s=e.layout.slotTag.closest(gt.CHINATIMES2))||void 0===s||s.style.setProperty("position","relative","important"),null===(a=e.layout.slotTag.closest(gt.CHINATIMES2))||void 0===a||a.style.setProperty("width","100vw","important"),e.container.style.setProperty("width","100vw","important"),e.slotElement.style.setProperty("left","0vw","important"),e.slotElement.style.setProperty("width","100vw","important"),to(e.playerType)?null===(l=e.slotElement.closest(".with-placeholder"))||void 0===l||l.style.setProperty("z-index","1004","important"):(null===(u=e.layout.videoContainer)||void 0===u||u.style.setProperty("width","100vw","important"),null===(c=e.layout.videoContainer)||void 0===c||c.style.setProperty("height","56.25vw","important"),null===(p=null===(d=e.layout.player)||void 0===d?void 0:d.videoClickArea)||void 0===p||p.element.style.setProperty("height","56.25vw","important")),e.playerType){case"INSTANT":e.container.style.setProperty("height","unset","important");break;case"BNB":E=e.container.querySelector("#banner-wrapper0"),E.style.setProperty("height","56.31vw","important");break;case"SCRATCH_BNB":E=e.container.querySelector("#banner-wrapper0"),E.style.setProperty("height","139.84vw","important");break;case wt.TRANSFORMER_STICKY:case wt.TRANSFORMER:null===(y=e.slotElement.closest(gt.CHINATIMES2))||void 0===y||y.style.setProperty(ji.CLIP_PATH,"none","important"),null===(h=e.slotElement.closest(gt.CHINATIMES2))||void 0===h||h.style.setProperty(ji.CLIP_PATH_KIT,"none","important"),null===(m=e.slotElement.closest(".ad"))||void 0===m||m.style.setProperty("z-index","10","important")}}function so(e){var t,n,i,r,o,s,a;null===(a=null===(s=null===(o=null===(r=null===(i=null===(n=null===(t=e.slotElement.parentElement)||void 0===t?void 0:t.parentElement)||void 0===n?void 0:n.parentElement)||void 0===i?void 0:i.parentElement)||void 0===r?void 0:r.parentElement)||void 0===o?void 0:o.parentElement)||void 0===s?void 0:s.parentElement)||void 0===a||a.style.setProperty("padding","0","important"),e.playerType===wt.TRANSFORMER_STICKY&&e.layout.videoContainer.style.setProperty("margin-bottom","0","important"),To(e.layout)}function ao(e){var t,n,i;e.playMode===Ct.IN_STREAM&&(null===(t=e.layout.container.closest(".cnyes-dfp-top-banner"))||void 0===t||t.style.setProperty("height","390px","important"),null===(i=null===(n=e.layout.player)||void 0===n?void 0:n.bannerWrapper)||void 0===i||i.banner.element.style.setProperty("max-width","none","important"))}function lo(){const e=document.body.querySelector("#gpt-ad-vertical-top .ad-container");e&&(e.style.setProperty("transform","unset","important"),e.style.setProperty("position","relative","important"),e.style.setProperty("left","-0.938rem","important"))}function uo(e){var t,n;const i=top.window.innerWidth,r=.5625*i;to(e.playerType)||(e.slotElement.style.setProperty("max-width",.94*i+"px","important"),null===(t=e.layout.videoContainer)||void 0===t||t.style.setProperty("max-width","100%","important"),null===(n=e.layout.videoContainer)||void 0===n||n.style.setProperty(ji.MAX_HIGTH,.94*r+"px","important")),yo(e)}function co(e){var t,n,i,r,o,s,a,l,u,c;const d=null===(r=null===(i=null===(n=null===(t=e.layout.slotTag)||void 0===t?void 0:t.parentElement)||void 0===n?void 0:n.parentElement)||void 0===i?void 0:i.parentElement)||void 0===r?void 0:r.parentElement;null==d||d.style.setProperty("display","block");const p="overflow-x",y=document.createElement("style");document.head.appendChild(y);const h=y.sheet;let m;if(null==h||h.insertRule(`#div-onead-ad${e.dataCenter.isipIndex} * { margin-top: unset !important }`),null==h||h.insertRule(`#div-onead-ad${e.dataCenter.isipIndex} * { padding-top: unset !important }`),to(e.playerType)){const t=top.window.innerWidth;e.layout.slotTag.style.setProperty("width",t+"px","important");const n=e.layout.underlayContainer;null===(o=n.closest(".article_show"))||void 0===o||o.style.setProperty(p,"visible","important"),null===(s=n.closest(".banner"))||void 0===s||s.style.setProperty(p,"visible","important"),e.slotElement.style.setProperty("margin-top","0px","important"),e.slotElement.style.setProperty("padding-top","0px","important")}else if(m=null===(l=null===(a=e.layout.slotTag)||void 0===a?void 0:a.parentNode)||void 0===l?void 0:l.parentNode,m){const t=Math.floor(window.screen.width),n=Math.floor(.5625*t);e.layout.container.style.setProperty("width",t+"px","important"),null===(u=e.layout.player)||void 0===u||u.element.style.setProperty("width",t+"px","important"),null===(c=e.layout.player)||void 0===c||c.element.style.setProperty("height",n+"px","important"),e.layout.slotTag.style.setProperty(ji.MARGIN_LEFT,"-15px","important")}}function po(e){to(e.playerType)&&To(e.layout)}function yo(e){var t,n,i,r,o,s;const a=document.createElement("div");a.style.setProperty("position","absolute","important"),a.style.setProperty("left","0","important"),a.style.setProperty("top","0","important"),a.style.setProperty("width","100%","important"),a.style.setProperty("height","100%","important"),a.style.setProperty("z-index","100","important");const l=a.cloneNode(!0),u=a.cloneNode(!0),c=a.cloneNode(!0),d=a.cloneNode(!0);null===(t=e.layout.logoButton)||void 0===t||t.element.appendChild(a),null===(n=e.layout.player)||void 0===n||n.muteButton.element.appendChild(l),null===(r=null===(i=e.layout.player)||void 0===i?void 0:i.playButton)||void 0===r||r.element.appendChild(u),null===(o=e.layout.closeButton)||void 0===o||o.element.appendChild(c),null===(s=e.layout.skipButton)||void 0===s||s.element.appendChild(d)}ro.DEFAULT=new ro(null,null,null,(e=>{var t,n,i,r,o;no(e.playerType)&&1000470===e.uid&&(null===(t=e.layout.container)||void 0===t||t.style.setProperty("background-color","rgba(0,0,0,0.48)","important"),null===(i=null===(n=e.layout.closeBtn)||void 0===n?void 0:n.element)||void 0===i||i.style.setProperty("opacity","0","important"),null===(o=null===(r=e.layout.closeBtn)||void 0===r?void 0:r.element)||void 0===o||o.style.setProperty("pointer-events","none","important"))})),ro.ONEAD=new ro(e,(()=>{})),ro.STAGING=new ro(t,(()=>{})),ro.superDsp=new ro(n,(()=>{})),ro.APPLENEWS=new ro(i,(()=>{})),ro.BASKETBALLTOP=new ro(r,(e=>{eo.apply_css(e.slotElement,{left:"",right:"0px"}),to(e.playerType)&&e.layout.underlayContainer.style.setProperty("z-index","998","important")})),ro.FOOTBALL=new ro(o,(()=>{})),ro.FTV=new ro(s,(e=>{var t;if(to(e.playerType)){const n=eo.createElement({type:"div",id:`onead-notice${e.dataCenter.isipIndex}`,styles:{width:"100vw",height:"40px"},attr:{}}),i=eo.createElement({type:"img",id:`onead-notice-img${e.dataCenter.isipIndex}`,styles:{width:"200px",height:"100%",margin:"0 auto"},attr:{src:"data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMzA0IDQwIiB3aWR0aD0iMzA0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Im02LjQgMjcuMDQgMS43Ni4yMjRjLS4xMjggMi43NTItLjQ0OCA1LjIxNi0uODk2IDcuMzZsLTEuODU2LS41NzZjLjUxMi0yLjA0OC44MzItNC4zODQuOTkyLTcuMDA4em00LjcwNC0uMzg0Yy4zMiAyLjAxNi41NzYgNC4xOTIuOCA2LjU2bC0xLjc5Mi4zODRjLS4xOTItMi40OTYtLjM4NC00LjY3Mi0uNjA4LTYuNTkyem0yLjk0NC04LjE5MmMuNTc2IDEuODI0IDEuMTIgMy45MDQgMS41NjggNi4yNzJsLTEuNjk2LjQxNi0uMzItMS41NjhjLTIuNjI0LjgzMi01LjEyIDEuNDQtNy40ODggMS43OTJsLS41NDQtMS45MmMuMzUyLS4xNi42NzItLjM1Mi45MjgtLjYwOCAxLjA4OC0xLjIxNiAyLjQzMi0zLjIgMy45NjgtNS45ODQtMS41MDQuMjg4LTIuOTc2LjU0NC00LjQxNi44bC0uNTQ0LTEuOTJjLjMyLS4xMjguNjQtLjM4NC44OTYtLjc2OCAxLjM3Ni0yLjY4OCAyLjU2LTUuNzYgMy41ODQtOS4yMTZsMi4wMTYuNzY4Yy0xLjM0NCAzLjc3Ni0yLjY4OCA2LjgxNi00LjA2NCA5LjA1NiAxLjE1Mi0uMTYgMi4zMDQtLjM1MiAzLjUyLS42MDguNjQtMS4yOCAxLjM0NC0yLjY1NiAyLjA0OC00LjEyOGwxLjkyLjczNmMtMi43ODQgNS40NzItNS4wODggOS4zNDQtNi45NDQgMTEuNTg0IDEuNi0uMjg4IDMuMi0uNjcyIDQuNzM2LTEuMTItLjI1Ni0xLjA4OC0uNTQ0LTIuMDgtLjgzMi0zLjA0em0uMDk2IDcuMzkyYy41NDQgMS42NjQgMS4wMjQgMy40ODggMS40NCA1LjQwOGwtMS42MzIuNzA0Yy0uNDE2LTIuMTEyLS44NjQtNC0xLjM0NC01LjZ6bTQuNDE2LTUuODU2djEyLjY0aDE1LjY4djEuODg4aC0xNy42NjR2LTI4LjM1MmgxLjk4NHYxMi4wMzJoMTUuNTg0djEuNzkyem0xNC41MjggNi44MTZjLjM1MiAxLjI4LjY3MiAyLjc1Mi45OTIgNC40MTZsLTEuMzc2LjM1MmMtLjA5Ni0uNDQ4LS4xOTItLjg5Ni0uMjU2LTEuMjgtMS43OTIuMzItMy4zOTIuNjA4LTQuODY0LjhsLS4zMi0xLjM3NmMuNzY4LS40OCAxLjcyOC0xLjY2NCAyLjkxMi0zLjU1MmwtMy4yMzIuMzg0LS4zODQtMS4zNDRjLjIyNC0uMTI4LjQ0OC0uMzIuNjQtLjU3Ni44MzItMS4yMTYgMS41NjgtMi41OTIgMi4yMDgtNC4xMjhsMS41MzYuNTc2Yy0uOCAxLjYzMi0xLjYgMi45NzYtMi40MzIgNCAuODMyLS4wOTYgMS42OTYtLjIyNCAyLjU2LS4zODRsMS4xODQtMi4xNzYgMS40MDguNTc2Yy0xLjc5MiAzLjIzMi0zLjIgNS4zNzYtNC4yODggNi40NjQuODMyLS4xMjggMS43Ni0uMzIgMi44MTYtLjUxMi0uMTYtLjY0LS4zMi0xLjI0OC0uNDQ4LTEuNzkyem0tNy4zMjguMjI0Yy4zNTIgMS4yOC42NzIgMi43Mi45NiA0LjM4NGwtMS4zNDQuMzUyYy0uMDY0LS40OC0uMTYtLjkyOC0uMjU2LTEuMzc2LTEuODU2LjM1Mi0zLjU4NC42NC01LjE1Mi44OTZsLS4zNTItMS4zNzZjLjg2NC0uNDggMS45NTItMS42NjQgMy4yNjQtMy41NTJsLTMuMi4yNTYtLjM4NC0xLjM0NGMuMjU2LS4xMjguNDQ4LS4zMi42NC0uNTc2Ljg5Ni0xLjIxNiAxLjY5Ni0yLjYyNCAyLjM2OC00LjE5MmwxLjU2OC41NzZjLS44NjQgMS42OTYtMS43MjggMy4wNzItMi41NiA0LjA5Ni44MzItLjA2NCAxLjY5Ni0uMTYgMi41MjgtLjI4OC40NDgtLjcwNC44OTYtMS40NzIgMS4zNDQtMi4yNGwxLjUwNC41NzZjLTEuOTg0IDMuMi0zLjU4NCA1LjM0NC00LjggNi40NjQuODY0LS4xNiAxLjg1Ni0uMzUyIDIuOTc2LS41NzYtLjEyOC0uNTc2LS4yMjQtMS4xNTItLjM1Mi0xLjY2NHptNy4zMjgtMTQuNDY0Yy4zNTIgMS4yOC42NzIgMi43Mi45OTIgNC4zNTJsLTEuMzc2LjM1MmMtLjA5Ni0uNDQ4LS4xOTItLjgzMi0uMjU2LTEuMjE2LTEuNzkyLjMyLTMuMzkyLjYwOC00Ljg2NC44bC0uMzItMS4zNzZjLjc2OC0uNDggMS43MjgtMS42NjQgMi45MTItMy41NTJsLTMuMjMyLjM4NC0uMzg0LTEuMzc2Yy4yMjQtLjA5Ni40NDgtLjI4OC42NC0uNTQ0LjgzMi0xLjIxNiAxLjU2OC0yLjU5MiAyLjIwOC00LjEyOGwxLjUzNi41NzZjLS44IDEuNjMyLTEuNiAyLjk0NC0yLjQgMy45NjguODMyLS4wOTYgMS42NjQtLjIyNCAyLjQ5Ni0uMzUyLjM4NC0uNzA0LjgtMS40MDggMS4yMTYtMi4xNzZsMS40MDguNTc2Yy0xLjc5MiAzLjItMy4yMzIgNS4zNzYtNC4zMiA2LjQ2NC44MzItLjEyOCAxLjc2LS4zMiAyLjg0OC0uNTEyLS4xMjgtLjY0LS4yODgtMS4yMTYtLjQ0OC0xLjc5MnptLTcuMzkyLjIyNGMuMzg0IDEuMjE2LjcwNCAyLjY1NiAxLjAyNCA0LjMybC0xLjM0NC4zMi0uMjU2LTEuMzEyYy0xLjg4OC4zODQtMy42MTYuNjcyLTUuMTUyLjg5NmwtLjM1Mi0xLjM0NGMuODY0LS40OCAxLjk1Mi0xLjY2NCAzLjI2NC0zLjU1MmwtMy4yLjI1Ni0uMzg0LTEuMzc2Yy4yNTYtLjEyOC40NDgtLjI4OC42NC0uNTQ0Ljg5Ni0xLjI0OCAxLjY2NC0yLjY1NiAyLjMwNC00LjE5MmwxLjU2OC41NzZjLS44MzIgMS42NjQtMS42NjQgMy4wMDgtMi40OTYgNC4wNjQuODMyLS4wNjQgMS42OTYtLjE2IDIuNTI4LS4yNTYuNDQ4LS43MDQuODk2LTEuNDcyIDEuMzQ0LTIuMjRsMS41MDQuNTc2Yy0xLjk4NCAzLjItMy41ODQgNS4zNDQtNC44IDYuNDY0Ljg2NC0uMTYgMS44NTYtLjM1MiAyLjk3Ni0uNTc2LS4xMjgtLjYwOC0uMjg4LTEuMTg0LS40MTYtMS42OTZ6bTEyLjg2NCAxNC4yMDggMS44ODguMjI0Yy0uMTYgMi43ODQtLjUxMiA1LjI0OC0xLjA1NiA3LjM2bC0xLjk1Mi0uNjA4Yy42MDgtMi4wNDguOTkyLTQuMzUyIDEuMTItNi45NzZ6bTUuMzEyLS40MTZjLjM4NCAyLjAxNi43MDQgNC4xOTIuOTkyIDYuNTZsLTEuOTUyLjQ0OGMtLjIyNC0yLjQ5Ni0uNDgtNC43MDQtLjgtNi42MjR6bTMuMjY0LTguMDY0Yy42MDggMS43OTIgMS4xNTIgMy44NzIgMS42MzIgNi4yMDhsLTEuODU2LjQ4LS4zMi0xLjYzMmMtMi44OC44NjQtNS42MzIgMS40NC04LjI1NiAxLjc2bC0uNTc2LTEuOTUyYy4zODQtLjE2LjcwNC0uMzUyLjk2LS41NzYgMS4yMTYtMS4yMTYgMi42NTYtMy4yMzIgNC4zODQtNi4wNDgtMS42OTYuMjU2LTMuMzkyLjQ4LTUuMDg4LjcwNGwtLjU0NC0xLjg1NmMuMzItLjE2LjYwOC0uNDE2Ljg2NC0uOCAxLjcyOC0yLjU5MiAzLjIzMi01LjUzNiA0LjQ4LTguODY0bDIuMDQ4Ljc2OGMtMS42IDMuNjE2LTMuMiA2LjUyOC00LjgzMiA4LjcwNCAxLjQwOC0uMTI4IDIuODE2LS4zMiA0LjE5Mi0uNTc2LjY3Mi0xLjIxNiAxLjM3Ni0yLjQ5NiAyLjExMi0zLjg3MmwxLjk4NC43MzZjLTMuMDQgNS40MDgtNS41MzYgOS4yMTYtNy41MiAxMS40NTYgMS43OTItLjMyIDMuNjE2LS43MDQgNS40MDgtMS4xODQtLjI1Ni0uOTkyLS41NDQtMS45NTItLjgzMi0yLjg4em0uMTI4IDcuMjY0Yy41NzYgMS42OTYgMS4wODggMy40ODggMS41MDQgNS40MDhsLTEuNzI4Ljc2OGMtLjQ0OC0yLjExMi0uOTI4LTQtMS40NC01LjYzMnptMi4wMTYtMTguMjRoNy4zNnYtMS43MjhoMi4yMDh2MS43MjhoNy4zNnYxLjY2NGgtNy4zNnYxLjY5Nmg2LjQzMnYxLjUwNGgtMTUuMDcydi0xLjUwNGg2LjQzMnYtMS42OTZoLTcuMzZ6bS4yODggNi4zNjhoMTYuMjU2djUuMzQ0aC0xNi4yNTZ6bTE0LjMwNCAzLjkwNHYtMi40NjRoLTMuMDcydjIuNDY0em0tNC42NCAwdi0yLjQ2NGgtMy4wNHYyLjQ2NHptLTQuNjA4IDB2LTIuNDY0aC0zLjEwNHYyLjQ2NHptLTQuMDk2IDIuODQ4aDE0LjR2MTAuNTI4aC00LjgzMmMyLjQzMi43MDQgNC42NzIgMS41NjggNi42ODggMi41NmwtMS4wNTYgMS42Yy0yLjE3Ni0xLjE4NC00LjM4NC0yLjExMi02LjY1Ni0yLjgxNmwuODk2LTEuMzQ0aC01LjAyNGwxLjE4NCAxLjM0NGMtMS45MiAxLjA4OC00LjI4OCAyLjAxNi03LjEzNiAyLjcybC0uODMyLTEuNjk2YzIuNzItLjY0IDQuOTYtMS40MDggNi42ODgtMi4zNjhoLTQuMzJ6bTEyLjI1NiA5LjAyNHYtMS43MjhoLTEwLjE3NnYxLjcyOHptLTEwLjE3Ni0zLjAwOGgxMC4xNzZ2LTEuNTY4aC0xMC4xNzZ6bTAtMi44MTZoMTAuMTc2di0xLjc2aC0xMC4xNzZ6bTIzLjM2LTE3Ljk1MiAyLjAxNi45NmMtMS42MzIgMy40MjQtNC4zMiA2LjQ2NC04LjAzMiA5LjEybC0uNjcyLTIuMjcyYzMuMDcyLTIuMzA0IDUuMjgtNC44OTYgNi42ODgtNy44MDh6bS44MzIgOC4xMjggMS45ODQuODk2Yy0uNzY4IDEuNjMyLTEuNzYgMy4xNjgtMi45MTIgNC42MDh2MTUuNDU2aC0yLjI0di0xMy4wMjRjLTEuMDI0Ljk2LTIuMTc2IDEuOTItMy4zOTIgMi44MTZsLS42NzItMi4yMDhjMy4yOTYtMi40OTYgNS42OTYtNS4zNDQgNy4yMzItOC41NDR6bTIuMzM2LTIuNjU2aDguNTQ0Yy0uNzA0LTEuNjk2LTEuNTA0LTMuMzI4LTIuNDMyLTQuODk2bDIuMjQtLjYwOGMxLjAyNCAxLjgyNCAxLjc5MiAzLjQ4OCAyLjMwNCA1LjAyNGwtMS4yNDguNDhoOS4zMTJ2Mi4yMDhoLTguMTZ2Ny44MDhoNy4zMjh2Mi4xNDRoLTcuMzI4djguNjRoOC44djIuMjA4aC0yMC40NDh2LTIuMjA4aDkuMzEydi04LjY0aC03LjQyNHYtMi4xNDRoNy40MjR2LTcuODA4aC04LjIyNHptMjIuNjI0LTMuODRoMjguNDQ4djIuMjcyaC0xMy44ODh2NC44MzJjMy45NjggMS45ODQgOCA0LjI4OCAxMi4wOTYgNi45MTJsLTEuMzc2IDIuMDQ4Yy00LjI1Ni0yLjgxNi03Ljg0LTQuOTkyLTEwLjcyLTYuNTI4djE4LjE3NmgtMi4zMzZ2LTI1LjQ0aC0xMi4yMjR6bTM0LjIwOC0xLjEyYzIuMzA0IDEuNjY0IDQuMjU2IDMuMzYgNS44MjQgNS4wMjRsLTEuNTY4IDEuNTM2Yy0xLjQwOC0xLjU2OC0zLjM2LTMuMjY0LTUuODI0LTUuMDU2em0tLjMyIDcuODcyYzIuMDggMS42IDMuODQgMy4xNjggNS4yOCA0Ljc2OGwtMS41NjggMS41NjhjLTEuMjgtMS41MzYtMy4wNC0zLjEzNi01LjI4LTQuODY0em0zLjEwNCA5LjEyIDEuOTg0Ljc2OGMtMS4zNDQgMy44NC0yLjgxNiA3LjQ4OC00LjQ4IDEwLjg4bC0yLjA4LS44OTZjMS43Ni0zLjUyIDMuMjk2LTcuMTA0IDQuNTc2LTEwLjc1MnptMjAuODY0LTE2LjQxNnY4LjYwOGgyLjExMnY1LjM0NGgtMi4yMDh2LTMuMzZoLTE1LjM2djMuMzZoLTIuMjA4di01LjM0NGgyLjMzNnYtOC42MDh6bS0xMy4xNTIgOC42MDhoNC40OHYtNC4xOTJoNi40OTZ2LTIuNGgtMTAuOTc2em0xMC45NzYtMi41MjhoLTQuNTc2djIuNTI4aDQuNTc2em0xLjY2NCA2LjcydjEyLjg5NmMwIDEuNjY0LS45NiAyLjQ5Ni0yLjg4IDIuNDk2aC00Ljg5NmwtLjU0NC0yLjA4YzEuNzI4LjA2NCAzLjMyOC4xMjggNC44LjEyOC44OTYgMCAxLjM3Ni0uNDQ4IDEuMzc2LTEuMzEydi0yLjY1NmMtMi44MTYuNzA0LTYuMDQ4IDEuMzQ0LTkuNjMyIDEuOTg0bC0uNTEyLTEuODg4YzMuNzEyLS41NzYgNy4wNzItMS4yNDggMTAuMTQ0LTEuOTg0di01LjUwNGgtMTAuMDE2djEuNzkyYzIuNjg4LjI4OCA1LjIxNi42NzIgNy42NDggMS4xODRsLS42NCAxLjY2NGMtMi4yNzItLjQ4LTQuNjA4LS44NjQtNy4wNC0xLjE4NC0uMTI4IDQuMDY0LTEuMDI0IDcuMzkyLTIuNzIgOS45NTJsLTEuNjY0LTEuNTM2YzEuNTA0LTIuMzA0IDIuMjcyLTUuMjE2IDIuMzA0LTguNzY4di01LjE4NHptOC44LTguMDY0aDEwLjE0NGMuMzUyLS43NjguNjcyLTEuNTY4Ljk5Mi0yLjMzNi0zLjEzNi4xOTItNi41MjguMjg4LTEwLjE3Ni4yODhsLS42NzItMS45MmM5LjA4OCAwIDE2LjYwOC0uNjA4IDIyLjU5Mi0xLjgyNGwxLjA1NiAxLjgyNGMtMy4wNC42NzItNi41NiAxLjE1Mi0xMC41OTIgMS40NzItLjI4OC44NjQtLjYwOCAxLjY5Ni0uOTI4IDIuNDk2aDExLjkwNHYxLjk4NGgtMTIuODMyYy0uMzg0Ljc2OC0uOCAxLjQ3Mi0xLjIxNiAyLjE3NmgxNS45MDR2Mi4wNDhoLTE3LjMxMmMtLjU3Ni43NjgtMS4xNTIgMS41MDQtMS43NiAyLjIwOGgxNS44NzJ2MTUuMDcyaC0yLjIwOHYtMS4zNzZoLTE0LjQ2NHYxLjM3NmgtMi4yMDh2LTEyYy0xLjYzMiAxLjQ3Mi0zLjQyNCAyLjkxMi01LjQwOCA0LjI1NmwtMS4yNDgtMS45ODRjMy40ODgtMi4zNjggNi4zNjgtNC44NjQgOC42NC03LjU1MmgtNy44MDh2LTIuMDQ4aDkuNDA4Yy41MTItLjczNi45OTItMS40NzIgMS40MDgtMi4xNzZoLTkuMDg4em02LjMwNCAxNC4yNHYyLjAxNmgxNC40NjR2LTIuMDE2em0xNC40NjQtMS43OTJ2LTIuMTQ0aC0xNC40NjR2Mi4xNDR6bS0xNC40NjQgNS42djIuMTc2aDE0LjQ2NHYtMi4xNzZ6bTI0LjA5Ni0yMi42NTZoMjcuNDI0djIuMTQ0aC0xMi41NzZ2Mi43ODRoOS45MnYxMi42NzJoLTEwLjMwNGMtLjM4NCAyLjExMi0uOTkyIDMuODA4LTEuODg4IDUuMDg4IDQuNDggMS44ODggOS43OTIgMi45NDQgMTUuOTM2IDMuMTM2bC0uNTc2IDIuMjA4Yy02LjQzMi0uMjU2LTEyLjAzMi0xLjUwNC0xNi44LTMuNjgtMi4yNCAxLjkyLTUuOTIgMy4xMzYtMTEuMDA4IDMuNzEybC0uOTkyLTIuMTEyYzQuNDQ4LS4zNTIgNy43MTItMS4yNDggOS43Ni0yLjcyLTEuODU2LTEuMDI0LTMuNTg0LTIuMjA4LTUuMTUyLTMuNTUybDEuNzYtMS4yMTZjMS41MDQgMS4yNDggMy4xNjggMi4zMzYgNC45NiAzLjI2NC43NjgtMS4wODggMS4zNDQtMi40NjQgMS42NjQtNC4xMjhoLTkuMzc2di0xMi42NzJoOS43OTJ2LTIuNzg0aC0xMi41NDR6bTIyLjQ5NiAxNS41ODR2LTMuMzkyaC03LjY0OHYxLjEybC0uMDk2IDIuMjcyem0tMTAuMDQ4IDBjLjA2NC0uNzM2LjA5Ni0xLjUwNC4wOTYtMi4yNzJ2LTEuMTJoLTcuNTJ2My4zOTJ6bS03LjQyNC01LjMxMmg3LjUydi0zLjM2aC03LjUyem05LjgyNC0zLjM2djMuMzZoNy42NDh2LTMuMzZ6bTMwLjcyLTguMjg4IDIuMDQ4IDEuMDg4Yy0uNTc2LjY0LTEuMTg0IDEuMjQ4LTEuODI0IDEuODI0aDkuMTg0djEuODI0Yy0zLjQ1NiA2LjE0NC05Ljg4OCA5LjYtMTkuMjMyIDEwLjMzNmwtLjk5Mi0yLjA4YzIuODgtLjE5MiA1LjQ0LS42MDggNy43NDQtMS4yOC0uOTkyLTEuMjE2LTIuMDQ4LTIuMzM2LTMuMTM2LTMuMzI4bDIuMDE2LS45NmMxLjE1MiAxLjA4OCAyLjI0IDIuMjQgMy4yNjQgMy41MiAzLjMyOC0xLjM0NCA1LjkyLTMuMzYgNy43MTItNS45ODRoLTkuMzQ0Yy0yLjQ5NiAxLjQ3Mi01LjQ0IDIuNTkyLTguODY0IDMuMzZsLTEuMzQ0LTIuMTEyYzUuNjk2LTEuMDg4IDkuOTUyLTMuMTM2IDEyLjc2OC02LjIwOHptLTEuMjE2IDIwYzEuMjE2IDEuMjQ4IDIuNCAyLjU5MiAzLjQ4OCA0LjAzMiAzLjU1Mi0xLjUzNiA2LjMzNi0zLjc0NCA4LjM4NC02LjU2aC05LjQ3MmMtMi44MTYgMS4zNDQtNi4xNDQgMi4zNjgtMTAuMDE2IDMuMDRsLTEuMzc2LTIuMDQ4YzYuOTc2LS43MDQgMTIuMTI4LTIuODQ4IDE1LjQ1Ni02LjM2OGwxLjk4NCAxLjA4OGMtLjc2OC43NjgtMS41NjggMS41MDQtMi40NjQgMi4xNzZoOC43Njh2MS44MjRjLTQuNTQ0IDcuNTUyLTEyLjk5MiAxMS40NTYtMjUuNDA4IDExLjc0NGwtLjkyOC0yLjIwOGM0Ljk5Mi0uMDMyIDkuMzEyLS42NCAxMi45MjgtMS44NTYtMS4wODgtMS40NC0yLjIwOC0yLjc1Mi0zLjM5Mi0zLjkwNHoiIGZpbGw9IiMzZDNkM2QiLz48ZyBzdHJva2U9IiMzZDNkM2QiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIj48cGF0aCBkPSJtMjk0IDEwLTEwIDEwLTEwLTEwIi8+PHBhdGggZD0ibTI5NCAyMC0xMCAxMC0xMC0xMCIvPjwvZz48L3N2Zz4="}});n.appendChild(i),null===(t=e.slotElement)||void 0===t||t.parentElement.insertBefore(n,e.slotElement)}})),ro.CK=new ro(a,null,(e=>{e.slotElement.style.bottom="90px",e.slotElement.style.zIndex="99997"})),ro.COOL3C=new ro(l,(e=>{var t;if(to(e.playerType)){const n=e.container,i=e.layout;i.fixedContainer.style.setProperty("top","20px","important"),i.fixedContainer.style.setProperty("transform","scale(0.9)","important"),null===(t=n.closest(".col-12"))||void 0===t||t.style.setProperty("padding","0","important")}})),ro.BC3T_2=new ro(c,so),ro.BC3T=new ro(u,so),ro.CARNEWS=new ro(d,(e=>{to(e.playerType)&&e.layout.underlayContainer.style.setProperty("z-index","98","important")})),ro.BBCOM=new ro(p,(e=>{var t,n,i,r;const o=e.container;let s;to(e.playerType)&&(null===(t=o.closest(".tdb-block-inner"))||void 0===t||t.style.setProperty("transform","none","important"),null===(n=o.closest(".tdb-block-inner"))||void 0===n||n.style.setProperty("-webkit-transfor","none","important")),e.playerType.indexOf("STICKY")>-1&&(s=null===(r=null===(i=e.slotElement.parentElement.parentElement)||void 0===i?void 0:i.parentElement)||void 0===r?void 0:r.parentElement,null==s||s.style.setProperty("transform","unset","important"),null==s||s.style.setProperty("-webkit-transfor","unset","important"))})),ro.CHEERS=new ro(y,(e=>{if(e.slotElement.style.zIndex="49",to(e.playerType)){const t=document.getElementsByClassName("page__primary")[0];null==t||t.style.setProperty("overflow","initial");const n=null==t?void 0:t.getElementsByClassName("parallaxAd")[0];null==n||n.style.setProperty("maxWidth","unset"),To(e.layout)}})),ro.CARSTUFF=new ro(h,po,(e=>{e.container.style.setProperty("left","0","important")})),ro.BRAIN=new ro(m,(e=>{var t;null===(t=e.layout.underlayContainer)||void 0===t||t.style.setProperty("z-index","4999","important")})),ro.BCCNEWS=new ro(E,(e=>{var t;(to(e.playerType)||e.playerType.indexOf("STICKY")>-1)&&(null===(t=e.layout.slotTag.closest(".td-fix-index"))||void 0===t||t.style.setProperty("transform","none","important"))})),ro.COOL_STYLE=new ro(_,null,null,null,null,mo),ro.CAVA=new ro(N,co),ro.CAVA2=new ro(L,co),ro.DCARD=new ro(I,(e=>{var t,n,i,r,o;null===(i=null===(n=null===(t=e.slotElement.parentElement.parentElement)||void 0===t?void 0:t.parentElement)||void 0===n?void 0:n.parentElement)||void 0===i||i.style.setProperty("height","auto","important"),to(e.playerType)&&(null===(o=null===(r=e.slotElement.parentElement.parentElement)||void 0===r?void 0:r.parentElement)||void 0===o||o.style.setProperty("height","auto","important"))})),ro.CTEE=new ro(M,(e=>{var t,n,i;to(e.playerType)&&(e.layout.underlayContainer.style.setProperty("z-index","9998","important"),null===(t=e.slotElement.closest(gt.CHINATIMES))||void 0===t||t.style.setProperty("max-width","unset"),null===(n=e.slotElement.closest(gt.CHINATIMES))||void 0===n||n.style.setProperty("width","calc(96vw + 1rem)"),null===(i=e.slotElement.closest(gt.CHINATIMES))||void 0===i||i.style.setProperty("left","-0.989rem"))})),ro.CW=new ro(O,(e=>{var t;null===(t=e.slotElement.closest(".ad--scrollvideo"))||void 0===t||t.style.setProperty("z-index","2","important")})),ro.DAYBUY=new ro(A,(e=>{var t;null===(t=e.layout.underlayContainer)||void 0===t||t.style.setProperty("z-index","989","important")})),ro.CNEWS=new ro(g,(e=>{var t;null===(t=e.layout.underlayContainer)||void 0===t||t.style.setProperty("z-index","2","important")})),ro.CTS=new ro(C,(e=>{var t;null===(t=e.layout.underlayContainer)||void 0===t||t.style.setProperty("z-index","20","important")})),ro.CTI=new ro(w,(e=>{var t,n,i,r,o,s,a;const l=e.slotElement,u=e.playerType;null===(t=l.closest(".article__main"))||void 0===t||t.style.setProperty("overflow","visible","important");const c=null===(n=top.window.document.getElementById("main"))||void 0===n?void 0:n.clientWidth;if(e.container.style.setProperty("width",`${c}px`,"important"),u.includes("TRANSFORMER"))null===(i=e.layout.videoContainer)||void 0===i||i.style.setProperty("height",.5625*c+"px","important"),e.layout.container.style.setProperty("align-items","unset","important");else if(u.includes("STICKY")||"SCRATCH"===u){null===(r=e.layout.videoContainer)||void 0===r||r.style.setProperty("height",.5625*c+"px","important"),null===(o=e.layout.videoContainer)||void 0===o||o.style.setProperty("width",`${c}px`,"important"),null===(s=e.layout.videoContainer)||void 0===s||s.style.setProperty("display","block","important");const t=e.layout.videoContainer;new MutationObserver((function(e){e.forEach((function(){"fixed"===(null==t?void 0:t.style.position)?t.style.top="135px":t.style.top=""}))})).observe(t,{attributes:!0,attributeFilter:["style"]})}else if(to(u))null===(a=e.layout.container.querySelector(".moat_trackable"))||void 0===a||a.style.setProperty("width",`${c}px`,"important");else if("SCRATCH_BNB"===u){const t=e.container.querySelector(`#banner-wrapper${e.dataCenter.isipIndex}`),n=0!==e.slotElement.clientWidth?e.slotElement.clientWidth:window.screen.width,i={height:895,ratio:Math.floor(n)/640},r=i.height*i.ratio;null==t||t.style.setProperty("height",`${r}px`,"important")}})),ro.CMONEY=new ro(S,yo),ro.DAILYVIEW=new ro(R,(e=>{var t;null===(t=e.layout.underlayContainer)||void 0===t||t.style.setProperty("z-index","0","important")})),ro.DDM=new ro(v,(()=>{})),ro.BUZZHAND=new ro(D,(()=>{})),ro.DRAMAQUEEN=new ro(b,(e=>{var t,n,i,r,o;null===(t=e.layout.player)||void 0===t||t.muteButton.element.style.setProperty("overflow","unset","important"),null===(n=e.layout.closeButton)||void 0===n||n.element.style.setProperty("overflow","unset","important"),to(e.playerType)&&(To(e.layout),e.layout.fixedContainer.style.setProperty("transform-style","preserve-3d","important"),null===(i=e.layout.player)||void 0===i||i.muteButton.element.style.setProperty("transform","translateZ(99999994px)","important"),null===(r=e.layout.closeButton)||void 0===r||r.element.style.setProperty("transform","translateZ(90007px)","important"),e.playerType.indexOf("LOCK")>-1&&(document.documentElement.style.setProperty("overflow-y","unset"),document.body.style.setProperty("height","unset"),null===(o=e.layout.moreInfoButton)||void 0===o||o.querySelector("span").style.setProperty("color","#141414")))}),(e=>{var t,n,i;e.container.style.setProperty("overflow","unset","important"),null===(t=e.layout.player)||void 0===t||t.muteButton.element.style.setProperty("overflow","unset","important"),null===(n=e.layout.bottomWrapper)||void 0===n||n.style.setProperty("overflow","unset","important"),null===(i=e.layout.closeButton)||void 0===i||i.element.style.setProperty("overflow","unset","important")}),null,null,(e=>{io(e.playerType)&&(e.container.style.bottom="120px")})),ro.EVERYLITTLED=new ro(P,(e=>{to(e.playerType)&&(e.layout.slotTag.style.setProperty("width","100vw","important"),e.layout.underlayContainer.style.setProperty("z-index","1000002","important"),e.layout.fixedContainer.style.setProperty("z-index","1000002","important"),e.layout.fixedContainer.style.setProperty(ji.MARGIN_LEFT,"4%","important"))})),ro.HARPERSBAZAAR=new ro(B,(e=>{var t;null===(t=e.slotElement.closest(".ad-container"))||void 0===t||t.style.setProperty("transform","none","important")})),ro.UTAGGO=new ro(k,(e=>{var t,n,i,r;null===(r=null===(i=null===(n=null===(t=e.slotElement.parentElement)||void 0===t?void 0:t.parentElement)||void 0===n?void 0:n.parentElement)||void 0===i?void 0:i.parentElement)||void 0===r||r.style.setProperty(ji.MAX_HIGTH,"none","important")})),ro.ICOOK=new ro(U,po,(e=>{e.slotElement.style.zIndex="2147483643"})),ro.HOW01=new ro(F,(e=>{var t,n;e.playerType.includes("SHOW")&&(null===(t=e.layout.banner[0])||void 0===t||t.bannerImg.element.style.setProperty(ji.MAX_HIGTH,"none","important"),null===(n=e.layout.banner[1])||void 0===n||n.bannerImg.element.style.setProperty(ji.MAX_HIGTH,"none","important"))})),ro.JUKSY=new ro(H,null,null,null,null,(e=>{var t,n;if(e.playMode===Ct.IN_STREAM){e.container.querySelectorAll("iframe").forEach((e=>e.style.setProperty("max-width","none","important"))),null===(n=null===(t=e.player)||void 0===t?void 0:t.videoplayer)||void 0===n||n.element.style.setProperty("z-index","9899","important")}io(e.playerType)&&mo(e.layout)})),ro.IFOOD=new ro(V,(()=>{})),ro.LINETV=new ro(z,(e=>{e.slotElement.parentNode.parentNode.style.setProperty("display","block","important")}),null,null,(e=>{e.slotElement.parentNode.parentNode.style.setProperty("display","block","important")})),ro.INSIDE=new ro(Y,(e=>{if(to(e.playerType)){const t=top.window,n=t.document.getElementsByClassName("board-in_a_p2_special")[0];n&&-1===e.playerType.indexOf("PAGE")&&(n.style.setProperty("height",t.innerHeight+"px","important"),e.slotElement.style.position="absolute"),To(e.layout)}})),ro.HELLOYISHI=new ro(G,(e=>{var t,n;let i;to(e.playerType)?(i=e.layout.underlayContainer,e.layout.slotTag.style.setProperty("left","0px","important"),e.layout.slotTag.style.setProperty("width",top.window.innerWidth+"px","important"),e.layout.slotTag.parentElement.style.setProperty("margin-right","-1rem","important"),e.layout.slotTag.parentElement.style.setProperty(ji.MARGIN_LEFT,"-1rem","important"),e.layout.slotTag.parentElement.parentElement.parentElement.style.setProperty("overflow","unset","important")):(i=e.layout.container,null===(t=e.layout.slotTag.parentElement.parentElement)||void 0===t||t.parentElement.style.setProperty(ji.MAX_HIGTH,"none","important"),null===(n=e.layout.slotTag.parentElement.parentElement)||void 0===n||n.parentElement.style.setProperty("max-width","none","important"));const r=i.closest(".deeekb");r&&(r.style.setProperty("width",top.window.innerWidth+"px","important"),r.style.setProperty(ji.MAX_HIGTH,"none","important"),r.style.setProperty("max-width","none","important"),r.style.setProperty("overflow","unset","important"))})),ro.KEELUNGHIHI=new ro(W,(e=>{if(to(e.playerType)){const e=top.window.document.getElementsByClassName("single-post")[0];null==e||e.style.setProperty("overflow-x","unset","important")}})),ro.LAVIE=new ro(Q,(()=>{})),ro.MABABY=new ro(q,(e=>{var t;null===(t=e.layout.underlayContainer)||void 0===t||t.style.setProperty("z-index","9998","important")})),ro.MIRROR=new ro(K,(e=>{to(e.playerType)&&e.layout.underlayContainer.style.setProperty("z-index","518","important")}),(e=>{e.slotElement.style.zIndex="9000"})),ro.MAMACLUB=new ro($,(e=>{var t;null===(t=e.layout.underlayContainer)||void 0===t||t.style.setProperty("z-index","1033","important")})),ro.MONEYLINK=new ro(J,(e=>{var t;null===(t=e.layout.fixedContainer)||void 0===t||t.style.setProperty("top","95px","important")})),ro.MNEWS=new ro(ee,(()=>{})),ro.NIUSNEWS=new ro(te,(e=>{if(to(e.playerType)){const t=e.layout.slotTag.closest(".post-onead");null==t||t.style.setProperty("overflow","visible","important")}})),ro.NEWSLENS=new ro(ne,(e=>{if(to(e.playerType)){e.slotElement.parentElement.parentElement.style.setProperty("overflow","initial","important")}})),ro.NEWTALK=new ro(ie,(e=>{e.container.style.zIndex="10000"}),(e=>{e.container.style.zIndex="949999"}),(e=>{e.container.style.zIndex="10045"})),ro.NOCANCERS=new ro(re,(e=>{var t,n;e.playerType.includes("SHOW")&&(null===(t=e.layout.banner[0])||void 0===t||t.bannerImg.element.style.setProperty(ji.MAX_HIGTH,"none","important"),null===(n=e.layout.banner[1])||void 0===n||n.bannerImg.element.style.setProperty(ji.MAX_HIGTH,"none","important"))})),ro.LOOKIN=new ro(oe,(e=>{to(e.playerType)&&e.slotElement.style.setProperty("width","100vw","important")})),ro.POPDAILY=new ro(le,(e=>{var t,n;const i=e.layout.slotTag.closest(".Zi_ad_ar_iR"),r="scale(0.5475) translateY(320px)",o=e.layout.slotTag.getBoundingClientRect().width;i&&(i.style.setProperty("display","block","important"),e.slotElement.style.setProperty("margin","unset","important"),e.slotElement.style.setProperty("max-width","unset","important"),e.slotElement.style.setProperty("width",o+"px","important")),e.playerType.indexOf("STICKY")>-1&&(e.layout.videoContainer.style.setProperty("width",o+"px","important"),e.layout.banner.element.style.setProperty("transform",r,"important")),"SCRATCH"===e.playerType&&(e.layout.videoContainer.style.setProperty("width",o+"px","important"),null===(t=e.layout.banner[0])||void 0===t||t.element.style.setProperty("transform",r,"important"),null===(n=e.layout.banner[1])||void 0===n||n.element.style.setProperty("transform",r,"important")),po(e)}),null,null,null,(e=>{io(e.playerType)&&(e.layout.container.style.bottom="50px",e.layout.container.style.align="left bottom")})),ro.PUNCHLINE=new ro(ue,(e=>{var t;let n;if(to(e.playerType)){null===(t=e.layout.underlayContainer.closest(".main-wrap"))||void 0===t||t.style.setProperty("transform","none","important")}else e.playerType.indexOf("STICKY")>-1&&(n=top.window.document.querySelector(".main-wrap"),null==n||n.style.setProperty("transform","none","important"))})),ro.STARRYEAGLE=new ro(de,(e=>{var t;to(e.playerType)&&(null===(t=e.layout.underlayContainer.closest(".Zi_ad_ar_iR"))||void 0===t||t.style.setProperty("overflow","initial","important"))})),ro.STORM=new ro(pe,(e=>{var t,n;null===(t=e.container.closest(".storm_magic_placeholder"))||void 0===t||t.style.setProperty("margin","unset","important"),null===(n=e.container.closest(".storm_magic_placeholder"))||void 0===n||n.style.setProperty("min-width","100%","important"),To(e.layout)}),null,(e=>{var t;if(e.playerType.indexOf("POSTER")<=-1){const n=e.layout.container.querySelector(`#close-button${e.dataCenter.isipIndex}`);if(n){const e=n.cloneNode(!0);e.id="close-img-layer",e.style.setProperty("z-index","2147483646","important"),e.style.setProperty("pointer-events","none","important"),e.style.setProperty("opacity","1","important"),e.style.setProperty("display","block","important"),n.parentElement.appendChild(e),null===(t=n.firstElementChild)||void 0===t||t.remove(),n.addEventListener("click",(e=>{e.stopPropagation()}))}}})),ro.SPORTSV=new ro(ye,(e=>{to(e.playerType)&&(e.slotElement.style.left="unset",e.layout.underlayContainer.style.zIndex="99998",e.layout.fixedContainer.style.zIndex="99998",To(e.layout))})),ro.TEEPR=new ro(he,null,null,(e=>{var t,n,i,r;null===(t=e.container.querySelector("#close-img"))||void 0===t||t.style.setProperty("right","4px"),null===(n=e.container.querySelector("#close-img"))||void 0===n||n.style.setProperty("top","4px"),no(e.playerType)&&(null===(i=e.layout.ctaIcon)||void 0===i||i.style.setProperty("box-sizing","unset","important"),null===(r=e.layout.ctaIcon)||void 0===r||r.style.setProperty("left","unset","important"))})),ro.TEL3C=new ro(me,(e=>{to(e.playerType)&&(e.layout.underlayContainer.style.setProperty("z-index","9998","important"),e.layout.fixedContainer.style.setProperty("transform","scale(0.88)","important"))})),ro.TOYPEOPLE=new ro(Ee,(e=>{e.container.querySelectorAll("img").forEach((e=>{e.style.setProperty("box-shadow","none","important")})),to(e.playerType)&&e.layout.underlayContainer.style.setProperty("z-index","99","important")})),ro.TTSHOW=new ro(Te,(()=>{})),ro.TTVC=new ro(_e,(e=>{var t;null===(t=e.layout.underlayContainer)||void 0===t||t.style.setProperty("z-index","998","important")})),ro.UCAR=new ro(Ne,po),ro.WALKERLAND=new ro(Le,null,null,null,null,(e=>{var t,n;if(e.playMode===Ct.IN_STREAM){const i=e.layout.container;null===(t=i.closest(".top-slide-ad"))||void 0===t||t.style.setProperty("height","auto","important"),null===(n=i.closest(".container"))||void 0===n||n.style.setProperty(ji.MAX_HIGTH,"none","important")}})),ro.WOMANCRAZY=new ro(Ie,null,(e=>{e.slotElement.style.marginBottom="44px",e.slotElement.classList.add("ad-bottom")})),ro.WOMENSHUO=new ro(Me,(()=>{})),ro.MARIECLAIRE=new ro(Oe,(e=>{if(e.layout.slotTag.style.setProperty("padding-top","20px","important"),to(e.playerType)){e.layout.fixedContainer.style.setProperty("top","34.36px","important"),e.layout.fixedContainer.style.setProperty("transform","translateZ(0px) scale(0.946)","important");const t=document.createElement("style");document.head.appendChild(t);const n=t.sheet;null==n||n.insertRule(".adUnderlay:before{z-index:2147483646}")}})),ro.ZI=new ro(Ae,(e=>{var t;e.playerType.indexOf("SCRATCH")>-1&&e.slotElement.style.setProperty("width","100%","important"),null===(t=e.layout.fixedContainer)||void 0===t||t.style.setProperty("top","100px","important")}),null,null,null,(e=>{io(e.playerType)&&mo(e.layout)})),ro.BABYHOME=new ro(ge,(e=>{var t,n,i,r;const o=null===(n=null===(t=(e.layout.underlayContainer||e.layout.slotTag).parentElement)||void 0===t?void 0:t.parentElement)||void 0===n?void 0:n.parentElement;if((to(e.playerType)||"TRANSFORMER"===e.playerType)&&o&&(o.style.setProperty("overflow","unset","important"),o.style.setProperty("width","auto","important"),o.style.setProperty("height","auto","important")),null===(i=e.layout.fixedContainer)||void 0===i||i.style.setProperty("bottom","40px","important"),"TRANSFORMER"===e.playerType){const t=Math.floor(window.screen.width),n=Math.floor(.5625*t);e.layout.container.style.setProperty("width","auto","important"),null===(r=e.layout.player)||void 0===r||r.element.style.setProperty("height",n+"px","important")}})),ro.BUSINESSTODAY=new ro(Se,(()=>{})),ro.WAYNESAN=new ro(Re,(()=>{})),ro.BUZZORANGE=new ro(fe,(e=>{var t;e.playerType.indexOf("PAGE")>-1&&e.container.style.setProperty("position","absolute","important"),to(e.playerType)&&(e.container.style.setProperty("position","sticky","important"),null===(t=e.layout.closeButton)||void 0===t||t.element.style.setProperty("transform","translateZ(1px)","important"))})),ro.TOMORROW=new ro(ve,(e=>{var t,n;to(e.playerType)&&(null===(t=e.layout.underlayContainer.closest(".main-container"))||void 0===t||t.style.setProperty("overflow","unset","important"),null===(n=e.layout.underlayContainer.closest(".post-content"))||void 0===n||n.style.setProperty("overflow","unset","important"))})),ro.KPOPN=new ro(De,(()=>{})),ro.HINETMAIL=new ro(je,(()=>{})),ro.LIFE_MOBILE=new ro(xe,(e=>{var t;e.playerType.indexOf("LOCK")>-1&&(null===(t=e.layout.countDownTimer)||void 0===t||t.element.style.setProperty("right","7.5vw"))})),ro.BIJI_HIKING=new ro(be,(e=>{to(e.playerType)&&(To(e.layout),e.container.style.setProperty(ji.CLIP_PATH,"inset(0% -5%)","important"))})),ro.BIJI_RUNNING=new ro(Pe,(()=>{})),ro.BIJI_BASKETBALL=new ro(Be,(e=>{var t;null===(t=e.layout.underlayContainer)||void 0===t||t.style.setProperty("z-index","11","important")})),ro.BNEXT_MEET=new ro(ke,(()=>{})),ro.BNEXT_DIGITALERA=new ro(Ue,(e=>{var t,n;null===(t=e.layout.underlayContainer)||void 0===t||t.style.setProperty("z-index","9","important"),null===(n=e.layout.fixedContainer)||void 0===n||n.style.setProperty("top","90px","important")})),ro.BNEXT_MANAGER=new ro(Fe,(e=>{ho(e.layout)}),(e=>{ho(e.layout)}),(e=>{ho(e.layout);const t=e.layout.bannerCloseButton||e.layout.videoCollapseButton||e.layout.bannerCollapseButton;t&&(t.element.style.width="50px",t.element.style.height="50px",t.element.style.top="35px",t.element.style.right="15px")})),ro.BNEXT_DESIGN=new ro(He,null,null,null,null,mo),ro.BUSINESSWEEKLY_MAIN=new ro(Ve,null,null,null,null,(e=>{io(e.playerType)&&(e.container.style.bottom="100px")})),ro.BUSINESSWEEKLY_WEALTH=new ro(ze,(e=>{var t,n,i,r;to(e.playerType)&&(null===(r=null===(i=null===(n=null===(t=e.slotElement.parentNode)||void 0===t?void 0:t.parentNode)||void 0===n?void 0:n.parentNode)||void 0===i?void 0:i.parentElement)||void 0===r||r.style.setProperty("height","auto"),To(e.layout))})),ro.BUSINESSWEEKLY_HEALTH=new ro(Ye,(e=>{var t,n;to(e.playerType)&&(e.layout.underlayContainer.style.setProperty("z-index","101","important"),null===(t=e.slotElement.parentElement)||void 0===t||t.parentElement.style.setProperty("height","auto","important"),null===(n=e.slotElement.parentElement)||void 0===n||n.style.setProperty("height","auto","important"),To(e.layout))})),ro.CHINATIMES_MAIN=new ro(Ge,(e=>{var t,n;const i=e.slotElement.closest(gt.CHINATIMES2);to(e.playerType)&&(null==i||i.style.setProperty(ji.CLIP_PATH,"polygon(-5% 0%, 105% 0%, 105% 100%, -5% 100%)","important"),null==i||i.style.setProperty(ji.CLIP_PATH_KIT,"polygon(-5% 0%, 105% 0%, 105% 100%, -5% 100%)","important"),null===(t=e.container.closest(gt.CHINATIMES))||void 0===t||t.style.setProperty("overflow","unset","important")),e.playerType!==wt.TRANSFORMER_STICKY&&e.playerType!==wt.TRANSFORMER||(null==i||i.style.setProperty(ji.CLIP_PATH,"none","important"),null==i||i.style.setProperty(ji.CLIP_PATH_KIT,"none","important"),null===(n=e.container.closest(".ad"))||void 0===n||n.style.setProperty("z-index","2","important"))}),null,(e=>{var t;null===(t=e.container.querySelector(`#close-button${e.dataCenter.isipIndex}`))||void 0===t||t.style.setProperty("transform","scale(1.2)")}),null,(e=>{var t,n,i,r;if(io(e.playerType)){e.slotElement.style.setProperty("bottom","120px","important");const o=e.slotElement.querySelector("#follow-control-wrapper0");null===(t=null==o?void 0:o.querySelector("#close-button0"))||void 0===t||t.style.setProperty("right","-24px","important"),null===(n=null==o?void 0:o.querySelector("#close-button0"))||void 0===n||n.style.setProperty("top","-24px","important"),null===(i=null==o?void 0:o.querySelector("#scale-button0"))||void 0===i||i.style.setProperty("right","4px","important"),null===(r=null==o?void 0:o.querySelector("#scale-button0"))||void 0===r||r.style.setProperty("top","4px","important"),e.slotElement.style.setProperty(ji.CLIP_PATH,"none","important")}})),ro.CHINATIMES_TRUEMII=new ro(We,oo),ro.CHINATIMES_WANTRICH=new ro(Qe,oo),ro.COMMONHEALTH_CLUB=new ro(qe,(e=>{to(e.playerType)&&(To(e.layout),e.container.style.setProperty("z-index","0","important"))})),ro.COMMONHEALTH_HEALTH=new ro(Xe,(e=>{var t;null===(t=e.slotElement.closest("#parallax-ads"))||void 0===t||t.style.setProperty("display","block","important"),to(e.playerType)&&(To(e.layout),e.container.style.zIndex="50")}),null,null,(e=>{var t;null===(t=e.slotElement.closest("#parallax-ads"))||void 0===t||t.style.setProperty("display","block","important")})),ro.HEARST_WOMENHEALTH=new ro(Ke,lo,lo,lo),ro.HEARST_ELLE=new ro(Ze,lo,lo,lo),ro.HEARST_COPO=new ro($e,lo,lo,lo),ro.CNYES_MOBILE=new ro(Je,(e=>{var t;null===(t=e.layout.underlayContainer)||void 0===t||t.style.setProperty("z-index","3","important")}),null,null,null,ao),ro.CNYES_NEWS=new ro(et,(e=>{var t;null===(t=e.layout.underlayContainer)||void 0===t||t.style.setProperty("z-index","3","important")}),null,null,null,ao),ro.ETTODAY_MAIN=new ro(tt,(()=>{})),ro.ETTODAY_NEWS=new ro(nt,null,(e=>{e.slotElement.style.zIndex="999999999"})),ro.EBC_EBCBUZZ=new ro(rt,(e=>{var t,n,i,r,o,s;e.slotElement.style.setProperty(ji.MARGIN_LEFT,"unset","important"),e.slotElement.style.setProperty("margin-right","unset","important");const a=top.window.innerWidth,l=.5625*a,u=a/640*.94;to(e.playerType)||(e.slotElement.style.setProperty("max-width",.94*a+"px","important"),e.playerType===wt.TRANSFORMER_SOCIAL&&(null===(t=e.layout.banner[1])||void 0===t||t.bannerImg.element.style.setProperty("transform",`scale(${u})`,"important"),null===(n=e.layout.uiController)||void 0===n||n.style.setProperty("width",.94*a+"px","important"),null===(i=e.layout.uiController)||void 0===i||i.style.setProperty("height",.94*a+"px","important")),e.playerType===wt.BNB&&(e.layout.logoButton.element.style.setProperty("max-width",76*u+"px"),e.layout.logoButton.element.style.setProperty(ji.MAX_HIGTH,64*u+"px"),null===(r=e.layout.banner[0])||void 0===r||r.element.style.setProperty(ji.MAX_HIGTH,.94*l+"px","important")),null===(o=e.layout.videoContainer)||void 0===o||o.style.setProperty("max-width",.94*a+"px","important"),null===(s=e.layout.videoContainer)||void 0===s||s.style.setProperty(ji.MAX_HIGTH,.94*a+"px","important"))})),ro.EBC_HOUSE=new ro(ot,(()=>{})),ro.EBC_FNC=new ro(st,uo),ro.EBC_MAIN=new ro(at,uo),ro.GVM_HEALTH=new ro(ct,null,(e=>{e.slotElement.style.marginBottom="50px"})),ro.LTN_MAIN=new ro(yt,(e=>{var t;e.container&&(e.container.style.zIndex="0"),to(e.playerType)&&(e.layout.underlayContainer&&(e.layout.underlayContainer.style.zIndex="999"),e.playerType.indexOf("PAGE")>-1&&(null===(t=e.layout.closeButton)||void 0===t||t.element.style.setProperty("transform","scale(1.2)","important")))}),(e=>{e.container.style.zIndex="997"}),null,null,(e=>{var t;if(io(e.playerType)&&(e.container.style.left="unset",e.container.style.bottom="0px",e.container.style.right="0px",e.container.style.align="right bottom"),e.playMode===Ct.IN_STREAM)try{e.slotElement.parentElement.parentElement.parentElement.parentElement.style.textAlign="center"}catch(e){null===(t=document.getElementById("ad-K11"))||void 0===t||t.style.setProperty("text-align","center")}})),ro.NOWNEWS_MAIN=new ro(ht,(e=>{ho(e.layout),po(e)}),(e=>{e.slotElement.style.zIndex="5999"}),(e=>{ho(e.layout)}),null,(e=>{io(e.playerType)&&(e.container.style.bottom="100px")})),ro.NOWNEWS_DEMO=new ro(mt,(()=>{})),ro.PARENTING_MAIN=new ro(Et,(e=>{to(e.playerType)&&(e.layout.underlayContainer.style.setProperty("z-index","4","important"),To(e.layout))})),ro.TECHBANG_MAIN=new ro(_t,(e=>{var t;null===(t=e.layout.underlayContainer)||void 0===t||t.style.setProperty("z-index","99","important")})),ro.TECHBANG_MF=new ro(Nt,(e=>{ho(e.layout)}),(e=>{ho(e.layout)})),ro.TECHBANG_DIGIPHOTO=new ro(Lt,(e=>{var t,n;e.layout.player&&(null===(n=null===(t=e.layout.player)||void 0===t?void 0:t.muteButton._button)||void 0===n||n.element.style.setProperty("padding","0","important"))})),ro.PIXNET_MAIN=new ro(It,(e=>{var t,n,i,r,o,s,a,l,u;const c=e.layout.player;null===(t=e.layout.slotTag.closest(gt.PIXNET_IR))||void 0===t||t.style.setProperty("width","100%","important"),null===(n=e.layout.slotTag.closest(gt.PIXNET_IR))||void 0===n||n.style.setProperty("display","block","important"),null===(i=e.layout.slotTag.closest(gt.PIXNET))||void 0===i||i.style.setProperty("width","100%","important"),null===(r=e.layout.slotTag.closest(gt.PIXNET))||void 0===r||r.style.setProperty("display","block","important"),e.slotElement.style.setProperty("z-index","99998","important"),c&&(null===(o=null==c?void 0:c.muteButton._button)||void 0===o||o.element.style.setProperty("background","none","important"),null===(s=null==c?void 0:c.muteButton._button)||void 0===s||s.element.style.setProperty("border","none","important"),null==c||c.muteButton.element.style.setProperty("background","none","important"),null==c||c.muteButton.element.style.setProperty("border","none","important")),to(e.playerType)&&(null===(u=null===(l=null===(a=e.slotElement.parentElement.parentElement)||void 0===a?void 0:a.parentElement)||void 0===l?void 0:l.parentElement)||void 0===u||u.style.setProperty("height","inherit","important"),To(e.layout))}),(e=>{e.container.style.setProperty("margin-bottom","45px","important"),e.container.style.setProperty("z-index","99999","important")}),(()=>{const e=top.window.document.querySelector("body");null==e||e.style.setProperty("position","absolute","important")}),(e=>{var t,n,i;const r=e.slotElement;null===(t=r.closest(gt.PIXNET_IR))||void 0===t||t.style.setProperty("width","100%","important"),null===(n=r.closest(gt.PIXNET))||void 0===n||n.style.setProperty("width","100%","important"),null===(i=r.closest(".in-read-ad-sticky-wrapper"))||void 0===i||i.style.setProperty("width","unset","important"),e.container.style.setProperty("width","100%","important")}),(e=>{var t,n;const i=null===(n=null===(t=e.slotElement.parentNode)||void 0===t?void 0:t.parentNode)||void 0===n?void 0:n.parentNode;null==i||i.style.setProperty("width","100%","important"),null==i||i.style.setProperty("height","auto","important")})),ro.OPENNEWS=new ro(se,po),ro.FULLFEN=new ro(x,po),ro.MOMBABY=new ro(Z,po),ro.PANSCI=new ro(ae,po),ro.MING=new ro(X,po),ro.GQ=new ro(f,po);function ho(e){var t;null===(t=e.logoButton)||void 0===t||t.element.style.setProperty("border","none","important")}function mo(e){e.container.style.left="unset",e.container.style.bottom="0px",e.container.style.right="0px",e.container.style.align="right bottom"}function Eo(e,t,n){let i=!1;const r=window.location.host;for(const o of e)if(-1!==r.indexOf(o)&&!t){Ai(n),i=!0;break}return i}function To(e){e.fixedContainer&&(e.fixedContainer.style.transform="scale(0.9)")}class _o{constructor(){this.prepareAd=function(){const e=window._ONEAD.pub.host?window._ONEAD.pub.host:window._ONEAD.pub.external_url.match(/\/\/(\w+)/)[1],t=window._ONEAD.pub.player_mode||Ct.MIR,n={},i=window._ONEAD.responseFrequency||n;n[t]="0";const r=document.createElement("script");r.async=!0,r.src="https://ad-specs.guoshipartners.com/static/js/onead-sf.min.js",r.onload=function(){window.Guoshi.requestAd.env.safeFrame.setup({uid:window._ONEAD.pub.uid,pid:window._ONEAD.pub.dedicated_pid,adid:window._ONEAD.pub.ad_id,responseFrequency:i,host:e,isSpeed:window._ONEAD.pub.isSpeed,scopes:window._ONEAD.pub.scopes,slotElement:window._ONEAD.pub.slotobj,slotId:window._ONEAD.pub.slotobj.id,slotLimit:{width:"640",height:"360"},slots:window._ONEAD.pub.slots,playMode:window._ONEAD.pub.player_mode,playerType:window._ONEAD.pub.player_type,noExternal:window._ONEAD.pub.no_external,dfpConfig:{googleViewPixel:window._ONEAD.pub.google_view_pixel,googleViewClick:window._ONEAD.pub.google_view_click},queryAdCallback:e=>{Oi(window._ONEAD.pub.queryAdCallback)||window._ONEAD.pub.queryAdCallback({hasAd:null!==e})}})},document.head.appendChild(r)},this.queryAdCallback=function(e,t,n){let i=!1;if(!t)switch(n.pub.player_mode){case Ct.MIR:case Ct.IR:i=Eo(Ot,t,n);break;case Ct.MFS:i=Eo(At,t,n)}if(!Oi(e)&&!i){const n={};if(null!==t)n.hasAd=!0;else switch(n.hasAd=!1,!0){case Ei.indexOf(Mt)>-1:Mi([Ct.MIR,Ct.MS],window);break;case Ei.indexOf(at)>-1:Mi([Ct.MIR,Ct.MS,Ct.MIC],window);break;case Ei.indexOf(U)>-1:case Ei.indexOf(z)>-1:Mi([Ct.MIC],window);break;case Ei.indexOf(j)>-1:Mi([Ct.MIR,Ct.IR,Ct.MS],window)}e(n)}}}adQueryProcess(){if(this.checkIfNeedContinue()){let e={highestWin:window,inSafeFrame:!1};e=_i(e,window),e.inSafeFrame?this.prepareAd():(window._ONEAD.pub.test_mode?Ii(`https://127.0.0.1:${window._ONEAD.pub.test_mode[1]||8080}'/publisher_js_api/guoshipartners/static/js/isip.js`):Ii("https://ad-specs.guoshipartners.com/static/js/isip.js"),this.bindEventListener(e),window.ONEAD_request_queue=void 0===window.ONEAD_request_queue?[]:window.ONEAD_request_queue,window.ONEAD_request_queue.push(this.request_isip.bind(this)),window.is_requesting_isip||this.check_requesting_isip(Ti()))}}check_requesting_isip(e){if(e.ONEAD_request_queue.length>0){e.ONEAD_request_queue.shift().bind(this)()}}checkIfNeedContinue(){let e=!0,t=!1;if(this.isSameAdUnit())if(0===window.ONEAD_pubs.length)e=!1;else{for(const e of window.ONEAD_pubs)if(!e.used){e.used=!0,t=!0;break}e=t}return e}isSameAdUnit(){let e=!1;return Ei.indexOf(he)>-1?e=!0:Oi(window._ONEAD.pub.is_same_adUnit)||(e=window._ONEAD.pub.is_same_adUnit),e}dynamic_article_insert(e,t,n,i,r,o){const s=parent.document.getElementsByClassName(t)[n]||parent.document.getElementById(t);if(!s||i>1)return;const a=s.children.length-r,l=Math.floor(a*i);if(l<0)return;const u=s.children[l],c=parent.document.getElementById(e+o);u instanceof HTMLElement?s.insertBefore(c,u):s.appendChild(c)}request_isip(){if(0===window.ONEAD_pubs.length)return;window.is_requesting_isip=!0;const e=window.ONEAD_pubs.shift();window.ONEAD=e,e.customSetting={mirs:{fixedContainerMarginLeft:void 0,needAdjustMargin:void 0},mobileCommon:{underlayContainerZindex:void 0,fixedContainerZIndex:void 0,isVerticalSeriesUseClip:void 0,useTimerUpdateInsteadScrollEvent:void 0,needAdjustPosterImgStyle:void 0,clipTargetParantElement:{type:void 0,name:void 0}}};const t={};let n,i,r=null,o=e.pub.slotobj;const s=e.pub.slots,a=window.location.href;if(window.ONEAD_LIB=t,Oi(parent.window.ONEADs)&&(parent.window.ONEADs=[]),e.ad_id=e.pub.ad_id,e.isip_index=parent.window.ONEADs.length,parent.window.ONEADs.push(e),e.pub.player_mode===Ct.MIC||a.indexOf(he)>-1||a.indexOf(_)>-1)switch(e.pub.player_mode){case Ct.MIR:Ii("https://ad-specs.guoshipartners.com/static/js/player-mir.min.js");break;case Ct.MIC:Ii("https://ad-specs.guoshipartners.com/static/js/player-mib.min.js");break;case Ct.MFS:Ii("https://ad-specs.guoshipartners.com/static/js/player-mfs.min.js");break;case Ct.MS:Ii("https://ad-specs.guoshipartners.com/static/js/player-ms.min.js");break;default:Ii("https://ad-specs.guoshipartners.com/static/js/player-mw.min.js")}let l,u;if(e.pub.player_mode===Ct.IN_STREAM||e.pub.player_mode===Ct.IR||e.pub.player_mode===Ct.MIR||e.pub.player_mode===Ct.MIC||e.pub.player_mode===Ct.MS?(o=document.getElementById(o.id.replace(/\d+/g,"")),o.id=o.id.replace(/\d+/g,"")+e.isip_index,s[0]=s[0]+e.isip_index,n=e.pub.player_mode_div+e.isip_index):n=e.pub.player_mode_div,window.frameElement)window.frameElement.style.display="none",i=window.frameElement.parentNode.parentElement;else{if(e&&e.pub&&a.indexOf(ht)>-1){l=o,o=o.parentNode;try{if("BODY"!==o.nodeName&&o.hasAttribute("id")){for(const e in c.slot_manager_instance.l)if(e===o.getAttribute("id")){r=e;break}}else r=l.getAttribute("id")}catch(e){r=l.getAttribute("id")}}else do{var c;l=o,o=o.parentNode,"BODY"!==o.nodeName&&o.hasAttribute("id"),r=l.getAttribute("id");break}while(null==r);i=document.getElementById(r)}i.id=i.id+e.isip_index,a.indexOf(Mt)>-1&&e.pub.player_mode===Ct.MFS&&(l.id=l.id.split(e.isip_index)[0]);for(let t=s.length-1;t>=0;t--){const n=document.createElement("div");if(n.id=s[t],window.frameElement)if(e.isDfpIframeMode=!0,a.indexOf(we)>-1||a.indexOf(f)>-1){const e=window.parent.document.querySelectorAll("p"),t=[];e.forEach((function(e){e.innerText.length>30&&t.push(e)}));const i=t[1];i&&i.parentNode.insertBefore(n,i.nextSibling)}else window.frameElement.parentNode.insertBefore(n,window.frameElement.parentNode.children[0]);else i.appendChild(n)}Oi(e.pub.servingFlag)||(e.exclude=e.pub.servingFlag),Oi(e.pub.player_type)?this.filterPlayerType(e):e.player_type=e.pub.player_type,Oi(e.pub.scopes)||(e.scopes=e.pub.scopes),e.slot_limit={width:970,height:420},Oi(e.pub.slot_limit_multiple)?e.slot_limit_multiple={inread:{width:640,height:420}}:e.slot_limit_multiple=e.pub.slot_limit_multiple,e.response_freq={start:1,step:1},e.isDfpMode=!0,parent.window.ONEAD_incover_list=parent.window.ONEAD_incover_list||[],window.ONEAD_incover_list=window.ONEAD_incover_list||[],e.uid=e.pub.uid,e.category=e.pub.category||"",e.appear_opening=e.pub.appear_opening||!1,e.force_backend=!!e.pub.force_backend&&e.pub.force_backend,e.dedicated_pid=Oi(e.pub.dedicated_pid)?void 0:e.pub.dedicated_pid,e.external_url=e.pub.external_url,e.wrapper="ONEAD_player_wrapper",e.wrapper_multiple={"desktop-frame":"ONEAD_player_wrapper",instream:"ONEAD_player_wrapper",inread:"ONEAD_inread_wrapper"+e.isip_index,incover:"ONEAD_incover_wrapper"},this.createFreq(e),this.createCMD(e,s,n),this.createChangeState(e,i),this.createOnGetRes(e,i),0!==e.isip_index&&(parent.window.ONEAD_is_window_onload=!0),u=e.pub.test_mode?`https://127.0.0.1:${e.pub.test_mode[1]||8080}/publisher_js_api/guoshipartners/static/js/isip.js`:"https://ad-specs.guoshipartners.com/static/js/isip.js";const d=document.createElement("script");d.type="text/javascript",d.async=!0,d.src=u,d.onload=n=>{if(e.isDfpIframeMode)for(const e in parent.window)-1!==e.indexOf("ONEAD_")&&(window[e]=parent.window[e]);window.is_requesting_isip=!1,0!==window.ONEAD_request_queue.length&&this.check_requesting_isip(Ti()),Oi(t.executeWhenIsipLoaded)||"function"!=typeof t.executeWhenIsipLoaded||t.executeWhenIsipLoaded()};const p=document.getElementsByTagName("head")[0];null==p||p.appendChild(d)}filterPlayerType(e){switch(!0){case Ei.indexOf(Mt)>-1:e.pub.player_mode===Ct.MIC&&(e.player_type=Object.values(wt).filter((function(e){return e.indexOf("BOTTOM")>-1||e.indexOf("MOBILE")>-1})).filter((function(e){return e!==wt.BOTTOM_BANNER_640X273&&e!==wt.BOTTOM_CUBE_BANNER_640X273})));break;case Ei.indexOf(Ce)>-1:e.pub.player_mode===Ct.MIR&&(e.player_type=Object.values(wt).filter((function(e){return!(e.indexOf("BOTTOM")>-1||e.indexOf("MOBILE")>-1||e.indexOf("HTML5")>-1)})).filter((function(e){return e!==wt.SCROLLER_VERTICAL&&e!==wt.SCROLLER_V2&&e!==wt.SCROLLER})));break;case Ei.indexOf(H)>-1:e.pub.player_mode===Ct.MIC&&(e.player_type=Object.values(wt).filter((function(e){return e.indexOf("BOTTOM")>-1||e.indexOf("MOBILE")>-1})).filter((function(e){return e!==wt.BOTTOM_FLASH_V2&&e!==wt.BOTTOM_FLASH_V2_BANNER_640X273&&e!==wt.BOTTOM_HIT&&e!==wt.BOTTOM_HIT_VIDEO&&e!==wt.BOTTOM_FLASH_VIDEO})))}}createOnGetRes(e,t){parent.ONEAD_on_get_response=parent.ONEAD_on_get_response||[],parent.ONEAD_on_get_response.push(((e,n)=>{if(null!==e)n.ONEAD_expand_slot(),(!function(){const e=window.location.host;return!!(e.includes(rt)||e.includes(at)||e.includes(st))}()||e.play_mode!==Ct.MFS)&&t.setAttribute("style","width:auto !important; height:auto !important; margin:0 auto !important"),n.pub.dynamicInsert&&(n.parser_content=this.dynamic_article_insert,n.pub.dynamicInsert(e));else{const e=parent.window.googletag;n.pub.passbackId&&e&&e.cmd.push((function(){e.display(n.pub.passbackId)}))}this.queryAdCallback(n.pub.queryAdCallback,e,n)}))}bindEventListener(e){window.ONEAD_lib_hasBindEventListener||(e.highestWin.document.addEventListener("adsContentIsEmpty",(function(){e.highestWin.ONEADs.forEach((t=>{t.pub&&t.pub.slots[0]===e.highestWin.ONEAD_current_slot&&t.pub.queryAdCallback({hasAd:!1})}))})),window.ONEAD_lib_hasBindEventListener=!0)}createChangeState(e,t){parent.window.changeADState=parent.window.changeADState||[],parent.window.changeADState.push((n=>{const i=function(){e.ONEAD_cleanup(),e.play_mode!==Ct.MIC&&setTimeout((function(){t.style.display="none"}),400)};if("COMPLETED"===n.newstate)switch(!0){case Ei.indexOf(l)>-1:case Ei.indexOf(ne)>-1:case Ei.indexOf(Je)>-1:case Ei.indexOf(et)>-1:e.play_mode!==Ct.IN_STREAM&&i();break;default:i()}else if("DELETED"===n.newstate){switch(!0){case Ei.indexOf(Mt)>-1:e.play_mode===Ct.IN_STREAM&&document.getElementsByClassName("ad-full-page-continue")[0].click();break;case Ei.indexOf(Ge)>-1:e.play_mode===Ct.MIC&&(top.window.document.getElementById("div_pagead_adarea").style.setProperty("display","none"),top.window.document.getElementById("div_pagead_bg").style.setProperty("display","none"))}i()}}))}createCMD(e,t,n){e.cmd=e.cmd||[],e.cmd.push((function(){if(Oi(e.pub.isSpeed)){let t=e.pub.player_mode;const i=new URL(window.location.href).searchParams.get("preview_playmode");i&&i.toLowerCase()===Ct.DPF&&(t=i.toLowerCase()),e.ONEAD_slot(n,t)}else Oi(e.pub.player_mode)?(e.ONEAD_slot(t[0],"inread"),e.ONEAD_slot(t[0],"mobile-inread")):e.ONEAD_slot(t[0],e.pub.player_mode)}))}createFreq(e){const t="0",n=top.window.screen.width,r=top.window.screen.height;switch(e.pub.player_mode){case Ct.IN_STREAM:e.response_freq_multiple={instream:t};break;case Ct.IR:e.response_freq_multiple={inread:t};break;case Ct.MS:e.response_freq_multiple={"mobile-survey":t};break;case Ct.MIF:e.response_freq_multiple={inflip:t};break;case Ct.MIC:e.response_freq_multiple={"mobile-incover":t};break;case Ct.MIR:e.response_freq_multiple={"mobile-inread":t};break;case Ct.MAIR:e.response_freq_multiple={"mobile-app-inread":t};break;case Ct.MAIC:e.response_freq_multiple={"mobile-app-incover":t};break;case Ct.MFS:r/n<=16/9?(e.pb=1,e.response_freq_multiple={"mobile-fullscreen":t}):e.response_freq_multiple={"mobile-fullscreen":t};break;case Ct.DPF:!function(){const e=window.location.href,t=window.location.host,n=top.window?top.window.innerWidth:window.innerWidth;let r=0;switch(!0){case t.indexOf(Ke)>-1:r=1300;break;case t.indexOf(yt)>-1:r=1260;break;case t.indexOf(i)>-1:r=1240;break;case t.indexOf($e)>-1:r=1225;break;case e.indexOf(it)>-1:case e===nt:case t.indexOf(Te)>-1:case t.indexOf(Re)>-1:r=1200;break;case t.indexOf(It)>-1:r=1190;break;case t.indexOf(pe)>-1:case t.indexOf(Se)>-1:r=1150;break;case t.indexOf(he)>-1:r=1125;break;case t.indexOf(tt)>-1:case t.indexOf(De)>-1:r=1e3;break;case t.indexOf(ot)>-1:r=836}return n>Math.ceil(10*r/7)+25}()?(e.pb=1,e.response_freq_multiple={"desktop-frame":t}):e.response_freq_multiple={"desktop-frame":t};break;default:e.response_freq_multiple={inread:t,"mobile-inread":t}}}}(new class{constructor(){this.queryCenter=new _o}readyToQueryAd(){const e=window.location.href;window.ONEAD_lib_hasBindEventListener||(window.ONEAD_lib_hasBindEventListener=!1),Li(),this.queryCenter.isSameAdUnit()&&Ni(),e.indexOf(he)>-1?window.addEventListener("DOMContentLoaded",(()=>{this.queryCenter.adQueryProcess()})):this.queryCenter.adQueryProcess()}}).readyToQueryAd()})();